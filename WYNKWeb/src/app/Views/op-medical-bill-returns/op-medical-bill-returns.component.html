<div class="row">
  <div class="col-sm-4">
    <h5 class="card-header bg-success text-white rounded-top">
      OutPatient Medical Billing Returns
    </h5>
  </div>
</div>

<div class="col-sm-12 ml-n1p border-blue border-radius bg-white">
  <div class="row mt-1p" *ngIf="HideDateDetails">
    <div class="col-sm-2 width-15p  Padding-0px ml-2p">
      <mat-form-field appearance="outline">
        <mat-label>Status</mat-label>
        <mat-select [(ngModel)]="M_Status" name="Status"  [disabled]="DisableSearch">
          <mat-option value="Billed">Open</mat-option>
          <mat-option value="Existing Return View">Existing Return View</mat-option>
          <!--<mat-option value="Returned">Closed</mat-option>-->
        </mat-select>
      </mat-form-field>
    </div>
    <div class="col-sm-3 width-14p">
      <mat-form-field appearance="outline">
        <mat-select [(ngModel)]="M_PeriodDate" name="PeriodDate" (ngModelChange)="PeriodDateChange()">
          <mat-option value="Today">Specific Date</mat-option>
          <mat-option value="PeriodFrom">Specific Period</mat-option>
          <mat-option value="BillNo">Bill No</mat-option>
          <mat-option value="PatientName">Patient Name</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="col-sm-5 ml-n2p" *ngIf="!HideDates">
      <div class="col-sm-6">
        <mat-form-field appearance="outline">
          <mat-label>From Date</mat-label>
          <input [(ngModel)]="M_FromDate"  name="FromDate" [max]="maxToDate" matInput [matDatepicker]="FromDate" placeholder="FromDate">
          <mat-datepicker-toggle matSuffix [for]="FromDate"></mat-datepicker-toggle>
          <mat-datepicker #FromDate></mat-datepicker>
        </mat-form-field>
      </div>
      <div class="col-sm-6 ml-n2p">
        <mat-form-field appearance="outline">
          <mat-label>To Date</mat-label>
          <input [(ngModel)]="M_ToDate" [min]="minToDate" [max]="maxToDate" (dateChange)="CheckToDate()" name="ToDate" matInput [matDatepicker]="ToDate" placeholder="ToDate" [disabled]="!PeriodFrom">
          <mat-datepicker-toggle matSuffix [for]="ToDate"></mat-datepicker-toggle>
          <mat-datepicker #ToDate></mat-datepicker>
        </mat-form-field>
      </div>
    </div>
    <div class="col-sm-5 ml-n2p mt-0px" *ngIf="HideDates">
      <div class="col-sm-6">
        <mat-form-field appearance="outline">
          <mat-label>Search</mat-label>
          <input [(ngModel)]="M_Search" maxlength="100" matInput placeholder="Search" name="Search" autocomplete="off" type="text" required>
        </mat-form-field>
      </div>
    </div>
    <div class="col-sm-1 ml-n3p mt5">
      <button type="button" class="btn btn-success" (click)="DateSearch(M_FromDate,M_ToDate,M_Status)">Search</button>
    </div>
    <div class="col-sm-1 ml-1p mt5">
      <button type="button" class="btn btn-warning-default" (click)="ToggleSearch()">Cancel</button>
    </div>
  </div>
  <div *ngIf="BillListTable" class="m-6 mt-1p">
    <div class="row width-15p">
      <mat-form-field appearance="outline">
        <mat-label>Search Criteria</mat-label>
        <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Search Criteria">
      </mat-form-field>
    </div>
    <div class="col-sm-12">
      <div class="row">
        <div class="col-sm-1"></div>
        <div class="col-sm-10 heightAuto-300px">
          <table mat-table matSort [dataSource]="dataSource" class="custom-table withoutbackgroung search-table table-bordered">
            <ng-container matColumnDef="BillDate">
              <th mat-header-cell *matHeaderCellDef>{{M_BillDate}}</th>
              <td mat-cell *matCellDef="let element"> {{element.BillDate|date:'dd-MMM-y,HH:mm'}} </td>
            </ng-container>
            <ng-container matColumnDef="BillNo">
              <th mat-header-cell *matHeaderCellDef>{{M_BillNo}}</th>
              <td mat-cell *matCellDef="let element"> {{element.BillNo}} </td>
            </ng-container>
            <ng-container matColumnDef="UIN">
              <th mat-header-cell *matHeaderCellDef>UIN</th>
              <td mat-cell *matCellDef="let element"> {{element.UIN}} </td>
            </ng-container>
            <ng-container matColumnDef="PatientName">
              <th mat-header-cell *matHeaderCellDef>Patient Name</th>
              <td mat-cell *matCellDef="let element"> {{element.PatientName}} </td>
            </ng-container>
            <ng-container matColumnDef="Store">
              <th mat-header-cell *matHeaderCellDef>Store</th>
              <td mat-cell *matCellDef="let element"> {{element.StoreName}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let element;  let even = even;  columns: displayedColumns;" class="cursor" (click)="selecttype(element)"></tr>
          </table>
        </div>
        <div class="col-sm-1"> </div>
      </div>
    </div>
  </div>
  <div *ngIf="Details">
    <div class="row mt-2p">
      <div class="col-sm-12">
        <div class="col-sm-6 mph-0 pb20">
          <span class="uinborder">
            <strong>{{M_UIN}} / {{M_PatientName}} / {{M_Age}} / {{M_Gender}}</strong>
          </span>
        </div>
        <div class="col-sm-6">
          <div class="row" *ngIf="Print">
            <div class="col-sm-6">
              <label class="fontsize-14p">Return Bill Date</label>&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;{{ReturnBillDate | date :'dd-MMM-yyyy,HH:mm'}}
            </div>
            <div class="col-sm-6">
              <label class="fontsize-14p">Return Bill No</label>&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;{{ReturnBillNo}}
            </div>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <label class="fontsize-14p">Bill Date</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;{{BillDate | date :'dd-MMM-yyyy,HH:mm'}}
            </div>
            <div class="col-sm-6">
              <label class="fontsize-14p">Bill No</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;{{BillNo}}
            </div>
          </div>

          <div class="row">
            <div class="col-sm-2 ml-1p width-30p  Padding-0px" *ngIf="!Print">
              <mat-form-field appearance="outline">
                <mat-label>Store</mat-label>
                <mat-select required [(ngModel)]="M_Store" name="Store">
                  <mat-option *ngFor="let Store of Stores" [value]="Store.Value">{{Store.Text}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-sm-4" *ngIf="!Print"></div>
            <div class="col-sm-6 ml-17p" *ngIf="!Print">
              <label class="fontsize-14p">Bill Type</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;{{BillType}}
            </div>
          </div>
          <div class="row">

            <div class="col-sm-6" *ngIf="!Print && (BillType =='Credit' || BillType =='Refund')">
              <label class="fontsize-14p">Already Paid</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;{{AlreadyPaid | currency:Country2}}
            </div>

            <div class="col-sm-6" *ngIf="!Print && AmountToRefund != 0">
              <label class="fontsize-14p">Amount to Refund</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;{{AmountToRefund}}
            </div>

          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <input id="tab-1" type="radio" name="tabs" checked="checked" />
      <input id="tab-2" type="radio" name="tabs" />
      <div class="tabs">
        <label for="tab-1">General Details</label>
        <label for="tab-2">Payment Details</label>
      </div>
      <div class="content">
        <div class="tab  position-sticky">
          <div class="col-sm-12 width-102p ml-n1p">
            <div class="col-sm-12">
              <h5 class="card-header bg-success text-white">
                Item Details
              </h5>
            </div>
          </div>
          <div class="col-sm-12 heightAuto-300px" *ngIf="!Print">
            <table mat-table matSort [dataSource]="ItemDetailedSource" class="custom-table withoutbackgroung search-table table-bordered" *ngIf="!Print">
              <ng-container matColumnDef="SerialNo">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">S.No</th>
                <td mat-cell *matCellDef="let j = index" class="width-4p text-center"> {{(j+1)}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="Serialsymbol">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-4p text-center padding-bot2px"> S.No </th>
              </ng-container>
              <ng-container matColumnDef="Drug">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Brand</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="width-7p text-left Padding-5px"> {{element.Drug}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="Brandsymbol">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-9p text-center Padding-20px"> Drug </th>
              </ng-container>
              <ng-container matColumnDef="UOM">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">UOM</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="width-7p text-left Padding-5px"> {{element.UOM}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="UOMs">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-2p text-center Padding-20px"> UOM </th>
              </ng-container>
              <ng-container matColumnDef="Quantity">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Quantity</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="text-end Padding-5px">{{element.Qty}}</td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="Quantitys">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-4p text-center Padding-20px">Billed Qty </th>
              </ng-container>
              <ng-container matColumnDef="AlreadyQuantity">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">AlreadyQuantity</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="text-end Padding-5px">{{element.AlreadyReturnQty}}</td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="AlreadyQuantitys">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-4p text-center Padding-20px">Returned Qty </th>
              </ng-container>
              <ng-container matColumnDef="ReturnedQuantity">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">ReturnedQuantity</th>
                <td mat-cell #rtqty *matCellDef="let element;let id = index;" class="text-end Padding-5px" [attr.contenteditable]="!element.IsReturned"
                    (keypress)="RestrictNegativeValues1($event)" (keyup)="ChangeValue(id,'ReturnQty',$event,element);
                    changeValueAmount(element);changeValueDiscountAmount(element);changeValueGrossAmount(element);
                    changeGStAmount(element);ChangeCess(element);changeValueTotal(element);">
                  {{element.ReturnQty}}
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="ReturnedQuantitys">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-4p text-center Padding-20px"> Qty </th>
              </ng-container>
              <ng-container matColumnDef="UnitPrice">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Unit Price</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="text-end Padding-5px">{{element.UnitPrice| number : '1.2-2'}}</td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="UnitPrices">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-7p text-center Padding-20px">Unit Price</th>
              </ng-container>
              <ng-container matColumnDef="Amount">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Amount</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="text-end Padding-5px">{{element.Amount| number : '1.2-2'}}</td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="Amounts">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-7p text-center Padding-20px">Amount</th>
              </ng-container>
              <ng-container matColumnDef="Discount">
                <th mat-header-cell *matHeaderCellDef class="width-4p text-center">%</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="width-4p text-end Padding-5px">{{element.Discount}}</td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="DiscountAmount">
                <th mat-header-cell *matHeaderCellDef class="width-6p text-center">Amount</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="width-4p text-end Padding-5px">{{element.DiscountAmount| number : '1.2-2'}}</td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="GrossAmount">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Gross  Amount</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="text-end Padding-5px">{{element.GrossAmount| number : '1.2-2'}}</td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="GrossAmounts">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-7p text-center Padding-20px">Gross  Amount</th>
              </ng-container>
              <ng-container matColumnDef="TaxDescription">
                <th mat-header-cell *matHeaderCellDef class="width-8p text-center">Description</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="text-end" contenteditable="false">
                  <div class="row">
                    <div *ngIf="element.TaxDescription != null" class="col-sm-10 mt-8p">
                      {{element.TaxDescription}}
                    </div>
                    <br />
                    <div *ngIf="element.Cess != null" class="col-sm-10">
                      {{element.CessDescription}}
                    </div>
                    <br />
                    <div *ngIf="element.AddCess != null" class="col-sm-10">
                      {{element.AddCessDescription}}
                    </div>
                  </div>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="GST">
                <th mat-header-cell *matHeaderCellDef class="width-2p text-center top-0px">%</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="text-end" contenteditable="false">
                  <div class="row">
                    <div *ngIf="element.GST != null" class="col-sm-10 mt-12p">
                      {{element.GST}}
                    </div>
                    <br />
                    <div *ngIf="element.Cess != null" class="col-sm-10">
                      {{element.Cess}}
                    </div>
                    <br />
                    <div *ngIf="element.AddCess != null" class="col-sm-10">
                      {{element.AddCess}}
                    </div>
                  </div>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="GSTValue">
                <th mat-header-cell *matHeaderCellDef class="width-7p text-center top-0px">Amount</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="width-1p text-end Padding-5px" contenteditable="false">
                  <div class="row">
                    <div *ngIf="element.GST != null" class="col-sm-10 mt-8p">
                      {{element.GSTValue | number : '1.2-2'}}
                    </div><br />
                    <div *ngIf="element.Cess != null" class="col-sm-10">
                      {{element.CessValue | number : '1.2-2'}}
                    </div><br />
                    <div *ngIf="element.AddCess != null" class="col-sm-10">
                      {{element.AddCessValue | number : '1.2-2'}}
                    </div>
                  </div>
                </td>
                <td mat-footer-cell *matFooterCellDef><b>Total</b></td>
              </ng-container>
              <ng-container matColumnDef="TotalCost">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Total Cost</th>
                <td mat-cell *matCellDef="let element ;let id = index;" class="text-end">{{element.TotalCost| number : '1.2-2'}}</td>
                <td mat-footer-cell *matFooterCellDef class="text-end">{{getTotalCost() | currency:Country2}} </td>
              </ng-container>
              <ng-container matColumnDef="TotalCosts">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-8p text-center Padding-20px">Net Amount</th>
              </ng-container>
              <ng-container matColumnDef="ViewBatchSerial">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">ViewBatchSerial</th>
                <td mat-cell *matCellDef="let element ;let i = index;" class="text-end">
                  <button mat-icon-button [disabled]="element.IsSerial == null">
                    <mat-icon data-toggle="tooltip" title="View Batch/Serial" (click)="element.IsSerial == true ? SerialList(element,i): element.IsSerial == null ? null : ViewBatchSerial(element,i)">create</mat-icon>
                  </button>
                </td>
                <td mat-footer-cell *matFooterCellDef class="text-end"> </td>
              </ng-container>
              <ng-container matColumnDef="ViewBatchSerials">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-8p text-center Padding-20px">Batch / Serial</th>
              </ng-container>
              <ng-container matColumnDef="header-row-group">
                <th mat-header-cell *matHeaderCellDef [attr.colspan]="2" class="text-center"> Discount </th>
              </ng-container>
              <ng-container matColumnDef="header-row-third-group">
                <th mat-header-cell *matHeaderCellDef [attr.colspan]="3" class="text-center"> Tax </th>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="['Serialsymbol','Brandsymbol','UOMs','Quantitys','AlreadyQuantitys','ReturnedQuantitys',
                   'UnitPrices','Amounts','header-row-group','GrossAmounts','header-row-third-group','TotalCosts','ViewBatchSerials']"></tr>
              <tr mat-header-row *matHeaderRowDef="ItemDetailedColumns; sticky: true"></tr>
              <tr mat-row *matRowDef="let row;  let even = even;  columns: ItemDetailedColumns;"></tr>
              <tr mat-footer-row *matFooterRowDef="ItemDetailedColumns; sticky: true"></tr>
            </table>
          </div>
          <div class="col-sm-12 heightAuto-300px" *ngIf="Print">
            <table mat-table matSort [dataSource]="ViewItemDetailedSource" class="custom-table withoutbackgroung search-table table-bordered">
              <ng-container matColumnDef="SerialNo">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">S.No</th>
                <td mat-cell *matCellDef="let j = index" class="width-4p text-center"> {{(j+1)}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="Serialsymbol">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-4p text-center padding-bot2px"> S.No </th>
              </ng-container>
              <ng-container matColumnDef="Drug">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Brand</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="width-7p text-left Padding-5px"> {{element.Drug}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="Brandsymbol">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-9p text-center Padding-20px"> Drug </th>
              </ng-container>
              <ng-container matColumnDef="UOM">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">UOM</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="width-7p text-left Padding-5px"> {{element.UOM}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="UOMs">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-2p text-center Padding-20px"> UOM </th>
              </ng-container>
              <ng-container matColumnDef="Quantity">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Quantity</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="text-end Padding-5px">{{element.Qty}}</td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="Quantitys">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-4p text-center Padding-20px">Return Qty </th>
              </ng-container>
              <ng-container matColumnDef="UnitPrice">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Unit Price</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="text-end Padding-5px">{{element.UnitPrice| number : '1.2-2'}}</td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="UnitPrices">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-7p text-center Padding-20px">Unit Price</th>
              </ng-container>
              <ng-container matColumnDef="Amount">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Amount</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="text-end Padding-5px">{{element.Amount| number : '1.2-2'}}</td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="Amounts">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-7p text-center Padding-20px">Amount</th>
              </ng-container>
              <ng-container matColumnDef="Discount">
                <th mat-header-cell *matHeaderCellDef class="width-4p text-center">%</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="width-4p text-end Padding-5px">{{element.Discount}}</td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="DiscountAmount">
                <th mat-header-cell *matHeaderCellDef class="width-6p text-center">Amount</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="width-4p text-end Padding-5px">{{element.DiscountAmount| number : '1.2-2'}}</td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="GrossAmount">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Gross  Amount</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="text-end Padding-5px">{{element.GrossAmount| number : '1.2-2'}}</td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="GrossAmounts">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-7p text-center Padding-20px">Gross  Amount</th>
              </ng-container>
              <ng-container matColumnDef="TaxDescription">
                <th mat-header-cell *matHeaderCellDef class="width-8p text-center">Description</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="text-end" contenteditable="false">
                  <div class="row">
                    <div *ngIf="element.TaxDescription != null" class="col-sm-10 mt-8p">
                      {{element.TaxDescription}}
                    </div>
                    <br />
                    <div *ngIf="element.Cess != null" class="col-sm-10">
                      {{element.CessDescription}}
                    </div>
                    <br />
                    <div *ngIf="element.AddCess != null" class="col-sm-10">
                      {{element.AddCessDescription}}
                    </div>
                  </div>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="GST">
                <th mat-header-cell *matHeaderCellDef class="width-2p text-center top-0px">%</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="text-end" contenteditable="false">
                  <div class="row">
                    <div *ngIf="element.GST != null" class="col-sm-10 mt-12p">
                      {{element.GST}}
                    </div>
                    <br />
                    <div *ngIf="element.Cess != null" class="col-sm-10">
                      {{element.Cess}}
                    </div>
                    <br />
                    <div *ngIf="element.AddCess != null" class="col-sm-10">
                      {{element.AddCess}}
                    </div>
                  </div>
                </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="GSTValue">
                <th mat-header-cell *matHeaderCellDef class="width-7p text-center top-0px">Amount</th>
                <td mat-cell *matCellDef="let element;let id = index;" class="width-1p text-end Padding-5px" contenteditable="false">
                  <div class="row">
                    <div *ngIf="element.GST != null" class="col-sm-10 mt-8p">
                      {{element.GSTValue | number : '1.2-2'}}
                    </div><br />
                    <div *ngIf="element.Cess != null" class="col-sm-10">
                      {{element.CessValue | number : '1.2-2'}}
                    </div><br />
                    <div *ngIf="element.AddCess != null" class="col-sm-10">
                      {{element.AddCessValue | number : '1.2-2'}}
                    </div>
                  </div>
                </td>
                <td mat-footer-cell *matFooterCellDef><b>Total</b></td>
              </ng-container>
              <ng-container matColumnDef="TotalCost">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Total Cost</th>
                <td mat-cell *matCellDef="let element ;let id = index;" class="text-end">{{element.TotalCost| number : '1.2-2'}}</td>
                <td mat-footer-cell *matFooterCellDef class="text-end">{{getTotalCost() | currency:Country2}} </td>
              </ng-container>
              <ng-container matColumnDef="TotalCosts">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-8p text-center Padding-20px">Net Amount</th>
              </ng-container>
              <ng-container matColumnDef="ViewBatchSerial">
                <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">ViewBatchSerial</th>
                <td mat-cell *matCellDef="let element ;let i = index;" class="text-end">
                  <button mat-icon-button>
                    <mat-icon data-toggle="tooltip" title="View Batch/Serial" (click)="element.IsSerial == true ? ViewReturnedSerial(element,i) : element.IsSerial == null ? null : ViewReturnedBatch(element,i)">create</mat-icon>
                  </button>
                </td>
                <td mat-footer-cell *matFooterCellDef class="text-end"> </td>
              </ng-container>
              <ng-container matColumnDef="ViewBatchSerials">
                <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-8p text-center Padding-20px">Batch / Serial</th>
              </ng-container>
              <ng-container matColumnDef="header-row-group">
                <th mat-header-cell *matHeaderCellDef [attr.colspan]="2" class="text-center"> Discount </th>
              </ng-container>
              <ng-container matColumnDef="header-row-third-group">
                <th mat-header-cell *matHeaderCellDef [attr.colspan]="3" class="text-center"> Tax </th>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="['Serialsymbol','Brandsymbol','UOMs','Quantitys',
                   'UnitPrices','Amounts','header-row-group','GrossAmounts','header-row-third-group','TotalCosts','ViewBatchSerials']"></tr>
              <tr mat-header-row *matHeaderRowDef="ViewItemDetailedColumns"></tr>
              <tr mat-row *matRowDef="let row;  let even = even;  columns: ViewItemDetailedColumns;"></tr>
              <tr mat-footer-row *matFooterRowDef="ViewItemDetailedColumns"></tr>
            </table>
          </div>
        </div>
        <div class="tab  position-sticky width-100p">
          <div *ngIf="!Print && BillType != 'Credit' || BillType == 'Refund'">
            <div class="row mt-1p ml-1p">
              <label class="fontsize-14p">Amount</label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;{{PayAmount | currency:Country2}}
            </div>
            <div class="row col-sm-12 mt-1p">
              <div class="card mb-12">
                <h5 class="card-header bg-success text-white">
                  Refund  details
                  <button (click)="AddPaymentDetailsNewgrid();" class="btnuserdefined btn-dark"><i matTooltip="Add Payment Details" class="fa fa-plus"></i></button>
                </h5>
                <div class="card-body">
                  <div class="row heightAuto-300px">
                    <table mat-table [dataSource]="dataSource3" class="custom-table withoutbackgroung search-table table-bordered">
                      <ng-container matColumnDef="PaymentMode">
                        <th mat-header-cell *matHeaderCellDef>Payment Mode</th>
                        <td mat-cell *matCellDef="let element;let id = index;">
                          <mat-form-field appearance="outline">
                            <mat-select (selectionChange)="PaymentChange(id,$event,element)">
                              <mat-option *ngFor="let Paymentsmode of Paymentsmodes" [value]="Paymentsmode.Value">
                                {{Paymentsmode.Text}}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
                      <ng-container matColumnDef="BankName">
                        <th mat-header-cell *matHeaderCellDef>Bank Name</th>
                        <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'">
                          <mat-form-field appearance="outline">
                            <input (blur)="BankName($event,element)" (keypress)="nameField($event)" [disabled]="element.PaymentMode =='Cash'  " maxlength="100" matInput placeholder="Enter BankName" name="BankName" type="text">
                          </mat-form-field>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
                      <ng-container matColumnDef="InstrumentNumber">
                        <th mat-header-cell *matHeaderCellDef>Instrument Number</th>
                        <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'">
                          <mat-form-field appearance="outline">
                            <input (blur)="InstrumentNumber($event,element)" [disabled]="element.PaymentMode =='Cash'" maxlength="15" (keypress)="numberOnly($event)" matInput placeholder="Enter Instrument Number" name="InstrumentNumber" type="text">
                          </mat-form-field>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
                      <ng-container matColumnDef="InstrumentDate">
                        <th mat-header-cell *matHeaderCellDef>Instrument Date</th>
                        <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash' || element.PaymentMode !='Debit card'|| element.PaymentMode !='Credit Card'">
                          <mat-form-field appearance="outline">
                            <input [disabled]="element.PaymentMode =='Cash' || element.PaymentMode =='Debit card'|| element.PaymentMode =='Credit Card' "
                                   name="InstrumentDate" autocomplete="off" [min]="maxToDate" matInput [matDatepicker]="InstrumentDate" (dateChange)="dateofinstrument($event,element)" placeholder="InstrumentDate">
                            <mat-datepicker-toggle matSuffix [for]="InstrumentDate"></mat-datepicker-toggle>
                            <mat-datepicker #InstrumentDate></mat-datepicker>
                          </mat-form-field>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
                      <ng-container matColumnDef="ExpiryDate">
                        <th mat-header-cell *matHeaderCellDef>Expiry Date</th>
                        <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'|| element.PaymentMode !='Demand Draft' ">
                          <mat-form-field appearance="outline">
                            <input (dateChange)="dateexpiry($event,element)" [disabled]="element.PaymentMode =='Cash'|| element.PaymentMode =='Demand Draft' " autocomplete="off" [min]="MINExpiryDate"
                                   name="ExpiryDate" matInput [matDatepicker]="ExpiryDate" placeholder="ExpiryDate" type="datetime">
                            <mat-datepicker-toggle matSuffix [for]="ExpiryDate"></mat-datepicker-toggle>
                            <mat-datepicker #ExpiryDate></mat-datepicker>
                          </mat-form-field>
                        </td>
                        <td mat-footer-cell *matFooterCellDef><b>Total</b></td>
                      </ng-container>
                      <ng-container matColumnDef="Branch">
                        <th mat-header-cell *matHeaderCellDef>Branch</th>
                        <td mat-cell *matCellDef="let element"
                            [contentEditable]="element.PaymentMode !='Cash'|| element.PaymentMode !='Debit card' || element.PaymentMode !='Credit Card'">
                          <mat-form-field appearance="outline">
                            <input (blur)="Branch($event,element)"
                                   [disabled]="element.PaymentMode =='Cash' || element.PaymentMode =='Debit card' || element.PaymentMode =='Credit Card'"
                                   (keypress)="nameField($event)" maxlength="50" matInput name="Branch" placeholder="Branch" type="text">
                          </mat-form-field>

                        </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>
                      <ng-container matColumnDef="Amount">
                        <th mat-header-cell *matHeaderCellDef>Amount</th>
                        <td mat-cell *matCellDef="let element;let id = index" required (keyup)="Amount(id,'Amount',$event,element)" (keypress)="numberOnly($event)" [contentEditable]="disableRow">
                          {{element.Amount | number :'1.2-2'}}

                        </td>
                        <td mat-footer-cell *matFooterCellDef>
                          <strong>
                            {{PTotalAmount1() | currency:Country2 }}
                          </strong>
                        </td>
                      </ng-container>
                      <ng-container matColumnDef="Action">
                        <th mat-header-cell *matHeaderCellDef>Action</th>
                        <td mat-cell *matCellDef="let element;let id = index" [contentEditable]="disableRow">
                          <i class="fas fa-trash-alt icon-delete" title="Delete" (click)="removePaytype(i)"></i>
                        </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>
                      <tr mat-header-row *matHeaderRowDef="displayedColumns3;sticky: true"></tr>
                      <tr mat-row *matRowDef="let element;  let even = even; columns: displayedColumns3"></tr>
                      <tr mat-footer-row *matFooterRowDef="displayedColumns3;"></tr>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div *ngIf="Print">
            <div class="row col-sm-12 mt-1p"  *ngIf="ShowPayment">
              <div class="card mb-12">
                <h5 class="card-header bg-success text-white">
                  Refund details
                </h5>
                <div class="card-body">
                  <div class="row heightAuto-250px">
                    <table mat-table matSort [dataSource]="PrintPaySource" class="custom-table withoutbackgroung search-table table-bordered">
                      <ng-container matColumnDef="PaymentMode">
                        <th mat-header-cell *matHeaderCellDef>PaymentMode</th>
                        <td mat-cell *matCellDef="let element">{{element.PaymentMode}}</td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
                      <ng-container matColumnDef="InstrumentNumber">
                        <th mat-header-cell *matHeaderCellDef>Instrument Number</th>
                        <td mat-cell *matCellDef="let element">{{element.InstrumentNumber}} </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
                      <ng-container matColumnDef="InstrumentDate">
                        <th mat-header-cell *matHeaderCellDef>Instrument Date</th>
                        <td mat-cell *matCellDef="let element">{{element.Instrumentdate| date:'dd-MMM-y'}} </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
                      <ng-container matColumnDef="BankName">
                        <th mat-header-cell *matHeaderCellDef>Bank Name</th>
                        <td mat-cell *matCellDef="let element">{{element.BankName}} </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
                      <ng-container matColumnDef="Branch">
                        <th mat-header-cell *matHeaderCellDef>Branch</th>
                        <td mat-cell *matCellDef="let element">{{element.BankBranch}} </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>
                      <ng-container matColumnDef="ExpiryDate">
                        <th mat-header-cell *matHeaderCellDef>Expiry Date</th>
                        <td mat-cell *matCellDef="let element">{{element.Expirydate| date:'dd-MMM-y'}} </td>
                        <td mat-footer-cell *matFooterCellDef><strong>Total</strong></td>
                      </ng-container>
                      <ng-container matColumnDef="Amount">
                        <th mat-header-cell *matHeaderCellDef>Amount</th>
                        <td mat-cell *matCellDef="let element">{{element.Amount | number : '1.2-2'}} </td>
                        <td mat-footer-cell *matFooterCellDef>
                          {{RefundPaidTotal | currency:Country2 }}
                        </td>
                      </ng-container>
                      <tr mat-header-row *matHeaderRowDef="PrintPayDisplay;sticky: true"></tr>
                      <tr mat-row *matRowDef="let element;  let even = even; columns: PrintPayDisplay"></tr>
                      <tr mat-footer-row *matFooterRowDef="PrintPayDisplay;sticky: true"></tr>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="col-sm-12 m-6" *ngIf="Details">
  <div class="row">
    <div class="col-sm-4 f-r">
      <button type="button" class="btn btn-warning-default ml-2p" (click)="onCancel()">Cancel</button>
      <button *ngIf="!Print" type="button" class="success btn btn-primary ml-5p" (click)="onSubmit()">Submit</button>
      <button *ngIf="Print" type="button" class="success btn btn-primary ml-5p" (click)="Prints()">Print</button>
    </div>
  </div>
</div>


<!--/* Batch Popup */-->
<div class="modal" role="dialog" [ngStyle]="{'display':BatchModel}">
  <div class="modal-dialog" style="width:75%">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="BatchModelClose()">&times;</button>
        <h6 class="modal-title text-center">
          <strong>Batch Details</strong>
        </h6>
      </div>
      <div class="modal-body">
        <div class="row border-blue border-radius Padding-5px">
          <div class="col-sm-4">
            <div class="col-sm-6">
              <label><strong>Brand :</strong></label>
            </div>
            <div class="col-sm-6">
              <p>{{PopBrand}}</p>
            </div>
          </div>
          <div class="col-sm-4">
            <label class="col-sm-6 ml-n11p"><strong>Return Qty :</strong></label>
            <p class="col-sm-6">{{PopReturnqty}}</p>
          </div>
          <div class="col-sm-4">
            <label class="col-sm-6"><strong>Selected Qty :</strong></label>
            <p class="col-sm-6">{{PopSelectedQty}}</p>
          </div>
        </div>
        <div class="row heightAuto-200px mt-1p ml-0 width-100p">
          <table mat-table matSort [dataSource]="BatchDetailsSource" class="custom-table withoutbackgroung search-table table-bordered">
            <ng-container matColumnDef="BatchNo">
              <th mat-header-cell *matHeaderCellDef>Batch No</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip">{{element.BatchNo}}</td>
            </ng-container>
            <ng-container matColumnDef="IssuedQty">
              <th mat-header-cell *matHeaderCellDef>Billed qty</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip">{{element.IssuedQty}} </td>
            </ng-container>
            <ng-container matColumnDef="ExpiryDate">
              <th mat-header-cell *matHeaderCellDef>Expiry date</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip">{{element.ExpiryDate | date:'dd-MMM-y'}} </td>
            </ng-container>
            <ng-container matColumnDef="ReturnQty">
              <th mat-header-cell *matHeaderCellDef>Returned qty</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip">{{element.ReturnQty}} </td>
            </ng-container>
            <ng-container matColumnDef="QtyTaken">
              <th mat-header-cell *matHeaderCellDef>Qty</th>
              <td mat-cell [attr.contenteditable]="element.IsReturned" *matCellDef="let element; let i = index;" (keypress)="RestrictNegativeValues1($event)" (keyup)="changeValue1(i,'QtyToReturn',$event,element);checkingTableQty(i,'QtyToReturn',$event,element)" data-toggle="tooltip" title="Select">{{element.QtyToReturn}} </td>
            </ng-container>
            <ng-container matColumnDef="ReturnBillNo">
              <th mat-header-cell *matHeaderCellDef style="width:19%">Return Bill No</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip">{{element.ReturnMedicalBillDetails}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="BatchDetailsCoulmns;sticky:true"></tr>
            <tr mat-row *matRowDef="let row; let element;   let even = even;columns: BatchDetailsCoulmns;" [ngClass]="{gray: even}"></tr>
          </table>
        </div>

        <div class="row mt-6p">
          <div class="col-sm-5"></div>
          <div class="col-sm-1 ml-5p">
            <button class="success btn btn-primary " mat-raised-button (click)="BatchQtyCheck()">Ok</button>
          </div>
          <div class="col-sm-6"></div>
        </div>

      </div>

    </div>
  </div>
</div>

<!--/* Serial Popup */-->
<div class="modal" role="dialog" [ngStyle]="{'display':SerialModels}">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="SerialModelClose()">&times;</button>
        <h5 class="modal-title text-center">
          <strong>Serial Details</strong>
        </h5>
      </div>
      <div class="modal-body">
        <div class="row border-blue border-radius Padding-5px">
          <div class="col-sm-4">
            <div class="col-sm-6">
              <label><strong>Brand :</strong></label>
            </div>
            <div class="col-sm-6">
              <p>{{PopBrand}}</p>
            </div>
          </div>
          <div class="col-sm-4">
            <label class="col-sm-6 ml-n11p"><strong>Return Qty :</strong></label>
            <p class="col-sm-6">{{PopReturnqty}}</p>
          </div>
          <div class="col-sm-4">
            <label class="col-sm-6"><strong>Selected Qty :</strong></label>
            <p class="col-sm-6">{{PopSelectedQty}}</p>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-2"></div>
          <div class="col-sm-4 mt-2p border-blue border-radius">
            <div class="PopUpHeader text-center">
              <mat-label>Billed Serial Numbers:</mat-label>
            </div>
            <div class="heightAuto-200px">
              <mat-selection-list #Serialinfo [(ngModel)]="selectedOptions" name="selectedOptions" (selectionChange)="onSelection($event,Serialinfo.selectedOptions)" (ngModelChange)="SerialLis($event,Serialinfo)">
                <mat-list-option *ngFor="let serials of SerialLists" [value]="serials">
                  {{serials.SerialNo}}
                </mat-list-option>
              </mat-selection-list>
            </div>
          </div>
          <div class="col-sm-2"></div>
          <div class="col-sm-4 mt-26p">
            <div class="col-sm-4 ml-n9p">
              <button type="button" class="success btn btn-primary" (click)="QtyCheck()">OK</button>
            </div>
            <div class="col-sm-4 ml-20p">
              <button type="button" class="btn btn-warning-default ml-2p" (click)="Serialinfo.deselectAll()">Cancel</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<!--/* Reprint Popup */-->
<div id="section1" style="display:none">
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-6">
        <label style="font-size:16px"><strong>{{CompanyName}}</strong> </label>
      </div>
      <div class="col-sm-2"></div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-2"></div>
      <div class="col-sm-7"> <label style="text-align:center;margin-left:28%"><strong>{{CompanyAddress1 + ' '+ CompanyAddress2 + ' '+ CompanyAddress3}}</strong></label></div>
      <div class="col-sm-3"></div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-3"></div>
      <div class="col-sm-7"> <label style="text-align:center;margin-left:1%"><strong>{{'Phone No:'+' '+ CompanyPhone1 + ',' + ' ' + 'Website:' + ' ' + CompanyWebsite}}</strong></label></div>
      <div class="col-sm-1"></div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-4"><label style="text-align:center"><strong>OutPatient Medical Billing Return</strong></label></div>
      <div class="col-sm-4"></div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-6">
        <label class="fontsize-14p"><strong>Return Bill Date</strong></label>&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;{{ReturnBillDate | date :'dd-MMM-yyyy,HH:mm'}}
      </div>
      <div class="col-sm-6">
        <label class="fontsize-14p"><strong>Return Bill No</strong></label>&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;{{ReturnBillNo}}
      </div>
    </div>
    <div class="row">
      <div class="col-sm-6">
        <label class="fontsize-14p"><strong>Bill Date</strong></label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;{{BillDate | date :'dd-MMM-yyyy,HH:mm'}}
      </div>
      <div class="col-sm-6">
        <label class="fontsize-14p"><strong>Bill No</strong></label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;&nbsp;&nbsp;{{BillNo}}
      </div>
    </div>
    <div class="row">
      <div class="col-sm-4">
        <label><strong>Patient ID</strong></label> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : &nbsp; {{M_UIN}}
      </div>
      <div class="col-sm-4">
        <label><strong>Patient Name</strong></label>  &nbsp;&nbsp; : &nbsp;&nbsp;{{M_PatientName}}
      </div>
      <div class="col-sm-4">
        <label><strong>Age / Gender : </strong>{{M_Age}} / {{M_Gender}}</label>
      </div>
    </div>
  </div>
  <div class="col-sm-12" style="margin-bottom:5px;">
    <div class="row">
      <label><strong>Item Details:</strong></label>
    </div>
    <div class="row" style="margin-top:5px;">
      <div class="col-sm-12 width-100p" *ngIf="!Print">
        <table mat-table matSort [dataSource]="PrintItemDetailedSource" class="custom-table withoutbackgroung search-table table-bordered">
          <ng-container matColumnDef="SerialNo">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">S.No</th>
            <td mat-cell *matCellDef="let j = index" class="width-4p text-center"> {{(j+1)}} </td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="Serialsymbol">
            <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-4p text-center padding-bot2px"> S.No </th>
          </ng-container>
          <ng-container matColumnDef="Drug">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Brand</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="width:12%" class="width-7p text-left Padding-5px"> {{element.Drug}} </td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="Brandsymbol">
            <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-9p text-center Padding-20px"> Drug </th>
          </ng-container>
          <ng-container matColumnDef="UOM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">UOM</th>
            <td mat-cell *matCellDef="let element;let id = index;" class="width-7p text-left Padding-5px"> {{element.UOM}} </td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="UOMs">
            <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-2p text-center Padding-20px"> UOM </th>
          </ng-container>
          <ng-container matColumnDef="Quantity">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Quantity</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="text-align:right" class="text-end Padding-5px">{{element.Qty}}</td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="Quantitys">
            <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-4p text-center Padding-20px">Billed Qty </th>
          </ng-container>
          <ng-container matColumnDef="AlreadyQuantity">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">AlreadyQuantity</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="text-align:right" class="text-end Padding-5px">{{element.AlreadyReturnQty}}</td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="AlreadyQuantitys">
            <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-4p text-center Padding-20px">Returned Qty </th>
          </ng-container>
          <ng-container matColumnDef="UnitPrice">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Unit Price</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="text-align:right" class="text-end Padding-5px">{{element.UnitPrice| number : '1.2-2'}}</td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="UnitPrices">
            <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-7p text-center Padding-20px">Unit Price</th>
          </ng-container>
          <ng-container matColumnDef="Amount">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Amount</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="text-align:right" class="text-end Padding-5px">{{element.Amount| number : '1.2-2'}}</td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="Amounts">
            <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-7p text-center Padding-20px">Amount</th>
          </ng-container>
          <ng-container matColumnDef="Discount">
            <th mat-header-cell *matHeaderCellDef class="width-4p text-center">%</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="text-align:right" class="width-4p text-end Padding-5px">{{element.Discount}}</td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="DiscountAmount">
            <th mat-header-cell *matHeaderCellDef class="width-6p text-center">Amount</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="text-align:right" class="width-4p text-end Padding-5px">{{element.DiscountAmount| number : '1.2-2'}}</td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="GrossAmount">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Gross  Amount</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="text-align:right" class="text-end Padding-5px">{{element.GrossAmount| number : '1.2-2'}}</td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="GrossAmounts">
            <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-7p text-center Padding-20px">Gross  Amount</th>
          </ng-container>
          <ng-container matColumnDef="TaxDescription">
            <th mat-header-cell *matHeaderCellDef class="width-8p text-center">Description</th>
            <td mat-cell *matCellDef="let element;let id = index;" class="text-end" contenteditable="false">
              <div class="row">
                <div *ngIf="element.TaxDescription != null" class="col-sm-10 mt-8p">
                  {{element.TaxDescription}}
                </div>
                <br />
                <div *ngIf="element.Cess != null" class="col-sm-10">
                  {{element.CessDescription}}
                </div>
                <br />
                <div *ngIf="element.AddCess != null" class="col-sm-10">
                  {{element.AddCessDescription}}
                </div>
              </div>
            </td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="GST">
            <th mat-header-cell *matHeaderCellDef class="width-2p text-center top-0px">%</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="text-align:right" class="text-end" contenteditable="false">
              <div class="row">
                <div *ngIf="element.GST != null" class="col-sm-10 mt-12p">
                  {{element.GST}}
                </div>
                <br />
                <div *ngIf="element.Cess != null" class="col-sm-10">
                  {{element.Cess}}
                </div>
                <br />
                <div *ngIf="element.AddCess != null" class="col-sm-10">
                  {{element.AddCess}}
                </div>
              </div>
            </td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="GSTValue">
            <th mat-header-cell *matHeaderCellDef class="width-7p text-center top-0px">Amount</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="text-align:right" class="width-1p text-end Padding-5px" contenteditable="false">
              <div class="row">
                <div *ngIf="element.GST != null" class="col-sm-10 mt-8p">
                  {{element.GSTValue | number : '1.2-2'}}
                </div><br />
                <div *ngIf="element.Cess != null" class="col-sm-10">
                  {{element.CessValue | number : '1.2-2'}}
                </div><br />
                <div *ngIf="element.AddCess != null" class="col-sm-10">
                  {{element.AddCessValue | number : '1.2-2'}}
                </div>
              </div>
            </td>
            <td mat-footer-cell *matFooterCellDef><b>Total</b></td>
          </ng-container>
          <ng-container matColumnDef="TotalCost">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Total Cost</th>
            <td mat-cell *matCellDef="let element ;let id = index;" style="text-align:right" class="text-end">{{element.TotalCost| number : '1.2-2'}}</td>
            <td mat-footer-cell *matFooterCellDef style="text-align:right" class="text-end">{{getTotalCost() | currency:Country2}} </td>
          </ng-container>
          <ng-container matColumnDef="TotalCosts">
            <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-8p text-end Padding-20px">Net Amount</th>
          </ng-container>
          <ng-container matColumnDef="header-row-group">
            <th mat-header-cell *matHeaderCellDef [attr.colspan]="2" class="text-center"> Discount </th>
          </ng-container>
          <ng-container matColumnDef="header-row-third-group">
            <th mat-header-cell *matHeaderCellDef [attr.colspan]="3" class="text-center"> Tax </th>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="['Serialsymbol','Brandsymbol','UOMs','Quantitys','AlreadyQuantitys',
                   'UnitPrices','Amounts','header-row-group','GrossAmounts','header-row-third-group','TotalCosts']"></tr>
          <tr mat-header-row *matHeaderRowDef="PrintItemDetailedColumns"></tr>
          <tr mat-row *matRowDef="let row;  let even = even;  columns: PrintItemDetailedColumns;"></tr>
          <tr mat-footer-row *matFooterRowDef="PrintItemDetailedColumns"></tr>
        </table>
      </div>
      <div class="col-sm-12 width-100p" *ngIf="Print">
        <table mat-table matSort [dataSource]="PrintItemDetailedSource1"  style="border-left:1px black;font-size: 12px" class="table table-bordered">
          <ng-container matColumnDef="SerialNo">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">S.No</th>
            <td mat-cell *matCellDef="let j = index" class="width-4p text-center"> {{(j+1)}} </td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="Serialsymbol">
            <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-4p text-center padding-bot2px"> S.No </th>
          </ng-container>
          <ng-container matColumnDef="Drug">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Brand</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="width:12%" class="width-7p text-left Padding-5px"> {{element.Drug}} </td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="Brandsymbol">
            <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-9p text-center Padding-20px"> Drug </th>
          </ng-container>
          <ng-container matColumnDef="UOM">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">UOM</th>
            <td mat-cell *matCellDef="let element;let id = index;" class="width-7p text-left Padding-5px"> {{element.UOM}} </td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="UOMs">
            <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-2p text-center Padding-20px"> UOM </th>
          </ng-container>
          <ng-container matColumnDef="Quantity">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Quantity</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="text-align:right" class="text-end Padding-5px">{{element.Qty}}</td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="Quantitys">
            <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-4p text-center Padding-20px">Return Qty </th>
          </ng-container>
          <ng-container matColumnDef="UnitPrice">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Unit Price</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="text-align:right" class="text-end Padding-5px">{{element.UnitPrice| number : '1.2-2'}}</td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="UnitPrices">
            <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-7p text-center Padding-20px">Unit Price</th>
          </ng-container>
          <ng-container matColumnDef="Amount">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Amount</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="text-align:right" class="text-end Padding-5px">{{element.Amount| number : '1.2-2'}}</td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="Amounts">
            <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-7p text-center Padding-20px">Amount</th>
          </ng-container>
          <ng-container matColumnDef="Discount">
            <th mat-header-cell *matHeaderCellDef class="width-4p text-center">%</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="text-align:right" class="width-4p text-end Padding-5px">
              <div *ngIf="element.Discount != 0" class="col-sm-10 mt-8p">
                {{element.Discount}}
              </div>
            </td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="DiscountAmount">
            <th mat-header-cell *matHeaderCellDef class="width-6p text-center">Amount</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="text-align:right" class="width-4p text-end Padding-5px">
              <div *ngIf="element.DiscountAmount != 0" class="col-sm-10 mt-8p">
                {{element.DiscountAmount| number : '1.2-2'}}
              </div>
            </td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="GrossAmount">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Gross  Amount</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="text-align:right" class="text-end Padding-5px">{{element.GrossAmount| number : '1.2-2'}}</td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="GrossAmounts">
            <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-7p text-center Padding-20px">Gross  Amount</th>
          </ng-container>
          <ng-container matColumnDef="TaxDescription">
            <th mat-header-cell *matHeaderCellDef class="width-8p text-center">Description</th>
            <td mat-cell *matCellDef="let element;let id = index;" class="text-end" contenteditable="false">
              <div class="row">
                <div *ngIf="element.TaxDescription != null" class="col-sm-10 mt-8p">
                  {{element.TaxDescription}}
                </div>
                <br />
                <div *ngIf="element.Cess != null" class="col-sm-10">
                  {{element.CessDescription}}
                </div>
                <br />
                <div *ngIf="element.AddCess != null" class="col-sm-10">
                  {{element.AddCessDescription}}
                </div>
              </div>
            </td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="GST">
            <th mat-header-cell *matHeaderCellDef class="width-2p text-center top-0px">%</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="text-align:right" class="text-end" contenteditable="false">
              <div class="row">
                <div *ngIf="element.GST != null" class="col-sm-10 mt-12p">
                  {{element.GST}}
                </div>
                <br />
                <div *ngIf="element.Cess != null" class="col-sm-10">
                  {{element.Cess}}
                </div>
                <br />
                <div *ngIf="element.AddCess != null" class="col-sm-10">
                  {{element.AddCess}}
                </div>
              </div>
            </td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <ng-container matColumnDef="GSTValue">
            <th mat-header-cell *matHeaderCellDef class="width-7p text-center top-0px">Amount</th>
            <td mat-cell *matCellDef="let element;let id = index;" style="text-align:right" class="width-1p text-end Padding-5px" contenteditable="false">
              <div class="row">
                <div *ngIf="element.GST != null" class="col-sm-10 mt-8p">
                  {{element.GSTValue | number : '1.2-2'}}
                </div><br />
                <div *ngIf="element.Cess != null" class="col-sm-10">
                  {{element.CessValue | number : '1.2-2'}}
                </div><br />
                <div *ngIf="element.AddCess != null" class="col-sm-10">
                  {{element.AddCessValue | number : '1.2-2'}}
                </div>
              </div>
            </td>
            <td mat-footer-cell *matFooterCellDef><b>Total</b></td>
          </ng-container>
          <ng-container matColumnDef="TotalCost">
            <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Total Cost</th>
            <td mat-cell *matCellDef="let element ;let id = index;" style="text-align:right" class="text-end">{{element.TotalCost| number : '1.2-2'}}</td>
            <td mat-footer-cell *matFooterCellDef style="text-align:right" class="text-end">{{getTotalCost() | currency:Country2}} </td>
          </ng-container>
          <ng-container matColumnDef="TotalCosts">
            <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-8p text-end Padding-20px">Net Amount</th>
          </ng-container>
          <ng-container matColumnDef="header-row-group">
            <th mat-header-cell *matHeaderCellDef [attr.colspan]="2" class="text-center"> Discount </th>
          </ng-container>
          <ng-container matColumnDef="header-row-third-group">
            <th mat-header-cell *matHeaderCellDef [attr.colspan]="3" class="text-center"> Tax </th>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="['Serialsymbol','Brandsymbol','UOMs','Quantitys',
                   'UnitPrices','Amounts','header-row-group','GrossAmounts','header-row-third-group','TotalCosts']"></tr>
          <tr mat-header-row *matHeaderRowDef="PrintItemDetailedColumns1"></tr>
          <tr mat-row *matRowDef="let row;  let even = even;  columns: PrintItemDetailedColumns1;"></tr>
          <tr mat-footer-row *matFooterRowDef="PrintItemDetailedColumns1"></tr>
        </table>
      </div>
    </div>
    <div class="row">
      <mat-label>
        <strong>{{Country2}} in Words :</strong> &nbsp;&nbsp;{{transformValue(getTotalCost())}} {{Country2}} only
      </mat-label><br />
    </div>
  </div>
  <div class="col-sm-12" style="margin-bottom:5px;"  *ngIf="ShowPayment">
    <div class="row">
      <label><strong>Refund Details:</strong></label>
    </div>
    <div class="row" *ngIf="ShowPayment">
      <div class="col-sm-4">
        <div class="row">
          <div class="col-sm-6">
            <mat-label><strong>Receipt No</strong></mat-label> &nbsp;&nbsp;:
          </div>
          <div class="col-sm-6" style="margin-left:-2%">
            <mat-label style="margin-left:-20%">{{M_ReceiptNo}}</mat-label>
          </div>
        </div>
      </div>
      <div class="col-sm-6">
      <div class="row">
        <div class="col-sm-6">
          <mat-label> <strong>Receipt Date</strong></mat-label>&nbsp;:
        </div>
        <div class="col-sm-6" style="margin-left:-12%">
          <mat-label style="margin-left:-20%">{{M_ReceiptNoDate | date:'dd-MMM-y, HH:mm'}}</mat-label> &nbsp; Hrs
        </div>
      </div>
    </div>
    </div>
    <div class="row" style="margin-top:5px;" *ngIf="ShowPayment">
      <table align="center" style="border-left:1px black;margin-top:-9px;font-size: 12px" class="table table-bordered">
        <thead>
          <tr>
            <th style="text-align:center;background-color:#f0f5fa;color:gray">Sl.No</th>
            <th style="text-align:center;background-color:#f0f5fa;color:gray">Payment Mode</th>
            <th style="text-align:center;background-color:#f0f5fa;color:gray">Instrument No.</th>
            <th style="text-align:center;background-color:#f0f5fa;color:gray">Instrument Date</th>
            <th style="text-align:center;background-color:#f0f5fa;color:gray">Bank Name</th>
            <th style="text-align:center;background-color:#f0f5fa;color:gray">Branch</th>
            <th style="text-align:center;background-color:#f0f5fa;color:gray">Expiry Date</th>
            <th style="text-align:end;background-color:#f0f5fa;color:gray">Amount</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let x of PaymentPaidList; index as i">
            <td style="text-align:center">{{i+1}}</td>
            <td style="text-align:left">{{x.PaymentMode}}</td>
            <td style="text-align:left">{{x.InstrumentNumber}}</td>
            <td style="text-align:left">{{x.Instrumentdate| date:"dd-MMM-y"}}</td>
            <td style="text-align:left">{{x.BankName}}</td>
            <td style="text-align:left">{{x.BankBranch}}</td>
            <td style="text-align:left">{{x.Expirydate| date:"dd-MMM-y"}}</td>
            <td style="text-align:right">{{x.Amount| number : '1.2-2'}}</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td style="text-align:left"><strong>Total</strong></td>
            <td style="text-align:right">{{RefundPaidTotal | currency:Country2}}</td>
          </tr>
        </tfoot>
      </table>
    </div>
  </div>
  <div class="col-sm-12" style="margin-bottom:5px;">
    <div class="row">
      <div class="col-sm-6">
        <div *ngFor="let x of commonService.data.ReturnMedicalBillItemdetails; index as i">
          <div *ngIf="x.IsSerial != null">
            <span>{{i+1}} : {{x.Drug}}</span><br /><br />
            <table *ngIf="!x.IsSerial" class="table table-bordered"  style="border-left:1px black;margin-top:-9px;font-size: 14px">
              <thead>
                <tr>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray;width:12%">Batch No</th>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray;width:6%">Qty</th>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray;width:12%">Expiry Date</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let Batch of x.BatchDetails">
                  <td style="text-align:center;width:12%">{{Batch.BatchNo}}</td>
                  <td style="text-align:center;width:6%">{{Batch.Qty}}</td>
                  <td style="text-align:center;width:12%">{{Batch.ExpiryDate| date :'dd-MMM-yyyy'}}</td>
                </tr>
              </tbody>
            </table>
            <table *ngIf="x.IsSerial"class="table table-bordered"  style="border-left:1px black;margin-top:-9px;font-size: 14px">
              <thead>
                <tr>
                  <th style="width: 12%;text-align:center; background-color: #f0f5fa; color: gray">Serial No</th>
                  <th style="width: 12%;text-align:center; background-color: #f0f5fa; color: gray">Expiry Date</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let Serial of x.SerialDetails">
                  <td style="text-align:center;width:12%">{{Serial.SerialNo}}</td>
                  <td style="text-align:center;width:12%">{{Serial.ExpiryDate | date :'dd-MMM-yyyy'}}</td>
                </tr>
              </tbody>
            </table>
          </div>
          <br />
        </div>
      </div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-7"></div>
      <div class="col-sm-5">
        <label style="font-size:14px"><strong>For {{CompanyName}}</strong></label>
      </div>
    </div>
    <br />
    <br />
    <div class="row">
      <div class="col-sm-9"></div>
      <div class="col-sm-3">
        <label style="font-size:14px"><strong>Authorised Signatory</strong></label>
      </div>
    </div>
  </div>
</div>


<!--Print Popup-->
<div class="modal" role="dialog" [ngStyle]="{'display':printBlock}">
  <div class="example-box">
    <div class="modal-dialog modal-md">
      <div class="modal-content">
        <div class="modal-header">
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-11">
                <h6 class="modal-title">Information</h6>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-body">
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-1">
              </div>
              <div class="col-sm-10">
                <p><strong> Do you want to Print ?</strong></p>
              </div>
              <div class="col-sm-1">
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button (click)="PrintSummary1()" class="btn btn-primary">Yes</button>
          <button type="button" class="btn btn-success" data-dismiss="modal" (click)="printclose()" cdkFocusInitial>No</button>
        </div>
      </div>
    </div>
  </div>
</div>



<!--/* Return Batch Popup */-->
<div class="modal" role="dialog" [ngStyle]="{'display':ClosedBatchModel}">
  <div class="modal-dialog" style="width:75%">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="ClosedBatchModelClose()">&times;</button>
        <h6 class="modal-title text-center">
          <strong>Returned Batch Details</strong>
        </h6>
      </div>
      <div class="modal-body">
        <div class="row border-blue border-radius Padding-5px">
          <div class="col-sm-4">
            <div class="col-sm-6">
              <label><strong>Brand :</strong></label>
            </div>
            <div class="col-sm-6">
              <p>{{PopBrand}}</p>
            </div>
          </div>
          <div class="col-sm-4">
            <label class="col-sm-6 ml-n11p"><strong>Qty :</strong></label>
            <p class="col-sm-6">{{PopReturnqty}}</p>
          </div>
        </div>
        <div class="row  mt-1p ml-0 width-100p">
          <div class="col-sm-6 heightAuto-200px">
            <table mat-table matSort [dataSource]="ClosedBatchDetailsSource" class="custom-table withoutbackgroung search-table table-bordered">
              <ng-container matColumnDef="BatchNo">
                <th mat-header-cell *matHeaderCellDef>Batch No</th>
                <td mat-cell *matCellDef="let element" data-toggle="tooltip">{{element.BatchNo}}</td>
              </ng-container>
              <ng-container matColumnDef="Qty">
                <th mat-header-cell *matHeaderCellDef>Qty</th>
                <td mat-cell *matCellDef="let element" data-toggle="tooltip">{{element.Qty}} </td>
              </ng-container>
              <ng-container matColumnDef="ExpiryDate">
                <th mat-header-cell *matHeaderCellDef>Qty</th>
                <td mat-cell *matCellDef="let element" data-toggle="tooltip">{{element.ExpiryDate | date:"dd-MMM-y"}} </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="ClosedBatchDetailsCoulmns;sticky:true"></tr>
              <tr mat-row *matRowDef="let row; let element;   let even = even;columns: ClosedBatchDetailsCoulmns;"></tr>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!--/* Return Serial Popup */-->
<div class="modal" role="dialog" [ngStyle]="{'display':ClosedSerialModel}">
  <div class="modal-dialog" style="width:75%">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="ClosedSerialModelClose()">&times;</button>
        <h6 class="modal-title text-center">
          <strong>Returned Serial Details</strong>
        </h6>
      </div>
      <div class="modal-body">
        <div class="row border-blue border-radius Padding-5px">
          <div class="col-sm-4">
            <div class="col-sm-6">
              <label><strong>Brand :</strong></label>
            </div>
            <div class="col-sm-6">
              <p>{{PopBrand}}</p>
            </div>
          </div>
          <div class="col-sm-4">
            <label class="col-sm-6 ml-n11p"><strong>Qty :</strong></label>
            <p class="col-sm-6">{{PopReturnqty}}</p>
          </div>
        </div>
        <div class="row mt-1p ml-0 width-100p">
          <div class="col-sm-6 heightAuto-200px">
            <table mat-table matSort [dataSource]="ClosedSerialDetailsSource" class="custom-table withoutbackgroung search-table table-bordered">
              <ng-container matColumnDef="SerialNo">
                <th mat-header-cell *matHeaderCellDef>Batch No</th>
                <td mat-cell *matCellDef="let element" data-toggle="tooltip">{{element.SerialNo}}</td>
              </ng-container>
              <ng-container matColumnDef="ExpiryDate">
                <th mat-header-cell *matHeaderCellDef>Qty</th>
                <td mat-cell *matCellDef="let element" data-toggle="tooltip">{{element.ExpiryDate | date:"dd-MMM-y"}} </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="ClosedSerialDetailsCoulmns;sticky:true"></tr>
              <tr mat-row *matRowDef="let row; let element;   let even = even;columns: ClosedSerialDetailsCoulmns;"></tr>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
