
<form #RegistrationMasterForm="ngForm">

  <div class="row">
    <div class="col-sm-2">
      <button class="btn btn-primary-default" (click)="triggerSnapshot();" data-toggle="tooltip" data-placement="top" title="Take Photo"><i class="fas fa-camera"></i> Capture Photo</button>

    </div>
    <div class="col-sm-4">
      <div class="row" style="height:133px">        
        <div class="col-sm-8" *ngIf="hidewebcamtrue">
          <div>
            <webcam [width]="100" [height]="85" [trigger]="triggerObservable"
                    (imageCapture)="handleImage($event)" *ngIf="showWebcam"></webcam>

          </div>
        </div>
        <div class="col-sm-2" *ngIf="webcamImageHidetrue">
          <div class="snapshot" *ngIf="webcamImage">
            <img #patientImage style="height: 80px;border-radius: 12px" [src]="webcamImage.imageAsDataUrl" />
          </div>
          <div class="row" style="margin-left: 15%;margin-top: 15%;">
            <button class="btn btn-primary-default" (click)="Clearimage();" data-toggle="tooltip" data-placement="top" title="Delete Photo">Remove</button>
          </div>
        </div>
        <div class="col-sm-2" *ngIf="hiddenimageurl">
          <img [src]="transform()" style="width:135px;border-radius:8px;border:2px solid gray">
        </div>
      </div>
    </div>
    <div class="col-sm-4"></div>
  </div>



  <div class="col-sm-12 border-blue border-radius ">

    <div class="col-sm-12">


      <div class="col-sm-12 mph-0 pt10">
        <div class="col-sm-12 mph-0">
          <div class="row">
            <div class="col-sm-12 mph-0">
              <div class="col-sm-3">
                <mat-form-field appearance="outline">
                  <mat-label>Registration Date</mat-label>
                  <input required [(ngModel)]="M_DatePicker" name="M_DatePicker" [min]="MinDateD" [max]="MaxDateD" matInput [matDatepicker]="DatePickerD" placeholder="Date">
                  <mat-datepicker-toggle matSuffix [for]="DatePickerD"></mat-datepicker-toggle>
                  <mat-datepicker #DatePickerD></mat-datepicker>
                </mat-form-field>
              </div>

              <div class="col-sm-3">
                <mat-form-field appearance="outline">
                  <mat-label>Registration Type</mat-label>
                  <mat-select autocomplete="off" required [(ngModel)]="M_RegistrationType" name="RegistrationType" placeholder="">
                    <mat-option>--Select--</mat-option>
                    <mat-option value="Normal">Normal</mat-option>
                    <mat-option value="CampRegistration">CampRegistration</mat-option>
                  </mat-select>
                </mat-form-field>
              </div>
              <div class="col-sm-3" *ngIf="M_CampName != null">
                <mat-form-field appearance="outline">
                  <mat-label>Camp Name</mat-label>
                  <input autocomplete="off" disabled [(ngModel)]="M_CampName" name="CampName" matInput>
                </mat-form-field>
              </div>
              <div class="col-sm-3" [hidden]="!IshiddenUIN">
                <mat-form-field appearance="outline">
                  <mat-label>UIN NO </mat-label>
                  <input [(ngModel)]="M_RegNO" name="RegNO" matInput placeholder="" [disabled]="Dname">
                </mat-form-field>
              </div>
              <!--<div class="col-sm-2" *ngIf="hiddenimageurl">
                <img [src]="transformThumb()" style="height:30%;width:30%;border-radius:8px;border:2px solid gray">

              </div>
              <div class="col-sm-2" *ngIf="hidewebcamtrue">
                <button class="btn btn-primary-default" (click)="triggerSnapshot();" data-toggle="tooltip" data-placement="top" title="Take Photo"><i class="fas fa-camera"></i> Take Photo</button>
                <div style="margin-top:-15px;margin-left: 30px;margin-right: 0px">
                  <webcam [width]="100" [height]="100" [trigger]="triggerObservable"
                          (imageCapture)="handleImage($event)" *ngIf="showWebcam"></webcam>
                  <div class="snapshot" *ngIf="webcamImage">
                    <img #patientImage style="height: 80px;border-radius: 12px" [src]="webcamImage.imageAsDataUrl" />
                  </div>
                </div>
              </div>
              <div class="col-sm-2" *ngIf="hiddenimageurl">
                <img [src]="transform()" style="height:30%;width:30%;border-radius:8px;border:2px solid gray">
              </div>-->
              <div class="col-sm-3 content-right pull-right">
                <button type="button" class="btn-text" (click)="GetformaccessV()"><i class="fas fa-eye"></i> View Access</button>
                <button *ngIf="M_RegistrationType=='Normal'" type="button" [disabled]="disableClicksch" (click)="Clicksch()" class="btn-text grab f-r">
                  <i class="fas fa-info-circle"> </i> Help
                </button>
                <button *ngIf="M_RegistrationType=='CampRegistration'" type="button" [disabled]="disableClicksch" (click)="HelpCamp()" class="btn-text grab f-r">
                  <i class="fas fa-info-circle"> </i> Help
                </button>

              </div>
            </div>
            <div class="col-sm-12">
              <div class="clearfix ">
                <mat-panel-title class="text-title d-inblock">
                  Personal Details
                </mat-panel-title>


              </div>
              <div class="col-sm-12 pl-0 pr-0">
                <div class="row">
                  <div class="col-sm-3">
                    <input #UIN [(ngModel)]="M_RegNO" name="RegNO" matInput placeholder="" [hidden]="!Ishiddeenn">
                    <mat-form-field appearance="outline">
                      <mat-label>First Name</mat-label>
                      <input autocomplete="off" required [(ngModel)]="M_Name" name="Name" [disabled]="DisabledREV"
                             maxlength="100" (keypress)="nameField($event)" (keyup)="NameEvent()" matInput placeholder="">
                    </mat-form-field>


                  </div>

                  <div class="col-sm-3">
                    <mat-form-field appearance="outline">
                      <mat-label>Middle Name</mat-label>
                      <input autocomplete="off" [(ngModel)]="M_MiddleName" name="MiddleName" [disabled]="DisabledREV"
                             maxlength="50" (keypress)="nameField($event)" (keyup)="NameEvent()" matInput placeholder="">
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field appearance="outline">
                      <mat-label>Last Name</mat-label>
                      <input autocomplete="off" required [(ngModel)]="M_LastName" name="LastName" [disabled]="DisabledREV"
                             maxlength="50" (keypress)="nameField($event)" (keyup)="NameEvent()" matInput placeholder="">
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field appearance="outline">
                      <mat-label>Gender</mat-label>
                      <mat-select autocomplete="off" required [(ngModel)]="M_Gender" name="Gender" [disabled]="DisabledREV">
                        <mat-option>--Select--</mat-option>
                        <mat-option value="Male">Male</mat-option>
                        <mat-option value="Female">Female</mat-option>
                        <mat-option value="Transgender">Transgender</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                </div>

                <div class="row">
                  <div class="col-sm-3">
                    <mat-form-field appearance="outline">
                      <mat-label>First Name</mat-label>
                      <strong>
                        <input autocomplete="off" [(ngModel)]="M_Name1" name="Name1" maxlength="100" disabled
                               (keypress)="nameField($event)" required matInput placeholder="">
                      </strong>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field appearance="outline">
                      <mat-label>Middle Name</mat-label>
                      <strong>
                        <input autocomplete="off" [(ngModel)]="M_MiddleName1" maxlength="50" name="MiddleName1" disabled
                               (keypress)="nameField($event)" matInput placeholder="">
                      </strong>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3">
                    <mat-form-field appearance="outline">
                      <mat-label>Last Name</mat-label>
                      <strong>
                        <input autocomplete="off" [(ngModel)]="M_LastName1" maxlength="50" name="LastName1" disabled
                               (keypress)="nameField($event)" matInput placeholder="">
                      </strong>
                    </mat-form-field>
                  </div>


                  <div class="col-sm-3">
                    <mat-form-field appearance="outline">
                      <mat-label>Language Preference</mat-label>
                      <mat-select autocomplete="off" [(ngModel)]="M_LanguagePreference" name="LanguagePreference"
                                  [disabled]="DisabledREV"
                                  (ngModelChange)="LanguageChange(M_Name,M_MiddleName,M_LastName,M_LanguagePreference)">
                        <mat-option>--Select--</mat-option>
                        <mat-option value="Tamil">Tamil</mat-option>
                        <mat-option value="Telugu">Telugu</mat-option>
                        <mat-option value="English">English</mat-option>
                        <mat-option value="Hindi">Hindi</mat-option>
                        <mat-option value="Kannada">Kannada</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>

                </div>

                <div class="row">

                  <div class="col-sm-3">
                    <mat-form-field appearance="outline">
                      <mat-label>Date Of Birth</mat-label>
                      <input [(ngModel)]="M_DatePicker1" name="DatePicker1" [disabled]="DisabledREV" required
                             (dateChange)="Calculatedbo();CheckDOBDate()" [min]="minDate"
                             [max]="maxDate1" matInput [matDatepicker]="picker1" placeholder="Date Of Birth">
                      <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                      <mat-datepicker #picker1></mat-datepicker>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3" *ngIf="hiddenAge">
                    <mat-form-field class="w-50" appearance="outline">
                      <mat-label>Age</mat-label>
                      <input autocomplete="off" (keypress)="karthick($event)" id="txthour" [(ngModel)]="M_Age" name="Age"
                             [disabled]="DisabledREV" (input)="CalculateAge('age', $event.target.value,M_MMDD)" matInput
                             placeholder="">
                    </mat-form-field>
                    <mat-form-field class="w-50 f-r" appearance="outline">
                      <mat-label>MM/DD</mat-label>
                      <mat-select autocomplete="off" [(ngModel)]="M_MMDD" name="MM/DD" [disabled]="DisableMMDD" (ngModelChange)="YMD()">
                        <mat-option>--Select--</mat-option>
                        <mat-option value="Months">Months</mat-option>
                        <mat-option value="Days">Days</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-sm-3">
                    <mat-form-field appearance="outline">
                      <mat-label>Phone</mat-label>
                      <input required [(ngModel)]="M_TelNo" [disabled]="DisabledREV" maxlength="15"
                             autocomplete="off" (keypress)="numberOnly($event)" name="TelNo" matInput placeholder="">
                    </mat-form-field>
                  </div>
                  <div class="col-sm-3">
                    <mat-form-field appearance="outline">
                      <mat-label>Address</mat-label>
                      <textarea autocomplete="off" required [(ngModel)]="M_Address1" name="Address1" [disabled]="DisabledREV"
                                placeholder="Address" matInput #message1
                                maxlength="100"></textarea>
                      <mat-hint class="mt5 mb5" align="start">Max 100 characters </mat-hint>
                      <mat-hint class="mt5 mb5" align="end"><span>{{message1.value.length}} /100</span></mat-hint>
                    </mat-form-field>
                  </div>

                  <div class="col-sm-3" *ngIf="Ishiddennn">
                    <mat-form-field appearance="outline">
                      <mat-label>Base location</mat-label>
                      <input autocomplete="off" [(ngModel)]="M_Baselocation" name="Baselocation" matInput placeholder="" disabled>
                    </mat-form-field>
                  </div>
                </div>


                <div class="row">
                  <div class="col-sm-4">

                    <mat-panel-title class="text-title pb10">
                      Ocular Prosthesis
                    </mat-panel-title>

                    <div class="col-sm-12">
                      <div class="col-sm-4">
                        <mat-checkbox [(checked)]="Artificialeye"
                                      (change)="SelectArtificialeye($event.checked)">
                          Artificial eye
                        </mat-checkbox>
                      </div>
                      <div class="col-sm-8">
                        <mat-radio-group [(ngModel)]="M_Ocularprosthesis" name="Ocularprosthesis"
                                         [disabled]="DisabledOcularprosthesis" aria-label="Select an option">
                          <div class="col-sm-4">
                            <mat-radio-button value="OD">OD</mat-radio-button>
                          </div>
                          <div class="col-sm-4">
                            <mat-radio-button value="OS">OS</mat-radio-button>
                          </div>
                        </mat-radio-group>
                      </div>
                    </div>

                  </div>
                </div>



              </div>
            </div>

            <!-- tab section for Details option -->
            <!-- tab section for Details option -->
            <div class="col-sm-12 pt25">
              <div class="dtails-wrap">
                <ul class="nav nav-tabs">
                  <li>
                    <a class="active show" data-toggle="tab" href="#general" animationDuration="1s">
                      <span><i class="fas fa-user"></i></span>
                      General
                    </a>
                  </li>
                  <li>
                    <a data-toggle="tab" href="#communicationdetails" animationDuration="2ms" (click)="communicationdetails()">
                      <span><i class="far fa-envelope"></i></span>
                      Communication Details
                    </a>
                  </li>
                  <li>
                    <a data-toggle="tab" href="#idebtificationDetails" (click)="IdentificationDetails()">
                      <span><i class="fas fa-map-marker-alt"></i></span>
                      Identification Details
                    </a>
                  </li>
                  <li>
                    <a data-toggle="tab" href="#kinDetails" (click)="kinDetails()">
                      <span><i class="fas fa-users"></i></span>
                      Kin Details
                    </a>
                  </li>
                </ul>

                <div class="tab-content tab-wrap">
                  <div id="general" class="tab-pane fade in active">
                    <div class="col-sm-12 pl-0 pr-0">
                      <div class="bg-wrap mb5">

                        <div class="col-sm-12">

                          <div class="col-sm-3">

                            <div class="row">
                              <h5 class="card-header bg-success text-white">
                                Registration Fee
                              </h5>

                              <div class="col-sm-12 mt10">
                                <mat-form-field appearance="outline">
                                  <mat-label>Registration Fee</mat-label>
                                  <strong>
                                    <input type="number" min="0" maxlength="9" (keypress)="numberOnly($event)"
                                           (keyup)="keyupConsultation()" [required]="ReqConsultation"
                                           [(ngModel)]="M_Consultation" name="Consultation" matInput placeholder="Registration Fee">
                                  </strong>
                                </mat-form-field>
                              </div>
                            </div>
                            <div class="row">
                              <h5 class="card-header bg-success text-white">
                                pay through
                              </h5>

                              <div class="col-sm-12 mt10">
                                <mat-radio-group [(ngModel)]="M_Insurancetype" (change)="Insurancetype($event)" name="M_Insurancetype"
                                                 aria-label="Select an option">
                                  <div class="col-sm-6">
                                    <mat-radio-button value="1">Insurance</mat-radio-button>
                                  </div>
                                  <div class="col-sm-6">
                                    <mat-radio-button value="0">Private</mat-radio-button>
                                  </div>
                                </mat-radio-group>
                              </div>
                            </div>



                          </div>

                          <div class="col-sm-9">
                            <div class="col-sm-12" *ngIf="hidegridpayment">
                              <div class="card mb-3">
                                <h5 class="card-header bg-success text-white">
                                  Payment details
                                  <button (click)="AddPaymentDetailsNewgrid();" class="btnuserdefined btn-dark"><i matTooltip="Add Payment Details" class="fa fa-plus"></i></button>
                                </h5>

                                <div class="card-body">
                                  <div class="row">
                                    <table mat-table [dataSource]="dataSourcepay" class="custom-table withoutbackgroung search-table table-bordered">

                                      <ng-container matColumnDef="PaymentMode">
                                        <th mat-header-cell *matHeaderCellDef>Payment Mode</th>
                                        <td mat-cell *matCellDef="let element;let id = index;" class="width-15p">
                                          <mat-form-field appearance="outline">
                                            <mat-select (selectionChange)="PaymentChange(id,$event,element)">
                                              <mat-option *ngFor="let Paymentsmode of Paymentsmode" [value]="Paymentsmode.Value">
                                                {{Paymentsmode.Text}}
                                              </mat-option>
                                            </mat-select>
                                          </mat-form-field>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef> </td>
                                      </ng-container>
                                      <ng-container matColumnDef="BankName">
                                        <th mat-header-cell *matHeaderCellDef>Bank Name</th>
                                        <td mat-cell *matCellDef="let element" contenteditable="false">
                                          <mat-form-field appearance="outline">
                                            <input (blur)="BankName($event,element)" (keypress)="nameField($event)" [disabled]="element.PaymentMode =='Cash'  " maxlength="100" matInput placeholder="Enter BankName" name="BankName" type="text">
                                          </mat-form-field>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef> </td>
                                      </ng-container>
                                      <ng-container matColumnDef="InstrumentNumber">
                                        <th mat-header-cell *matHeaderCellDef>Instrument Number</th>
                                        <td mat-cell *matCellDef="let element" contenteditable="false">
                                          <mat-form-field appearance="outline">
                                            <input (blur)="InstrumentNumber($event,element)" [disabled]="element.PaymentMode =='Cash'" maxlength="15" (keypress)="numberOnly($event)" matInput placeholder="Enter Instrument Number" name="InstrumentNumber" type="text">
                                          </mat-form-field>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef> </td>
                                      </ng-container>
                                      <ng-container matColumnDef="InstrumentDate">
                                        <th mat-header-cell *matHeaderCellDef>Instrument Date</th>
                                        <td mat-cell *matCellDef="let element" contenteditable="false">
                                          <mat-form-field appearance="outline">
                                            <input [disabled]="element.PaymentMode =='Cash'|| element.PaymentMode =='Credit Card'|| element.PaymentMode =='Debit card'"
                                                   type="datetime" name="InstrumentDate" autocomplete="off" [max]="maxInstrumentDate" matInput [matDatepicker]="InstrumentDate" (keypress)="numberOnly($event)" (dateChange)="dateofinstrument($event,element)" placeholder="InstrumentDate">
                                            <mat-datepicker-toggle matSuffix [for]="InstrumentDate"></mat-datepicker-toggle>
                                            <mat-datepicker #InstrumentDate></mat-datepicker>
                                          </mat-form-field>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef> </td>
                                      </ng-container>
                                      <ng-container matColumnDef="ExpiryDate">
                                        <th mat-header-cell *matHeaderCellDef>Expiry Date</th>
                                        <td mat-cell *matCellDef="let element" contenteditable="false">
                                          <mat-form-field appearance="outline">
                                            <input (dateChange)="dateexpiry($event,element)" [disabled]="element.PaymentMode =='Cash'|| element.PaymentMode =='Demand Draft'|| element.PaymentMode =='Cheque' " autocomplete="off" [min]="MINExpiryDate"
                                                   name="ExpiryDate" matInput [matDatepicker]="ExpiryDate" placeholder="ExpiryDate" type="datetime" (keypress)="numberOnly($event)">
                                            <mat-datepicker-toggle matSuffix [for]="ExpiryDate"></mat-datepicker-toggle>
                                            <mat-datepicker #ExpiryDate></mat-datepicker>
                                          </mat-form-field>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef> </td>
                                      </ng-container>
                                      <ng-container matColumnDef="Branch">
                                        <th mat-header-cell *matHeaderCellDef>Branch</th>
                                        <td mat-cell *matCellDef="let element" contenteditable="false">
                                          <mat-form-field appearance="outline">
                                            <input (blur)="Branch($event,element)"
                                                   [disabled]="element.PaymentMode =='Cash' || element.PaymentMode =='Debit card' || element.PaymentMode =='Credit Card'"
                                                   (keypress)="nameField($event)" maxlength="50" matInput name="Branch" placeholder="Branch" type="text">
                                          </mat-form-field>

                                        </td>
                                        <td mat-footer-cell *matFooterCellDef>Total</td>
                                      </ng-container>
                                      <ng-container matColumnDef="Amount">
                                        <th mat-header-cell *matHeaderCellDef>Amount</th>
                                        <td mat-cell *matCellDef="let element;let id = index" required (keyup)="Amount(id,'Amount',$event,element)" (keypress)="numberOnly($event)" [contentEditable]="disableRow">
                                          {{element.Amount| number : '1.2-2'}}

                                        </td>
                                        <td mat-footer-cell *matFooterCellDef>
                                          <strong>
                                            {{PTotalAmount1() |currency:Country2}}
                                          </strong>
                                        </td>
                                      </ng-container>
                                      <ng-container matColumnDef="Action">
                                        <th mat-header-cell *matHeaderCellDef>Action</th>
                                        <td mat-cell *matCellDef="let element;let id = index" contenteditable="false">
                                          <i class="fas fa-trash-alt icon-delete grab" title="Delete" (click)="removePaytype(i)"></i>
                                        </td>
                                        <td mat-footer-cell *matFooterCellDef></td>
                                      </ng-container>
                                      <tr mat-header-row *matHeaderRowDef="displayedColumnspay;sticky: true"></tr>
                                      <tr mat-row *matRowDef="let element;  let even = even; columns: displayedColumnspay"></tr>
                                      <tr mat-footer-row *matFooterRowDef="displayedColumnspay;"></tr>
                                    </table>
                                  </div>
                                </div>
                              </div>
                            </div>


                            <div class="col-sm-12" *ngIf="!hidegridpayment">
                              <div class="card mb-3">
                                <h5 class="card-header bg-success text-white">
                                  Insurance details
                                  <button type="button" (click)="AddInsuranceDetailsNewgrid();" class="btnuserdefined btn-dark"><i matTooltip="Add Insurance Details" class="fa fa-plus"></i></button>
                                </h5>

                                <div class="card-body">
                                  <div class="row">
                                    <table mat-table [dataSource]="dataSourcePatientVSIns" class="custom-table withoutbackgroung search-table table-bordered">

                                      <ng-container matColumnDef="PolicyName">
                                        <th mat-header-cell *matHeaderCellDef> Policy Name </th>
                                        <td mat-cell *matCellDef="let element"> {{element.PolicyName}} </td>
                                      </ng-container>
                                      <ng-container matColumnDef="PolicyNo">
                                        <th mat-header-cell *matHeaderCellDef> Policy No </th>
                                        <td mat-cell *matCellDef="let element"> {{element.PolicyNo}} </td>
                                      </ng-container>
                                      <ng-container matColumnDef="PolicyTakenOn">
                                        <th mat-header-cell *matHeaderCellDef> Policy TakenOn </th>
                                        <td mat-cell *matCellDef="let element"> {{element.PolicyTakenOn| date:"dd-MMM-y"}} </td>
                                      </ng-container>
                                      <ng-container matColumnDef="PeriodFrom">
                                        <th mat-header-cell *matHeaderCellDef> Period From </th>
                                        <td mat-cell *matCellDef="let element"> {{element.PeriodFrom| date:"dd-MMM-y"}} </td>
                                      </ng-container>
                                      <ng-container matColumnDef="PeriodTo">
                                        <th mat-header-cell *matHeaderCellDef> Period To </th>
                                        <td mat-cell *matCellDef="let element"> {{element.PeriodTo| date:"dd-MMM-y"}} </td>
                                      </ng-container>
                                      <ng-container matColumnDef="SumAssured">
                                        <th mat-header-cell *matHeaderCellDef> Sum Assured </th>
                                        <td mat-cell *matCellDef="let element"> {{element.SumAssured|currency:Country2}} </td>
                                      </ng-container>
                                      <ng-container matColumnDef="Remarks">
                                        <th mat-header-cell *matHeaderCellDef> Remarks </th>
                                        <td mat-cell *matCellDef="let element"> {{element.Remarks}} </td>
                                      </ng-container>
                                      <ng-container matColumnDef="Action">
                                        <th mat-header-cell *matHeaderCellDef>Action</th>
                                        <td mat-cell *matCellDef="let element;let id = index">
                                          <i class="fas fa-trash-alt icon-delete" title="Delete" (click)="removePatVsIn(i)"></i>
                                        </td>
                                      </ng-container>
                                      <tr mat-header-row *matHeaderRowDef="displayedColumnPatientVSIns;sticky:false"></tr>
                                      <tr mat-row *matRowDef="let row;  let i = index;columns: displayedColumnPatientVSIns;"></tr>



                                    </table>
                                  </div>
                                </div>
                              </div>
                            </div>



                          </div>

                        </div>





                      </div>
                    </div>


                  </div>

                  <div id="communicationdetails" class="tab-pane fade">
                    <div class="row">

                      <div class="col-sm-3">
                        <mat-form-field appearance="outline" class="mb10">
                          <mat-label>Address2</mat-label>
                          <textarea autocomplete="off" [(ngModel)]="M_Address2" name="Address2" [disabled]="DisabledREV"
                                    placeholder="Address" matInput #message2 maxlength="100"></textarea>
                          <mat-hint class="mt5 mb5" align="start">Max 100 characters </mat-hint>
                          <mat-hint class="mt5 mb5" align="end">{{message2.value.length}} /100</mat-hint>
                        </mat-form-field>
                      </div>
                      <div class="col-sm-3">
                        <mat-form-field appearance="outline" class="mb10">
                          <mat-label>Address3</mat-label>
                          <textarea autocomplete="off" [(ngModel)]="M_Address3" name="Address3" [disabled]="DisabledREV"
                                    placeholder="Address" matInput #message3 maxlength="100"></textarea>
                          <mat-hint class="mt5 mb5" align="start">Max 100 characters </mat-hint>
                          <mat-hint class="mt5 mb5" align="end">{{message3.value.length}} /100</mat-hint>
                        </mat-form-field>
                      </div>
                      <div class="col-sm-3">
                        <mat-form-field appearance="outline">
                          <mat-label>City</mat-label>
                          <mat-select autocomplete="off" [(ngModel)]="Cityy" name="Cityy" [disabled]="DisabledREV"
                                      (ngModelChange)="Citysumbit()">
                            <mat-option>None</mat-option>
                            <mat-option *ngFor="let City of Cityname" [value]="City.Value">
                              {{City.Text}}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                      <div class="col-sm-3">
                        <mat-form-field appearance="outline">
                          <mat-label>Location</mat-label>
                          <mat-select autocomplete="off" [(ngModel)]="M_location" name="Locations" [disabled]="disableLOC"
                                      (ngModelChange)="locationsumbit()">
                            <mat-option>None</mat-option>
                            <mat-option *ngFor="let Location of Locationname" [value]="Location.Value">
                              {{Location.Text}}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                    </div>

                    <div class="row">


                      <div class="col-sm-3">
                        <mat-form-field appearance="outline">
                          <mat-label>State/Country</mat-label>
                          <strong>
                            <input autocomplete="off" [(ngModel)]="State" name="State" matInput placeholder="State Name" disabled>
                          </strong>
                        </mat-form-field>
                      </div>



                      <div class="col-sm-3">
                        <mat-form-field appearance="outline">
                          <mat-label>Pin Code</mat-label>
                          <strong>
                            <input autocomplete="off" [(ngModel)]="PinCode" name="PinCode" matInput placeholder="PinCode" disabled>
                          </strong>
                        </mat-form-field>
                      </div>
                      <div class="col-sm-3">
                        <mat-form-field appearance="outline">
                          <mat-label>Marital Status</mat-label>
                          <mat-select autocomplete="off" [(ngModel)]="M_MaritalStatus" name="MaritalStatus" [disabled]="DisabledREV"
                                      (ngModelChange)="MaritalStatusEvent()">
                            <mat-option>--Select--</mat-option>
                            <mat-option *ngFor="let MS of DropMaritalStatus" [value]="MS">{{MS.Text}}</mat-option>
                          </mat-select>
                        </mat-form-field>
                      </div>
                    </div>
                  </div>

                  <div id="idebtificationDetails" class="tab-pane fade">
                    <div class="col-sm-12">
                      <div class="row">
                        <div class="col-sm-3">
                          <mat-form-field appearance="outline">
                            <mat-label>Occupation</mat-label>
                            <input autocomplete="off" [(ngModel)]="M_Occupation" maxlength="100" name="Occupation" [disabled]="DisabledREV"
                                   matInput placeholder="">
                          </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                          <mat-form-field appearance="outline">
                            <mat-label>Email1</mat-label>
                            <input [(ngModel)]="M_Email" name="Email" [disabled]="DisabledREV" matInput placeholder=""
                                   maxlength="100" [formControl]="emailFormControl">
                            <mat-error *ngIf="emailFormControl.hasError('email') && !emailFormControl.hasError('required')">
                              Please enter a valid email address
                            </mat-error>
                            <mat-error *ngIf="emailFormControl.hasError('required')">
                              Email is <strong>required</strong>
                            </mat-error>
                          </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                          <mat-form-field appearance="outline">
                            <mat-label>Phone2</mat-label>
                            <input [(ngModel)]="M_Phone2" (keypress)="numberOnly($event)" [disabled]="DisabledREV"
                                   maxlength="15" name="Phone2" matInput placeholder="">
                          </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                          <mat-form-field appearance="outline">
                            <mat-label>Email2</mat-label>
                            <input [(ngModel)]="M_Email2" name="Email2" [disabled]="DisabledREV" matInput
                                   maxlength="50" placeholder="" [formControl]="emailFormControl1">
                            <mat-error *ngIf="emailFormControl1.hasError('email') && !emailFormControl1.hasError('required')">
                              Please enter a valid email address
                            </mat-error>
                            <mat-error *ngIf="emailFormControl1.hasError('required')">
                              Email is <strong>required</strong>
                            </mat-error>
                          </mat-form-field>
                        </div>
                      </div>


                    </div>

                    <div class="col-sm-12">
                      <div class="row">
                        <div class="col-sm-3">
                          <mat-form-field appearance="outline">
                            <mat-label>Aadhar Number</mat-label>
                            <input [(ngModel)]="M_AadharNumber" [disabled]="DisabledREV" maxlength="12" minlength="12"
                                   (keypress)="numberOnly($event)" name="AadharNumber" matInput placeholder="">
                          </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                          <mat-form-field appearance="outline">
                            <mat-label>Pan Card Number</mat-label>
                            <input [(ngModel)]="M_PanCardNumber" [disabled]="DisabledREV" maxlength="25"
                                   name="PanCardNumber" matInput placeholder="">
                          </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                          <mat-form-field appearance="outline">
                            <mat-label>Driving Licence Number</mat-label>
                            <input [(ngModel)]="M_DrivingLicenceNumber" [disabled]="DisabledREV" maxlength="50"
                                   (keypress)="numberOnly($event)" name="DrivingLicenceNumber" matInput placeholder="">
                          </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                          <mat-form-field appearance="outline">
                            <mat-label>Is Foreign National</mat-label>
                            <mat-select [(ngModel)]="M_IsForeignNational" name="IsForeignNational"
                                        [disabled]="DisabledREV" (ngModelChange)="IsForeignNational();ConsultationFee()">
                              <mat-option value="1">YES</mat-option>
                              <mat-option value="2">NO</mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-sm-3">
                          <mat-form-field appearance="outline">
                            <mat-label>Passport Number</mat-label>
                            <input [required]="passportRequired" [(ngModel)]="M_PassportNumber"
                                   [disabled]="DisabledREV" maxlength="50" name="PassportNumber" matInput placeholder="">
                          </mat-form-field>
                        </div>


                        <div class="col-sm-3">
                          <mat-form-field appearance="outline">
                            <mat-label>Source of Referral</mat-label>
                            <mat-select [(ngModel)]="M_SOR" name="SourceOfRef" [disabled]="DisabledREV"
                                        (ngModelChange)="SourceOfReferral()">
                              <mat-option>--Select--</mat-option>
                              <mat-option *ngFor="let Engage of SourceOfRef" [value]="Engage">
                                {{Engage.Text}}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>
                        <div *ngIf="DoctorClinic" class="col-sm-3">
                          <mat-form-field appearance="outline">
                            <mat-label>Doctor/Clinic Name</mat-label>
                            <input [(ngModel)]="M_DoctorClinic" maxlength="50" name="DoctorClinic"
                                   [disabled]="DisabledREV" matInput placeholder="">
                          </mat-form-field>
                        </div>


                      </div>
                    </div>
                  </div>

                  <div id="kinDetails" class="tab-pane fade">

                    <div class="col-sm-12">
                      <div class="row">
                        <div class="col-sm-3">
                          <mat-form-field appearance="outline">
                            <mat-label>Relation</mat-label>
                            <mat-select autocomplete="off" [(ngModel)]="M_Relation" name="Relation" [disabled]="DisabledREV">
                              <mat-option>--Select--</mat-option>
                              <mat-option *ngFor="let Relation of Relation" [value]="Relation.Value">
                                {{Relation.Text}}
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                          <input #UIN [(ngModel)]="M_RegNO" name="RegNO" matInput placeholder=""
                                 [hidden]="!Ishiddeenn">
                          <mat-form-field appearance="outline">
                            <mat-label>First Name</mat-label>
                            <input autocomplete="off" [(ngModel)]="M_FirstNameKin" name="FirstNameKin" [disabled]="DisabledREV"
                                   maxlength="100" (keypress)="nameField($event)" matInput placeholder="">
                          </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                          <mat-form-field appearance="outline">
                            <mat-label>Middle Name</mat-label>
                            <input autocomplete="off" [(ngModel)]="M_MiddleNameKin" name="MiddleNameKin" [disabled]="DisabledREV"
                                   maxlength="100" (keypress)="nameField($event)" matInput placeholder="">
                          </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                          <mat-form-field appearance="outline">
                            <mat-label>Last Name</mat-label>
                            <input autocomplete="off" [(ngModel)]="M_LastNameKin" name="LastNameKin" [disabled]="DisabledREV"
                                   maxlength="100" (keypress)="nameField($event)" matInput placeholder="">
                          </mat-form-field>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-sm-3">
                          <mat-form-field appearance="outline">
                            <mat-label>Email</mat-label>
                            <input autocomplete="off" [(ngModel)]="M_Email3" name="Email3" [disabled]="DisabledREV" matInput
                                   maxlength="100" placeholder="" [formControl]="emailFormControl3">
                            <mat-error *ngIf="emailFormControl3.hasError('email') && !emailFormControl3.hasError('required')">
                              Please enter a valid email address
                            </mat-error>
                            <mat-error *ngIf="emailFormControl3.hasError('required')">
                              Email is <strong>required</strong>
                            </mat-error>
                          </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                          <mat-form-field appearance="outline">
                            <mat-label>Phone</mat-label>
                            <input autocomplete="off" [(ngModel)]="M_PhoneKin" [disabled]="DisabledREV" maxlength="15" minlength="10"
                                   (keypress)="numberOnly($event)" name="PhoneKin" matInput placeholder="">
                          </mat-form-field>
                        </div>
                        <div class="col-sm-3">
                          <button (click)="Addkin()" class="mt5 grab btn btn-primary">Add</button>
                        </div>
                      </div>
                    </div>

                    <div class="col-sm-12">
                      <table mat-table matSort [dataSource]="dataSourceKin" class="custom-table table">
                        <ng-container matColumnDef="KinConsentchecked">
                          <th mat-header-cell *matHeaderCellDef>
                            KinConsent
                          </th>
                          <td *matCellDef="let element;let id = index">
                            <mat-radio-button (click)="SelectKinConsent(element)"
                                              [(checked)]="element.PrimaryKinId"></mat-radio-button>
                          </td>

                        </ng-container>


                        <ng-container matColumnDef="Relationship">
                          <th mat-header-cell *matHeaderCellDef>
                            Relation
                          </th>
                          <td mat-cell *matCellDef="let element"> {{element.Relationship}}</td>
                        </ng-container>

                        <ng-container matColumnDef="FirstNameKin">
                          <th mat-header-cell *matHeaderCellDef>
                            First Name
                          </th>
                          <td mat-cell *matCellDef="let element"> {{element.FirstName}}</td>
                        </ng-container>

                        <ng-container matColumnDef="MiddleNameKin">
                          <th mat-header-cell *matHeaderCellDef>
                            Middle Name
                          </th>
                          <td mat-cell *matCellDef="let element">{{element.MiddleName}} </td>
                        </ng-container>


                        <ng-container matColumnDef="LastNameKin">
                          <th mat-header-cell *matHeaderCellDef>
                            Last Name
                          </th>
                          <td mat-cell *matCellDef="let element">{{element.LastName}} </td>
                        </ng-container>

                        <ng-container matColumnDef="PhoneKin">
                          <th mat-header-cell *matHeaderCellDef>
                            Phone
                          </th>
                          <td mat-cell *matCellDef="let element">{{element.ContactNumber}} </td>
                        </ng-container>

                        <ng-container matColumnDef="EmailKin">
                          <th mat-header-cell *matHeaderCellDef>
                            Email
                          </th>
                          <td mat-cell *matCellDef="let element">{{element.EmailID}} </td>
                        </ng-container>

                        <ng-container matColumnDef="Delete">
                          <th mat-header-cell *matHeaderCellDef>
                            Action
                          </th>
                          <td mat-cell *matCellDef="let element; let i = index;">
                            <i class="fas fa-trash-alt icon-delete" title="Delete" (click)="DeleteKIN(element,i)"></i>
                          </td>
                          <td mat-footer-cell *matFooterCellDef> </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumnsKin;sticky: true"></tr>
                        <tr mat-row *matRowDef="let element;  let even = even; columns: displayedColumnsKin"
                            [ngClass]="{gray: even}"></tr>
                      </table>
                    </div>

                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
      </div>



    </div>

    <!--////////////////////////////////////////Review Details//////////////////////////////////////////////////////-->



    <div class="col-sm-12 review-top" *ngIf="Ishiddennn">
      <div class="row">
        <div class="col-sm-12 pt20 p120 text-right">
          <button class="btn btn-primary mlr10" (click)="AddREV()" mat-raised-button>Add Review Details</button>
          <button class="btn btn-primary" (click)="VIEWREV()" mat-raised-button>View Review Details</button>
        </div>
      </div>
    </div>

    <div *ngIf="hiddenReview" class="col-sm-12">

      <div class="clearfix review-btom">
        <div class="col-sm-12">
          <div class="row">
            <div class="col-sm-12">
              <mat-panel-title class="text-title">
                Review Details
              </mat-panel-title>
            </div>
          </div>
        </div>
        <div class="col-sm-12 pt10">

          <div class="col-sm-12">

            <div class="col-sm-6">

              <div class="row">
                <div class="col-sm-12">
                  <div class="col-sm-6">
                    <mat-form-field appearance="outline">
                      <mat-label>Date of Visit</mat-label>
                      <input autocomplete="off" required [(ngModel)]="M_DatePicker2" name="DatePicker2" [min]="MinDateQ" [max]="MaxDateQ" matInput [matDatepicker]="picker2" placeholder="Date of Visit">
                      <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                      <mat-datepicker #picker2></mat-datepicker>
                    </mat-form-field>
                  </div>
                  <div class="col-sm-6">
                    <mat-form-field appearance="outline">
                      <mat-label>Type of Visit</mat-label>
                      <mat-select autocomplete="off" [disabled]="D_DateVisite" [(ngModel)]="M_TypeofVisit" name="TypeOfVisit">
                        <mat-option>--Select--</mat-option>
                        <mat-option *ngFor="let Engage of TypeOfVisit" [value]="Engage.Value">{{Engage.Text}}</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-sm-12">
                  <div class="col-sm-6">
                    <mat-form-field appearance="outline">
                      <mat-label>Status</mat-label>
                      <mat-select autocomplete="off" required [disabled]="D_DateVisite" [(ngModel)]="M_Status" name="Status">
                        <mat-option>--Select--</mat-option>
                        <mat-option *ngFor="let Engage of Status" [value]="Engage.Value">{{Engage.Text}}</mat-option>
                      </mat-select>
                    </mat-form-field>
                  </div>
                  <div class="col-sm-6">
                    <mat-form-field appearance="outline">
                      <mat-label>Remarks</mat-label>
                      <textarea autocomplete="off" [(ngModel)]="M_Remarks" name="Remarks" placeholder="Remarks" matInput
                                #message4 maxlength="250"></textarea>
                    </mat-form-field>
                  </div>
                </div>

              </div>


            </div>

            <div class="col-sm-6">

              <h5 class="card-header bg-success text-white">
                Visit details
              </h5>
              <table class="custom-table withoutbackgroung search-table table-bordered">
                <thead>
                  <tr>
                    <th>Visit Date</th>
                    <th>Amount</th>
                    <th>complaint</th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let X of RegRevisitdetail; index as i">
                    <td>{{X.DateofVisit| date:"dd-MMM-y HH:mm"}}</td>
                    <td>{{X.Amount}}</td>
                    <td>{{X.Remarks}}</td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>
        </div>
      </div>



      <div [hidden]="!Ishidddden" id="contentToConvert">

        <table mat-table [dataSource]="dataSourcee" class="custom-table table">
          <ng-container matColumnDef="UIN">
            <th mat-header-cell *matHeaderCellDef>
              UIN
            </th>
            <td mat-cell *matCellDef="let pd">
              {{pd.UIN}}
            </td>
          </ng-container>
          <ng-container matColumnDef="DateofVisit">
            <th mat-header-cell *matHeaderCellDef>
              DateofVisit
            </th>
            <td mat-cell *matCellDef="let pd ">
              {{pd.DateofVisit| date: 'medium'}}
            </td>
          </ng-container>

          <ng-container matColumnDef="TypeofVisit">
            <th mat-header-cell *matHeaderCellDef>
              TypeofVisit
            </th>
            <td mat-cell *matCellDef="let pd ">
              {{pd.TypeofVisit}}
            </td>
          </ng-container>

          <ng-container matColumnDef="Status">
            <th mat-header-cell *matHeaderCellDef>
              Status
            </th>
            <td mat-cell *matCellDef="let pd ">
              {{pd.Status}}
            </td>
          </ng-container>

          <ng-container matColumnDef="Remarks">
            <th mat-header-cell *matHeaderCellDef>
              Remarks
            </th>
            <td mat-cell *matCellDef="let pd">
              {{pd.Remarks}}
            </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumnss"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumnss;"></tr>
        </table>

      </div>

    </div>

    <!--//////////////////////////////////////////////////////////////////////////////////////////////-->
    <!--///////////////////////////////////////////////////////////////////////////////////////////////////////////-->

    <div class="col-sm-12 mt10">
      <mat-tab-group class="vr-tab" animationDuration="0ms">

        <!--------------------------------------General Consent------------------------------------------------------------->
        <mat-tab label="General Consent">

          <div class="col-sm-12 heightAuto-200px">

            <ul class="terms">
              <li [attr.data-number]="i" *ngFor="let lines of totallinesdata let i=index">{{lines}}</li>
            </ul>
            <p>
              <mat-checkbox [disabled]="disableGeneralConsent" [(ngModel)]="disablechecked" name="disablechecked"
                            (change)="disableSubmitt($event.checked)">
                I agree to the terms and conditions
              </mat-checkbox>
            </p>
          </div>

        </mat-tab>
        <!--------------------------------------------------------------------------------------------------->
        <!--------------------------------------Audio Consent Recording------------------------------------------------------------->
        <mat-tab label="Audio Consent Recording">

          <div class="col-sm-12 heightAuto-200px">
            <div class="col-sm-12">
              <div>
                <button type="button" class="btn-text btn-record" *ngIf="!isRecording && !blobUrl" (click)="startRecording()">
                  <i class="fas fa-microphone-alt"></i> Audio Consent Recording
                </button>
                <button class="stop-button" *ngIf="isRecording && !blobUrl" (click)="stopRecording()">
                  Stop Consent
                  Recording
                </button>
                <button class="cancel-button" *ngIf="!isRecording && blobUrl" (click)="clearRecordedData()">
                  Clear
                  Consent Recording
                </button>
                <div *ngIf="isRecording && !blobUrl"> {{recordedTime}} </div>
                <div>
                  <audio *ngIf="!isRecording && blobUrl" controls>
                    <source [src]="blobUrl" type="audio/wav">
                  </audio>
                </div>
              </div>
            </div>
            <div class="col-sm-3" *ngIf="Hidevoice">
              <audio controls class="mt20" src={{Voiceaudioclip}} type="audio"></audio>
            </div>
          </div>

        </mat-tab>
        <!--------------------------------------------------------------------------------------------------->
        <!--------------------------------------Video Consent Recording------------------------------------------------------------->
        <!--<mat-tab label="Video Consent Recording">

          <div class="col-sm-12 heightAuto-200px">
            <div class="col-sm-12">
              <button type="button" class="btn-text btn-record" (click)="OPenvideoconsent()">
                <i class="fas fa-video"></i>
                Video Consent Recording
              </button>
            </div>
            <div class="row" *ngIf="Hidevideoclip">

              <div class="col-sm-12">
                <video #video class="video"></video>
              </div>
              <div class="col-sm-12">
                <div class="row">
                  <div class="col-sm-3">
                    <button (click)="webcamopen()" type="button">
                      <mat-icon matTooltip="Open Webcam">camera</mat-icon>
                    </button>

                  </div>
                  <div class="col-sm-3">
                    <button (click)="videostartRecording()" type="button">
                      <mat-icon matTooltip="Start Video Consent Recording">adjust</mat-icon>
                    </button>
                    on>
                  </div>
                  <div class="col-sm-3">
                    <button matTooltip="Stop Video Consent Recording" (click)="videostopRecording()"
                            type="button">
                      <i class="fa fa-stop-circle"></i>
                    </button>


                  </div>
                </div>

              </div>

            </div>

          </div>
        </mat-tab>-->
        <!--------------------------------------------------------------------------------------------------->
      </mat-tab-group>
    </div>


  </div>




  <div class="col-sm-12 mt10 mb5">
    <div class="content-right sub-section btn-wrap">
      <button type="button" class="btn btn-warning-default" (click)="Cancel()"> Cancel </button>

      <button *ngIf="hiddenDelete" [disabled]="disableDelete" class="danger btn-danger-default"
              (click)="Deleteclk(RegistrationMasterForm,UIN.value)" mat-raised-button>
        Delete
      </button>

      <button *ngIf="hiddenUpdate" [disabled]="disabledUpdate" class="success btn btn-primary"
              (click)="Updateclk(RegistrationMasterForm,UIN.value)">
        Submit
      </button>
      <button *ngIf="hiddenUpdateReviewbtn" [disabled]="disabledUpdateReviewbtn" class="success btn btn-primary"
              (click)="ReviewPatientSubmit(RegistrationMasterForm,UIN.value)">
        Submit
      </button>

      <button *ngIf="IshiddenSub" class="success btn btn-primary" (click)="onSubmit(RegistrationMasterForm)"
              [disabled]="disableSubmit">
        Submit
      </button>

      <button *ngIf="hiddenDelete" [disabled]="disableDelete" class="success btn btn-primary" (click)="RePrint()">
        Print
      </button>


    </div>

  </div>


</form>





<!--////////////////////////////////////////////////popup open/////////////////////////////////////////////////////////////////////////-->
<!--pop_up-->

<div class="modal" role="dialog" [ngStyle]="{'display':cancelblock}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content ">
      <div class="modal-header">
        <h4 class="modal-title text-left">Registration</h4>
        <button type="button" class="close" data-dismiss="modal" (click)="modalSuccessClosessss()">&times;</button>
      </div>
      <div class="modal-body">
        <h5 class="modal-title center">Do You Want to Cancel ?</h5>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="modalcloseOk()">No</button>
        <button type="reset" class="btn btn-success" data-dismiss="modal" (click)="modalSuccesssOk()">Yes</button>
      </div>
    </div>
  </div>
</div>

<!--pop_up-->

<div class="modal" role="dialog" [ngStyle]="{'display':Reprintblock}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content ">
      <div class="modal-header">
        <h4 class="modal-title">Registration</h4>
        <button type="button" class="close" data-dismiss="modal" (click)="ReprintClosessss()">&times;</button>
      </div>
      <div class="modal-body">
        <h5 class="modal-title center">Do you want to print ?</h5>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="ReprintcloseOk()">No</button>
        <button type="reset" class="btn btn-success" data-dismiss="modal" (click)="ReprintSuccesssOk()">Yes</button>
      </div>
    </div>
  </div>
</div>



<div class="modal" role="dialog" [ngStyle]="{'display':modalSuccess}">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <div class="col-sm-12">
          <h4 class="modal-title">Registration</h4>
        </div>
      </div>

      <div class="modal-body">
        <div class="row">
          <h4 class="modal-title">Patient Registered Successfully</h4>
        </div>
        <div class="row">
          <div class="col-sm-1"></div>
          <div class="col-sm-4">
            <label class="control-label">Patient Name:</label>
          </div>
          <div class="col-sm-7">
            <label class="control-label">{{NAMEPATIENT}}</label>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-1"></div>
          <div class="col-sm-4">
            <label class="control-label">UIN No:</label>
          </div>
          <div class="col-sm-7">
            <label class="control-label">{{uinss}}</label>
          </div>
        </div>

      </div>
      <div class="modal-footer">
        <button type="reset" class="btn btn-danger" data-dismiss="modal" (click)="modalSuccesssssOk()">Close</button>
        <button [disabled]="disablePrint" type="reset" class="btn btn-success" data-dismiss="modal"
                (click)="modalSuccesPrintOk()">
          Print
        </button>
      </div>
    </div>
  </div>
</div>




<div class="modal height-700px margin-top-35px" role="dialog" [ngStyle]="{'display':modalHelp}">
  <div class="example-box" cdkDrag>
    <div class="modal-dialog modal-lg  pt10 pl10 width-60p">
      <div class="modal-content">


        <div class="modal-header">
          <h5 class="modal-title center">
            <strong>Registration Details</strong>
          </h5>
        </div>

        <div class="modal-body pt20">
          <div class="col-sm-12">
            <div class="row">

              <div class="col-sm-5">
                <mat-form-field appearance="outline">
                  <mat-label>UIN,Name,Phone</mat-label>
                  <input name="icddescription" [(ngModel)]="comsearch" dirname="commonsearch" class=""
                         type="text" matInput />
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <button type="button" mat-raised-button class="btsearch" (click)="ViewHelp()">search</button>
              </div>
              <div class="col-sm-4">
                <button mat-icon-button matTooltip="Export To PDF" mat-button
                        class="btn btn-Pdf">
                  <mat-icon>picture_as_pdf</mat-icon>
                </button>&nbsp;
                <button matTooltip="Export To Excel" (click)="fireEvent()"
                        class="btn btn-Excel">
                  <i class="fa fa-file-excel"></i>
                </button>&nbsp;
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="danger ml10px mt6px" mat-flat-button type="reset"
                  (click)="modalSuccessClose()">
            Close
          </button>
        </div>

      </div>
    </div>
  </div>
</div>



<!---------------------------------------Print----------------------->
<div id="section" style="display:none;font-size:16px">
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-3">
      </div>
      <div class="col-sm-6">
        <div>
          <h1 style="font-size:19px;text-align:center"><strong>{{PCompnayname}}</strong> </h1>
        </div>
        <div style="text-align:center">
          <strong>
            {{PAddress}},{{PAddress2}}<br />
            {{PAddress3}}<br />
            {{Pweb}}
          </strong>
        </div>
        <div style="text-align:center"><strong>{{Pphone}}</strong></div>
        <div style="text-align:center"><strong> consultant time : 8am - 9pm</strong></div>
      </div>
      <div class="col-sm-3">
      </div>
    </div>
  </div>

  <div class="col-sm-12" style="margin-top:1%">
    <div class="row">
      <div class="col-sm-6">
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Receipt No</strong></mat-label>
          </div>
          <div class="col-sm-1">:</div>
          <div class="col-sm-5"> {{ReceiptNumber}} </div>
          <div class="col-sm-2"></div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Receipt date</strong></mat-label>
          </div>
          <div class="col-sm-1">:</div>
          <div class="col-sm-5"> {{ReceiptDate| date:"dd-MMM-y HH:mm"}} </div>
          <div class="col-sm-2"></div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Patient ID</strong></mat-label>
          </div>
          <div class="col-sm-1">:</div>
          <div class="col-sm-5"> {{uinss}} </div>
          <div class="col-sm-2"></div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Patient name</strong></mat-label>
          </div>
          <div class="col-sm-1">:</div>
          <div class="col-sm-5"> {{NAMEPATIENT}} </div>
          <div class="col-sm-2"></div>
        </div>
        <div class="row">

          <div class="col-sm-4">
            <mat-label><strong>Registered date</strong></mat-label>
          </div>
          <div class="col-sm-1">:</div>
          <div class="col-sm-5"> {{ DATEOFREG | date:"dd-MMM-y HH:mm" }} </div>
          <div class="col-sm-2"></div>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="row">
          <div class="col-sm-5">
            <ngx-barcode [bc-width]="1.5" [bc-font-size]="12" [bc-margin-right]="120"
                         [bc-value]="uinss" [bc-display-value]="true" [bc-height]="22">
            </ngx-barcode>
          </div>
          <div class="col-sm-7"></div>
        </div>

      </div>
      <div class="col-sm-12" style="margin-top:1%">
        <div class="row">
          <div class="col-sm-5">
            <mat-label>
              <strong>Registration Charges:</strong> {{ConsulationFee|currency:Country2}}
            </mat-label>
          </div>
          <div class="col-sm-2"></div>
          <div class="col-sm-5">
            <mat-label><strong>Registered By :</strong>{{RegisteredBy}}</mat-label>
          </div>
        </div>
      </div>


    </div>
  </div>

  <div *ngIf="paymentPrint != null">

    <div class="col-sm-12" style="margin-bottom:2%">
      <div class="row">
        <div class="col-sm-3"> </div>
        <div class="col-sm-2"> </div>
        <div class="col-sm-3">
          <strong>Payment Details</strong>
        </div>
        <div class="col-sm-4"> </div>
      </div>
    </div>
    <div class="col-sm-12">
      <table align="center" class="custom-table table">
        <thead>
          <tr>
            <th>Sl.No</th>
            <th>Payment Mode</th>
            <th>Instruction No.</th>
            <th>Date</th>
            <th>Bank Name</th>
            <th>Branch Name</th>
            <th>Amount</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let x of paymentPrint; index as i">
            <td style="text-align:center">{{i+1}}</td>
            <td style="text-align:center">{{x.PaymentMode}}</td>
            <td style="text-align:center">{{x.InstrumentNumber}}</td>
            <td style="text-align:center">{{x.Instrumentdate| date:"dd-MMM-y"}}</td>
            <td style="text-align:center">{{x.BankName}}</td>
            <td style="text-align:center">{{x.BankBranch}}</td>
            <td style="text-align:center">{{x.Amount| number : '1.2-2'}}</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td style="text-align:center">Total Amount</td>
            <td style="text-align:center"> {{TotalpayMode |currency:Country2}}</td>
          </tr>
        </tfoot>


      </table>
    </div>
    <div class="col-sm-12" style="margin-top:1%">
      <div class="row">
        <div class="col-sm-6">
          <mat-label>
            <strong>{{Country2}} in Words :</strong>{{transformValue(ConsulationFee)}} {{Country2}} only
          </mat-label>
        </div>
      </div>
    </div>
  </div>


</div>


<!---------------------------------------ConsultationFee POP-up----------------------->
<div class="modal" role="dialog" [ngStyle]="{'display':ConsultationFeeblock}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content ">
      <div class="modal-header">
        <h4 class="modal-title">Registration Fee</h4>
        <button type="button" class="close" data-dismiss="modal" (click)="ConsultationFeeClose()">&times;</button>
      </div>
      <div class="modal-body">
        <h5 class="modal-title center">
          Do You Want to Apply Foreign National Fees ?
        </h5>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="ConsultationFeeNo()">No</button>
        <button class="btn btn-success" data-dismiss="modal" (click)="ConsultationFeeYes()">Yes</button>
      </div>
    </div>
  </div>
</div>


<!--pop_up-->

<div class="modal" role="dialog" [ngStyle]="{'display':MaritalStatusblock}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content ">
      <div class="modal-header">
        <h4 class="modal-title">Marital Status</h4>
        <button type="button" class="close" data-dismiss="modal" (click)="MaritalStatusClose()">&times;</button>
      </div>
      <div class="modal-body">
        <h5 class="modal-title center">
          Patient age is below 10 <br />
          Please select a valid marital Status !
        </h5>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" autofocus (click)="MaritalStatusOk()">OK</button>
      </div>
    </div>
  </div>
</div>
<!---------------------------------------Registration Fee POP-up----------------------->
<div class="modal" role="dialog" [ngStyle]="{'display':RegistrationFeeblock}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Registration Charges</h4>
        <button type="button" class="close" data-dismiss="modal" (click)="RegistrationFeeClose()">&times;</button>
      </div>
      <div class="modal-body">
        <h5 style="text-align:center;background-color:white;color:black"> Registration Charges not applied<br /> do you want to proceed ?</h5>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="RegistrationFeeNo()">No</button>
        <button class="btn btn-success" data-dismiss="modal" (click)="RegistrationFeeYes(RegistrationMasterForm)">Yes</button>
      </div>
    </div>
  </div>
</div>





<!--////////////////pop-up//////////-->
<div class="modal cust-model pop-paym" role="dialog" [ngStyle]="{'display':invdepPopUp}">
  <div class="modal-dialog modal-lg pt10 width-80p">
    <div class="modal-content height-550px">
      <div class="modal-header">
        <button class="close" (click)="invdepPopUpClose()">&times;</button>
        <h5 class="modal-title">
          <strong>Payment master</strong>
        </h5>
      </div>

      <div class="modal-body">

        <div class="col-sm-12">

          <div class="row">
            <input #OLMID [hidden]="hiddenM_OLMID" [(ngModel)]="M_OLMID" name="OLMID" matInput placeholder="">
            <div class="col-sm-6">
              <div class="row">
                <div class="col-sm-2">
                  <mat-form-field appearance="outline">
                    <mat-label>Payment Description</mat-label>
                    <input required [(ngModel)]="M_Slitlamp" name="Slitlamp" matInput placeholder="" maxlength="100">
                  </mat-form-field>
                </div>
                <div class="col-sm-1">
                  <button class="grab" [disabled]="Disableonsearch" type="reset" mat-icon-button (click)="Help()"
                          matTooltip="Help">
                    <mat-icon>search</mat-icon>
                  </button>
                </div>
                <div class="col-sm-2" *ngIf="hiddenisActive">
                  <mat-form-field appearance="outline">
                    <mat-label>Is Active</mat-label>
                    <mat-select [(ngModel)]="M_IsActive" name="Active">
                      <mat-option>Select</mat-option>
                      <mat-option value="true">Yes</mat-option>
                      <mat-option value="false">No</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
              <div class="row" style="margin-top: 2%;">
                <div class="col-sm-4"></div>
                <div class="col-sm-1" style="margin-left: -12%;" *ngIf="hiddenUpdate1">
                  <button [disabled]="DisableonUpdate" class="success" (click)="UpdateclkINV()"
                          mat-raised-button>
                    Update
                  </button>
                </div>
                <div class="col-sm-1" style="margin-left: -12%;" *ngIf="hiddenSubmit">
                  <button [disabled]="DisableonSubmit" class="success" (click)="onSubmitINV()"
                          mat-raised-button>
                    Submit
                  </button>
                </div>
                <div class="col-sm-1" style="margin-left: 6%;">
                  <button type="button" class="btn btn-warning"
                          style="font-size:15px;color:orange;background-color:white;"
                          (click)="CancelINV()">
                    <strong>Cancel</strong>
                  </button>
                </div>
                <div class="col-sm-1" style="margin-left: 9%;" *ngIf="hiddenDelete1">
                  <button [disabled]="DisableonDelete" class="danger" (click)="DeleteclkINV()"
                          mat-raised-button>
                    Delete
                  </button>
                </div>
              </div>
            </div>


            <div class="col-sm-6">

              <div class="row mph-0" [hidden]="OLMhidden">

                <div class="row mph-0">
                  <mat-form-field>
                    <mat-label>Search</mat-label>
                    <input (keyup)="applyFilter($event.target.value)" matInput placeholder="">
                  </mat-form-field>
                </div>
                <h3 align="center">{{MasterName}}</h3>


                <div class="row mph-0">
                  <table mat-table matSort [dataSource]="dataSourceinvdep" class="custom-table table">
                    <ng-container matColumnDef="Action">
                      <th mat-header-cell *matHeaderCellDef>Action</th>
                      <td mat-cell *matCellDef="let element"><input type="checkbox" (click)="selectTypeOLM(element)" /></td>
                    </ng-container>
                    <ng-container matColumnDef="OLMID" *ngIf="hiddenOLMID">
                      <th mat-header-cell *matHeaderCellDef>S.No</th>
                      <td mat-cell *matCellDef="let i = index">{{i+1}}</td>
                    </ng-container>
                    <ng-container matColumnDef="Description">
                      <th mat-header-cell *matHeaderCellDef>{{MasterName}} Description</th>
                      <td mat-cell *matCellDef="let element">{{element.PDescription}} </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumnsinvdep;sticky: true"></tr>
                    <tr mat-row *matRowDef="let element; columns: displayedColumnsinvdep"></tr>
                  </table>
                </div>
              </div>

            </div>
          </div>
        </div>


      </div>

    </div>
  </div>
</div>

<!---------------------------------------Patient Navigate POP-up----------------------->
<div class="modal" role="dialog" [ngStyle]="{'display':Patientnavigateblock}">
  <div class="modal-dialog modal-md">
    <div class="modal-content ">
      <div class="modal-header">
        <h4 class="modal-title text-left">Patient Navigate</h4>
        <button type="button" class="close" data-dismiss="modal" (click)="PatientnavigateClose()">&times;</button>
      </div>
      <div class="modal-body">

        <div class="row">
          <div class="col-sm-1"></div>
          <div class="col-sm-4">
            <label class="control-label">Patient Name:</label>
          </div>
          <div class="col-sm-7">
            <label class="control-label">{{NAMEPATIENT}}</label>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-1"></div>
          <div class="col-sm-4">
            <label class="control-label">UIN No:</label>
          </div>
          <div class="col-sm-7">
            <label class="control-label">{{uinss}}</label>
          </div>
        </div>

        <h5 class="modal-title center">
          Proceed to clinical procedure entry ?
        </h5>

      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="PatientnavigateClose()">No</button>
        <button class="btn btn-success" data-dismiss="modal" (click)="PatientnavigateCloseYes()">Yes</button>
      </div>
    </div>
  </div>
</div>


<!---------------------------------------Insurance POP-up----------------------->

<div class="modal height-700px" role="dialog" [ngStyle]="{'display':PatientVsInsuranceblock}">
  <div class="modal-dialog modal-lg width-80P">
    <div class="modal-content ">


      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="PatientVSInsuranceClose()">&times;</button>
        <h5 class="modal-title">
          <strong>
            Patient VS Insurance
          </strong>
        </h5>
      </div>

      <div class="modal-body">

        <div class="row">
          <div class="col-sm-12">
            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Insurance company</mat-label>
                <mat-select required [(ngModel)]="M_Insurancecompany" name="Insurancecompany" (ngModelChange)="InsurancecompanyEvent()">
                  <mat-option *ngFor="let Engage of Insurancedata" [value]="Engage">{{Engage.Text}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div class="col-sm-3" *ngIf="hiddenMiddleManDetails">
              <mat-form-field appearance="outline">
                <mat-label>Select agent details</mat-label>
                <mat-select required [(ngModel)]="M_MiddleManDetails" name="MiddleManDetails">
                  <mat-option *ngFor="let Engage of MiddleMandata" [value]="Engage">{{Engage.Text}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-12">
            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Policy Name</mat-label>
                <input required [(ngModel)]="M_PolicyName" name="Policyname" matInput placeholder="Policy name">
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Policy Number</mat-label>
                <input required [(ngModel)]="M_PolicyNumber" maxlength="50" name="PolicyNumber" matInput placeholder="Policy Number">
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Policy Date</mat-label>
                <input [(ngModel)]="M_PolicyDate" name="Policy Date" [matDatepicker]="Policypicker" matInput placeholder="Policy Date">
                <mat-datepicker-toggle matSuffix [for]="Policypicker"></mat-datepicker-toggle>
                <mat-datepicker #Policypicker></mat-datepicker>
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Sum Assured</mat-label>
                <input required [(ngModel)]="M_Sumassured" (keypress)="numberOnly($event)" name="Sumassured" matInput placeholder="Sum assured">
              </mat-form-field>
            </div>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-12">
            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Period from date</mat-label>
                <input [(ngModel)]="M_PFD" name="PFD" matInput [matDatepicker]="Policypicker1" placeholder="Period from date">
                <mat-datepicker-toggle matSuffix [for]="Policypicker1"></mat-datepicker-toggle>
                <mat-datepicker #Policypicker1></mat-datepicker>
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Period to date</mat-label>
                <input [(ngModel)]="M_PTD" name="PTD" matInput [matDatepicker]="Policypicker2" [min]="minDate2" [max]="maxDate2" placeholder="Period to date">
                <mat-datepicker-toggle matSuffix [for]="Policypicker2"></mat-datepicker-toggle>
                <mat-datepicker #Policypicker2></mat-datepicker>
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Remarks</mat-label>
                <textarea [(ngModel)]="M_PolicyRemarks" name="PolicyRemarks" placeholder="Remarks" matInput #messagePolicy maxlength="250"></textarea>
                <mat-hint align="start"><strong>Max 250 characters</strong> </mat-hint>
                <mat-hint align="end"><strong>{{messagePolicy.value.length}} /250</strong></mat-hint>
              </mat-form-field>
            </div>
            <div class="col-sm-3">
            </div>
          </div>
        </div>


      </div>

      <div class="modal-footer">
        <div class="row pb25">
          <div class="content-right sub-section btn-wrap">
            <button class="btn btn-warning-default" (click)="PatientVSInsuranceClose()"><strong>Cancel</strong></button>
            <button class="success btn btn-primary" (click)="onPatientVSInsuranceSave()">Submit</button>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>





<!--////////////////////////////////////////////////popup close/////////////////////////////////////////////////////////////////////////-->


<div class="modal cust-model" role="dialog" [ngStyle]="{'display':accesspopup}">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="modalcloseAccessOk()">&times;</button>
        <h4 class="modal-title text-left">Registration - View Access</h4>
      </div>
      <div class="modal-body">
        <table align="center" class="table custom-table">
          <thead>
            <tr>
              <th>Add</th>
              <th>Edit</th>
              <th>Delete</th>
              <th>Export</th>
              <th>Print</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let x of accessdata ; index as i">
              <td>
                <mat-checkbox [(checked)]="x.Add" disabled></mat-checkbox>
              </td>
              <td>
                <mat-checkbox [(checked)]="x.Edit" disabled></mat-checkbox>
              </td>
              <td>
                <mat-checkbox [(checked)]="x.Delete" disabled></mat-checkbox>
              </td>
              <td>
                <mat-checkbox [(checked)]="x.Export" disabled></mat-checkbox>
              </td>
              <td>
                <mat-checkbox [(checked)]="x.Print" disabled></mat-checkbox>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button class="btn btn-success" data-dismiss="modal" autofocus (click)="modalcloseAccessOk()">Ok</button>
      </div>
    </div>
  </div>
</div>




<!--pop_up BR-->

<div class="modal" role="dialog" [ngStyle]="{'display':BRblock}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content ">
      <div class="modal-header">
        <h4 class="modal-title text-left">Registration</h4>
        <button type="button" class="close" data-dismiss="modal" (click)="BROk()">&times;</button>
      </div>
      <div class="modal-body">
        <h5 class="modal-title center">Do you want to processed as review patient ?</h5>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="BROk1()">No</button>
        <button type="reset" class="btn btn-success" data-dismiss="modal" (click)="BRyes1()">Yes</button>
      </div>
    </div>
  </div>
</div>




<!--///////////////////karthic//////////////////////////-->
<!--pop_up BR-->

<div class="modal" role="dialog" [ngStyle]="{'display':BRblock1}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content ">
      <div class="modal-header">
        <h4 class="modal-title text-left">Registration</h4>
        <button type="button" class="close" data-dismiss="modal" (click)="BROk1()">&times;</button>
      </div>
      <div class="modal-body">
        <h5 class="modal-title center">Do you want to pay Consultation Fee ?</h5>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="BROk1()">No</button>
        <button type="reset" class="btn btn-success" data-dismiss="modal" (click)="BRyes1()">Yes</button>
      </div>
    </div>
  </div>
</div>
<!---------------------------------------con payment POP-up----------------------->

<div class="modal height-700px" role="dialog" [ngStyle]="{'display':paymentconfeeblock1}">
  <div class="modal-dialog modal-lg width-80P">
    <div class="modal-content ">


      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="paymentconfeeClose()">&times;</button>
        <h5 class="modal-title">

          Payment details

        </h5>
      </div>

      <div class="modal-body">


        <div class="col-sm-12 mb20">
          <div class="row">
            <!--<div class="col-sm-6">
              <span class="uinborder">
                {{uinss}} / {{NAMEPATIENT}} / {{AGE}} / {{GENDER}}
              </span>
            </div>-->
            <div class="col-sm-4">
              <mat-label>{{cdoctor}}</mat-label>
            </div>
          </div>
        </div>


        <div class="row">
          <div class="col-sm-4">
            <mat-form-field appearance="outline">
              <mat-label>Doctor Consultation Charge</mat-label>
              <input [(ngModel)]="M_Consultationcharges" (keyup)="keyupConsultation()" matInput placeholder="Enter Consultation Charge" name="Consultationcharges" type="number" min="0" maxlength="9">
            </mat-form-field>
          </div>
        </div>


        <div class="row">
          <h5 class="card-header bg-success text-white">
            Payment details
            <button type="button" (click)="AddPaymentDetailsNewgridcon();" class="btnuserdefined btn-dark"><i matTooltip="Add Payment Details" class="fa fa-plus"></i></button>
          </h5>
          <table mat-table [dataSource]="dataSourcepaycon" class="custom-table withoutbackgroung search-table table-bordered">

            <ng-container matColumnDef="PaymentModecon">
              <th mat-header-cell *matHeaderCellDef>Payment Mode</th>
              <td mat-cell *matCellDef="let element;let id = index;" class="width-15p">
                <mat-form-field appearance="outline">
                  <mat-select (selectionChange)="PaymentChangecon(id,$event,element)">
                    <mat-option *ngFor="let Paymentsmode of Paymentsmodescon" [value]="Paymentsmode.Value">
                      {{Paymentsmode.Text}}
                    </mat-option>
                  </mat-select>
                </mat-form-field>
              </td>
              <td mat-footer-cell *matFooterCellDef> </td>
            </ng-container>
            <ng-container matColumnDef="BankNamecon">
              <th mat-header-cell *matHeaderCellDef>Bank Name</th>
              <td mat-cell *matCellDef="let element" contenteditable="false">
                <mat-form-field appearance="outline">
                  <input (blur)="BankNamecon($event,element)" (keypress)="nameField($event)" [disabled]="element.PaymentMode =='Cash'  " maxlength="100" matInput placeholder="Enter BankName" name="BankName" type="text">
                </mat-form-field>
              </td>
              <td mat-footer-cell *matFooterCellDef> </td>
            </ng-container>
            <ng-container matColumnDef="InstrumentNumbercon">
              <th mat-header-cell *matHeaderCellDef>Instrument Number</th>
              <td mat-cell *matCellDef="let element" contenteditable="false">
                <mat-form-field appearance="outline">
                  <input (blur)="InstrumentNumbercon($event,element)" [disabled]="element.PaymentMode =='Cash'" maxlength="15" (keypress)="numberOnly($event)" matInput placeholder="Enter Instrument Number" name="InstrumentNumber" type="text">
                </mat-form-field>
              </td>
              <td mat-footer-cell *matFooterCellDef> </td>
            </ng-container>
            <ng-container matColumnDef="InstrumentDatecon">
              <th mat-header-cell *matHeaderCellDef>Instrument Date</th>
              <td mat-cell *matCellDef="let element" contenteditable="false">
                <mat-form-field appearance="outline">
                  <input [disabled]="element.PaymentMode =='Cash'|| element.PaymentMode =='Credit Card'|| element.PaymentMode =='Debit card'"
                         type="datetime" name="InstrumentDate" autocomplete="off" [max]="maxInstrumentDate" matInput [matDatepicker]="InstrumentDate" (keypress)="numberOnly($event)" (dateChange)="dateofinstrumentcon($event,element)" placeholder="InstrumentDate">
                  <mat-datepicker-toggle matSuffix [for]="InstrumentDate"></mat-datepicker-toggle>
                  <mat-datepicker #InstrumentDate></mat-datepicker>
                </mat-form-field>
              </td>
              <td mat-footer-cell *matFooterCellDef> </td>
            </ng-container>
            <ng-container matColumnDef="ExpiryDatecon">
              <th mat-header-cell *matHeaderCellDef>Expiry Date</th>
              <td mat-cell *matCellDef="let element" contenteditable="false">
                <mat-form-field appearance="outline">
                  <input (dateChange)="dateexpirycon($event,element)" [disabled]="element.PaymentMode =='Cash'|| element.PaymentMode =='Demand Draft'|| element.PaymentMode =='Cheque' " autocomplete="off" [min]="MINExpiryDate"
                         name="ExpiryDate" matInput [matDatepicker]="ExpiryDate" placeholder="ExpiryDate" type="datetime" (keypress)="numberOnly($event)">
                  <mat-datepicker-toggle matSuffix [for]="ExpiryDate"></mat-datepicker-toggle>
                  <mat-datepicker #ExpiryDate></mat-datepicker>
                </mat-form-field>
              </td>
              <td mat-footer-cell *matFooterCellDef> </td>
            </ng-container>
            <ng-container matColumnDef="Branchcon">
              <th mat-header-cell *matHeaderCellDef>Branch</th>
              <td mat-cell *matCellDef="let element" contenteditable="false">
                <mat-form-field appearance="outline">
                  <input (blur)="Branchcon($event,element)"
                         [disabled]="element.PaymentMode =='Cash' || element.PaymentMode =='Debit card' || element.PaymentMode =='Credit Card'"
                         (keypress)="nameField($event)" maxlength="50" matInput name="Branch" placeholder="Branch" type="text">
                </mat-form-field>

              </td>
              <td mat-footer-cell *matFooterCellDef>Total</td>
            </ng-container>
            <ng-container matColumnDef="Amountcon">
              <th mat-header-cell *matHeaderCellDef>Amount</th>
              <td mat-cell *matCellDef="let element;let id = index" required (keyup)="Amountcon(id,'Amount',$event,element)" (keypress)="numberOnly($event)" [contentEditable]="disableRowcon">
                {{element.Amount| number : '1.2-2'}}

              </td>
              <td mat-footer-cell *matFooterCellDef>

                {{PTotalAmountcon() |currency:Country2}}

              </td>
            </ng-container>
            <ng-container matColumnDef="Actioncon">
              <th mat-header-cell *matHeaderCellDef>Action</th>
              <td mat-cell *matCellDef="let element;let id = index" contenteditable="false">
                <i class="fas fa-trash-alt icon-delete grab" title="Delete" (click)="removePaytypecon(i)"></i>
              </td>
              <td mat-footer-cell *matFooterCellDef></td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumnspaycon;sticky: true"></tr>
            <tr mat-row *matRowDef="let element;  let even = even; columns: displayedColumnspaycon"></tr>
            <tr mat-footer-row *matFooterRowDef="displayedColumnspaycon;"></tr>
          </table>
        </div>


      </div>

      <div class="modal-footer">
        <div class="row pb25">
          <div class="content-right sub-section btn-wrap">
            <button class="btn btn-warning-default" (click)="PaymentCancel()">Cancel</button>
            <button class="success btn btn-primary" (click)="onsubmitPayment()">Submit</button>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>



<div class="modal" role="dialog" [ngStyle]="{'display':cancelblockCon}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content ">
      <div class="modal-header">
        <h4 class="modal-title text-left">Payment</h4>
        <button type="button" class="close" data-dismiss="modal" (click)="modalcloseOkCon()">&times;</button>
      </div>
      <div class="modal-body">
        <h5 class="modal-title center">Do You Want to Cancel ?</h5>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="modalcloseOkCon()">No</button>
        <button type="reset" class="btn btn-success" data-dismiss="modal" (click)="modalSuccesssOkCon()">Yes</button>
      </div>
    </div>
  </div>
</div>


<div class="modal" role="dialog" [ngStyle]="{'display':modalpurchase}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <div class="col-sm-12">
          <div class="row">
            <div class="col-sm-11">
              <h4 class="modal-title">Consultation Bill</h4>
            </div>

          </div>
        </div>
      </div>
      <div class="modal-body">
        <strong><label>Bill Number:{{bilno}}</label></strong>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success" (click)="modalSuccessssspurchaseOk()">Ok</button>
      </div>
    </div>
  </div>
</div>

<div class="modal" role="dialog" [ngStyle]="{'display':purchaseprint}">
  <div class="example-box" cdkDrag>
    <div class="modal-dialog modal-sm">
      <div class="modal-content">
        <div class="modal-header">
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-11">
                <h4 class="modal-title">Information</h4>
              </div>
            </div>

          </div>
        </div>
        <div class="modal-body">
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-1">
              </div>
              <div class="col-sm-10">
                <h5 class="modal-title center">Do you want to Print?</h5>
              </div>
              <div class="col-sm-1">
              </div>
            </div>
          </div>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="printclose()">No</button>
          <button (click)="printsss()" class="btn btn-success" data-dismiss="modal">Yes</button>


        </div>


      </div>
    </div>
  </div>
</div>
<!--<!-con Prin-->

<div id="printss" style="display:none">

  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-6">
        <label style="font-size:16px">{{cname}} </label>
      </div>
      <div class="col-sm-2"></div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-6"> <label> {{caddres}}</label></div>
      <div class="col-sm-2"></div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-4"> <label>Tel-{{cph}},- {{cwe}}</label></div>
      <div class="col-sm-4"></div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-4"><label style="text-align:center"></label></div>
      <div class="col-sm-4"></div>
    </div>
  </div>

  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-4"> Consultation Bill</div>
      <div class="col-sm-4"></div>
    </div>
  </div>

  <hr>



  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-2">
        <div class="row">
          <label>Patient ID</label>
        </div>
        <div class="row">
          <label>Patient Name</label>
        </div>
        <div class="row">
          <label>Age / Gender</label>
        </div>
        <div class="row">
          <label>Phone NO</label>
        </div>
      </div>
      <div class="col-sm-3">

        <div class="row">
          <label>{{uinn}}</label>
        </div>
        <div class="row">
          <label>{{name}}</label>
        </div>
        <div class="row">
          <label>{{age}}yrs&nbsp;/&nbsp;{{gender}}</label>
        </div>
        <div class="row">
          <label>{{phone}}</label>
        </div>

      </div>
      <div class="col-sm-2"></div>
      <div class="col-sm-2">
        <div class="row">
          <label>Invoice Number</label>
        </div>
        <div class="row">
          <label>Invoice Date</label>
        </div>
      </div>

      <div class="col-sm-3">
        <div class="row">
          <label>{{billno}}</label>
        </div>
        <div class="row">
          <label>{{billdt|date:"dd-MMM-y"}}</label>
        </div>
      </div>
    </div>
  </div>




  <div class="col-sm-12" style="margin-bottom:2%">
    <div class="row">
      <div class="col-sm-3"> </div>
      <div class="col-sm-2"> </div>
      <div class="col-sm-3">
        Payment Details
      </div>
      <div class="col-sm-4"> </div>
    </div>
  </div>
  <div class="col-sm-12">
    <table align="center" style="border-left:3px solid#51b8f2;margin-top:-9px;font-size: 12px" class="table table-bordered">
      <thead>
        <tr>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Sl.No</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Payment Mode</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Instruction No.</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Date</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Bank Name</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Branch Name</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Expiry Date</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let x of payment; index as i">
          <td style="text-align:center">{{i+1}}</td>
          <td style="text-align:center">{{x.paymode}}</td>
          <td style="text-align:center">{{x.instno}}</td>
          <td style="text-align:center">{{x.instdt| date:"dd-MMM-y"}}</td>
          <td style="text-align:center">{{x.bname}}</td>
          <td style="text-align:center">{{x.branch}}</td>
          <td style="text-align:center">{{x.expiry| date:"dd-MMM-y"}}</td>
          <td style="text-align:center">{{x.amount| number : '1.2-2'}}</td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td style="text-align:center;font-family: 'Proxima Nova Semibold'; font-size: 15px;">Total Amount</td>
          <td style="text-align:center">{{payamt | currency:Country2}}</td>
        </tr>
      </tfoot>
    </table>
  </div>



  <div class="col-sm-12" style="margin-top:2%">
    <div class="row">

      <div class="col-sm-6">
        Rupees (in Words) :{{transformValue(payamt)}} &nbsp;only
      </div>
      <div class="col-sm-6"> </div>
    </div>
  </div>

</div>
