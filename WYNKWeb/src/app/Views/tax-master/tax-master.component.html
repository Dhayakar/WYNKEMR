


<div class="col-sm-12">
  <div>
    <h5 class="col-sm-5 card-header bg-success text-white">
      Tax Master
    </h5>
  </div>
</div>


<div class="col-sm-12">

  <div class="col-sm-12 borderline">
    <form #TaxMasterForm="ngForm">
      <div>
        <!--First row-->

        <div class="col-sm-12">
          <div class="col-sm-10">
          </div>
          <div class="col-sm-2 mph-0 f-r pb20">
            <button class="btn-text" (click)="Getformaccess()"><i class="fas fa-eye"></i> View Access</button>
          </div>
        </div>

        <div class="col-sm-12">
          <input #Taxid name="Taxid" [(ngModel)]="TaxID" type="hidden">

          <div class="col-sm-3">
            <mat-form-field appearance="outline">
              <mat-label> Tax Group</mat-label>
              <mat-select [(ngModel)]="TaxGroup" name="TaxGroup" required>
                <mat-option value="withinState" (click)="showgst()">Within State</mat-option>
                <mat-option value="interstate" (click)="showIgst()">Inter State</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-sm-2">
            <button [disabled]="Disableonsearch" (click)="getTaxTable()" class="btn-text grab ">
              <i class="fas fa-info-circle"> </i> Help
            </button>
          </div>




        </div>

        <!--/////////////////////////////////////////////////international tax///////////////////////////////////////////////////////////////////////-->
        <div *ngIf="hiddenbyCountry1">
          <div class="col-sm-12">
            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Tax Description</mat-label>
                <textarea #message1 maxlength="250" matInput placeholder="Tax Description" [(ngModel)]="TaxDescription" name="TaxDescription" (keypress)="hidedotval($event)" required></textarea>
                <mat-hint>Max 250 Character</mat-hint>
                <mat-hint>{{message1.value.length}}/250</mat-hint>
              </mat-form-field>
            </div>
            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Tax %</mat-label>
                <input matInput placeholder="Tax %" [(ngModel)]="GST" id="GST" name="GST" maxlength="3" (keypress)="numberOnly($event)" (keyup)="ChangeValue()">
              </mat-form-field>
            </div>
          </div>

          <div class="col-sm-12">
            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Addl Tax Description 1</mat-label>
                <!--<input matInput placeholder="Tax Description">-->
                <textarea #message2 maxlength="100" matInput placeholder="Addl Tax Description 1" [(ngModel)]="CESSDescription" name="CESSDescription" (keypress)="hidedotval($event)"></textarea>
                <mat-hint>Max 100 Character</mat-hint>
                <mat-hint>{{message2.value.length}}/100</mat-hint>
              </mat-form-field>
            </div>

            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Addl Tax % 1</mat-label>
                <input matInput placeholder="Addl Tax % 1" [(ngModel)]="CESS" id="CESS" name="CESS" maxlength="3" (keypress)="numberOnly($event)" (keyup)="ChangeCESSValue()">
              </mat-form-field>
            </div>

            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Addl Tax Description 2</mat-label>
                <!--<input matInput placeholder="Tax Description">-->
                <textarea #message3 maxlength="100" matInput placeholder="Addl Tax Description 2" [(ngModel)]="AdditionalCESSDescription" name="CESSDescription" (keypress)="hidedotval($event)"></textarea>
                <mat-hint>Max 100 Character</mat-hint>
                <mat-hint>{{message3.value.length}}/100</mat-hint>
              </mat-form-field>
            </div>

            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Addl Tax % 2</mat-label>
                <input matInput placeholder="Addl Tax % 2" [(ngModel)]="AdditionalCESS" id="AdditionalCESS" name="AdditionalCESS" maxlength="3" (keypress)="numberOnly($event)" (keyup)="ChangeAdditionalCESSValue()">
              </mat-form-field>
            </div>
          </div>
        </div>
        <div *ngIf="hiddenbyCountry">
          <div class="col-sm-12">
            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Tax Description</mat-label>
                <textarea #message4 maxlength="250" matInput placeholder="Tax Description" [(ngModel)]="TaxDescription" name="TaxDescription" (keypress)="hidedotval($event)" required></textarea>
                <mat-hint>Max 250 Character</mat-hint>
                <mat-hint>{{message4.value.length}}/250</mat-hint>
              </mat-form-field>
            </div>
            <div class="col-sm-3" [hidden]="!Interstate">

              <mat-form-field appearance="outline">
                <mat-label>IGST %</mat-label>
                <input matInput placeholder="IGST %" [(ngModel)]="IGST" name="IGST" maxlength="3" (keypress)="numberOnly($event)" (keyup)="Restrictnum()">
              </mat-form-field>
            </div>
            <div class="col-sm-3" [hidden]="!withinstate">
              <mat-form-field appearance="outline">
                <mat-label>GST %</mat-label>
                <input matInput placeholder="GST %" [(ngModel)]="GST" id="GST" name="GST" maxlength="3" (keypress)="numberOnly($event)" (keyup)="ChangeValue()">
              </mat-form-field>
            </div>
            <div class="col-sm-3" [hidden]="!withinstate">
              <mat-form-field appearance="outline">
                <mat-label>CGST%</mat-label>
                <input matInput placeholder="CGST %" [(ngModel)]="CGST" name="CGST" (keypress)="numberOnly($event)" disabled>
              </mat-form-field>
            </div>

            <div class="col-sm-3" [hidden]="!withinstate">
              <mat-form-field appearance="outline">
                <mat-label>SGST%</mat-label>
                <input matInput placeholder="SGST  %" [(ngModel)]="SGST" name="SGST" (keypress)="numberOnly($event)" disabled>
              </mat-form-field>
            </div>
          </div>

          <!--Fourth row-->
          <div class="col-sm-12">
            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>CESS Description</mat-label>
                <!--<input matInput placeholder="Tax Description">-->
                <textarea #message5 maxlength="100" matInput placeholder="CESS Description" [(ngModel)]="CESSDescription" name="CESSDescription" (keypress)="hidedotval($event)"></textarea>
                <mat-hint>Max 100 Character</mat-hint>
                <mat-hint>{{message5.value.length}}/100</mat-hint>
              </mat-form-field>
            </div>

            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>CESS %</mat-label>
                <input matInput placeholder="CESS %" [(ngModel)]="CESS" id="CESS" name="CESS" maxlength="3" (keypress)="numberOnly($event)" (keyup)="ChangeCESSValue()">
              </mat-form-field>
            </div>

            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Addl CESS Description</mat-label>
                <!--<input matInput placeholder="Tax Description">-->
                <textarea #message6 maxlength="100" matInput placeholder="Addl CESS Description" [(ngModel)]="AdditionalCESSDescription" name="CESSDescription" (keypress)="hidedotval($event)"></textarea>
                <mat-hint>Max 100 Character</mat-hint>
                <mat-hint>{{message6.value.length}}/100</mat-hint>
              </mat-form-field>
            </div>

            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Addl CESS%</mat-label>
                <input matInput placeholder="Addl CESS %" [(ngModel)]="AdditionalCESS" id="AdditionalCESS" name="AdditionalCESS" maxlength="3" (keypress)="numberOnly($event)" (keyup)="ChangeAdditionalCESSValue()">
              </mat-form-field>
            </div>




          </div>

        </div>


        <div class="col-sm-12 mt10">
          <div class="col-sm-3">
            <div [hidden]="!hideIsActive">
              <mat-form-field appearance="outline">
                <mat-label> IsActive</mat-label>
                <mat-select [(ngModel)]="IsActive" name="IsActive">

                  <mat-option value="false">Yes</mat-option>
                  <mat-option value="true">No</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>

        <!--<div class="col-sm-12">
          <div class="col-sm-4"></div>

          <div class="col-sm-1" >
            <button [disabled]="disableUpdate" mat-raised-button (click)="onUpdate(TaxMasterForm,TaxID.value)" class="success">Submit</button>
          </div>

          <ng-template #notShow>
            <div class="col-sm-1">
              <button [disabled]="disableSubmit" mat-raised-button class="success" (click)="onSubmit(TaxMasterForm)"> Submit </button>
            </div>
          </ng-template>

          <div class="col-sm-1">
            <button type="button" class="btn btn-warning" (click)="Cancel()"><strong>Cancel</strong></button>
          </div>

        </div>-->





        <div class="col-sm-12 pb25">
          <div class="content-right sub-section btn-wrap">
            <button type="button" class="btn btn-warning-default" (click)="Cancel()"><strong>Cancel</strong></button>
            <button *ngIf="Taxid.value!=0;" [disabled]="disableUpdate" (click)="onUpdate(TaxMasterForm,TaxID.value)" class="success btn btn-primary">Submit</button>
            <button *ngIf="Taxid.value == 0;" [disabled]="disableSubmit" class="success btn btn-primary" (click)="onSubmit(TaxMasterForm)"> Submit </button>

          </div>
        </div>
      </div>



























      <!--Cancel Popup-->
      <div class="modal" role="dialog" [ngStyle]="{'display':cancelblock}">
        <div class="modal-dialog modal-sm">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" (click)="modalClose()">&times;</button>
              <h4 class="modal-title"> Tax Master  </h4>
            </div><br />
            <p align="center">Do you want to cancel</p>
            <div class="modal-footer">
              <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="CancelNo()">No</button>
              <button type="reset" class="btn btn-success " data-dismiss="modal" (click)="CancelYes()">Yes</button>
            </div>
          </div>
        </div>
      </div>

    </form>

  </div>

</div>



<!--Cancel Popup-->
<div class="modal" role="dialog" [ngStyle]="{'display':cancelblock}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">

        <h4 class="modal-title"> Tax Master  </h4>
        <button type="button" class="close" data-dismiss="modal" (click)="modalClose()">&times;</button>
      </div><br />
      <p align="center">Do you want to cancel</p>
      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="CancelNo()">No</button>
        <button type="reset" class="btn btn-success " data-dismiss="modal" (click)="CancelYes()">Yes</button>
      </div>
    </div>
  </div>
</div>

<!--   Get Table  -->
<!--<div class="modal" role="dialog" [ngStyle]="{'display':TaxTable}">
  <div class="modal-dialog modal-lg" style="width:78%;padding-top:10px;padding-left:290px">
    <div class="modal-content" style="height:500px;width: 956px;margin-left: -260px">
      <div class="modal-header" style="background-color:#51b8f2;color:white;">
        <h4 class="modal-title" style="text-align:center">
          <strong>Tax Details</strong>
        </h4>
        <button type="button" class="close" data-dismiss="modal" (click)="closeEnd()">&times;</button>
      </div>
      <div class="modal-body">
        <div class="col-sm-12">
          <div class="col-sm-4">
            <mat-form-field appearance="outline">
              <mat-label>Search Criteria</mat-label>
              <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Search Criteria">
            </mat-form-field>

          </div>
          <div class="col-sm-4"></div>


          <div class="col-sm-4" style="text-align: right">
            <button mat-icon-button matTooltip="Export to PPF" id="cmd" (click)="getPdf()"><img style="height:35px;width:35px;" src="assets/pdf.png" /></button>
            &nbsp;&nbsp;<button mat-icon-button matTooltip="Export to Excel" (click)="getExcel()"><img style="height:35px;width:45px;" src="assets/excel.svg" /></button>
          </div>
        </div>


        <div class="col-sm-12" style="height:300px;overflow:auto;" #table>

          <table mat-table [dataSource]="dataSource" id="Taxtable" matSort class="mat-elevation-z8" style="width:100%" #Taxtable>

            <ng-container matColumnDef="checked">
              <th mat-header-cell *matHeaderCellDef mat-sort-header style="text-align:center">Select</th>
              <td mat-cell *matCellDef="let element"> <mat-icon data-toggle="tooltip" (click)="selectvalues(element)" class="grab">offline_pin</mat-icon>  </td>
            </ng-container>

            <ng-container matColumnDef="TaxDescription">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Tax Description </th>
              <td mat-cell *matCellDef="let element"> {{element.TaxDescription}} </td>
            </ng-container>


            <ng-container matColumnDef="GSTPercentage">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> GST% </th>
              <td mat-cell *matCellDef="let element"> {{element.GSTPercentage}} </td>
            </ng-container>


            <ng-container matColumnDef="SGSTPercentage">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> SGST% </th>
              <td mat-cell *matCellDef="let element"> {{element.SGSTPercentage | number : '1.2-2'}} </td>
            </ng-container>


            <ng-container matColumnDef="CGSTPercentage">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> CGST% </th>
              <td mat-cell *matCellDef="let element"> {{element.CGSTPercentage | number : '1.2-2'}} </td>
            </ng-container>

            <ng-container matColumnDef="IGSTPercentage">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> IGST% </th>
              <td mat-cell *matCellDef="let element"> {{element.IGSTPercentage}} </td>
            </ng-container>

            <ng-container matColumnDef="TaxGroupId">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> Tax Group </th>
              <td mat-cell *matCellDef="let element"> {{element.TaxGroupId}} </td>
            </ng-container>

            <ng-container matColumnDef="IsActive">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> IsActive </th>
              <td mat-cell *matCellDef="let element"> {{element.IsActive}} </td>
            </ng-container>


            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let element; columns: displayedColumns;" (click)="selectvalues(element)"> </tr>
          </table>




        </div>


      </div>


    </div>
  </div>
</div>-->
<!--////////////////////////////////////////////////View Access/////////////////////////////////////////////////////////////////////////-->


<div class="modal cust-model" role="dialog" [ngStyle]="{'display':accesspopup}">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="modalcloseAccessOk()">&times;</button>
        <h4 class="modal-title text-left">Tax Master - View Access</h4>
      </div>
      <div class="modal-body">
        <table align="center" class="table custom-table">
          <thead>
            <tr>
              <th>Add</th>
              <th>Edit</th>
              <th>Delete</th>
              <th>Export</th>
              <th>Print</th>

            </tr>
          </thead>
          <tbody>


            <tr *ngFor="let x of accessdata; index as i">
              <td>
                <mat-checkbox [(checked)]="x.Add" disabled></mat-checkbox>
              </td>
              <td>
                <mat-checkbox [(checked)]="x.Edit" disabled></mat-checkbox>
              </td>
              <td>
                <mat-checkbox [(checked)]="x.Delete" disabled></mat-checkbox>
              </td>
              <td>
                <mat-checkbox [(checked)]="x.Export" disabled></mat-checkbox>
              </td>
              <td>
                <mat-checkbox [(checked)]="x.Print" disabled></mat-checkbox>
              </td>
            </tr>

          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button class="btn btn-success" data-dismiss="modal" autofocus (click)="modalcloseAccessOk()">Ok</button>
      </div>
    </div>
  </div>
</div>
