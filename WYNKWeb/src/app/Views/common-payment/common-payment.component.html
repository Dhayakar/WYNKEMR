



  <!--------------------------------------------------------------------------------------------------->
  <form #AdvanceForm="ngForm" name="AdvanceForm" (keydown.enter)="$event.preventDefault()" novalidate>



    <h5 class="col-sm-5 card-header bg-success text-white"> Advance Payment Details </h5>

    <div class="col-sm-12 borderline">




      <div class="col-sm-12 mph-0 mt40">
        <div class="row mph-0">
          <div class="col-sm-12 mph-0">
            <div class="col-sm-6 mph-0 pb20">
              <span class="uinborder">
                <strong>{{M_UIN}} / {{M_Name}} {{M_MiddleName}} {{M_LastName}} / {{M_Age}} / {{M_Gender}} </strong>
              </span>
              <button [disabled]="disableClicksch" (click)="Clicksch()" class="btn-text grab">
                <i class="fas fa-info-circle"> </i> Help
              </button>
            </div>
            <div class="col-sm-4 mph-0 f-r content-right pb20">
              <button class="btn-text" (click)="Getformaccess()"><i class="fas fa-eye"></i> View Access</button>
            </div>
          </div>
        </div>
      </div>




      <div class="col-sm-12 mt40" >
        <div class="row">


          <div class="col-sm-3">
            <mat-form-field appearance="outline">
              <mat-label>Receipt Date</mat-label>
              <input [(ngModel)]="M_ReceiptDate" name="ReceiptDate" matInput [matDatepicker]="ReceiptDate" placeholder="Receipt Date" required>
              <mat-datepicker-toggle matSuffix [for]="ReceiptDate"></mat-datepicker-toggle>
              <mat-datepicker #ReceiptDate></mat-datepicker>
            </mat-form-field>
          </div>

          <div class="col-sm-3">
            <mat-form-field appearance="outline">
              <mat-label>Advance Amount</mat-label>
              <input [(ngModel)]="M_AdvanceAmount" required matInput placeholder="AdvanceAmount" name="AdvanceAmount" type="number" min="0" maxlength="9" (keypress)="numberOnly($event)" (keyup)="keyupAdvanceAmount()">
            </mat-form-field>
          </div>
          <button class="success btn btn-primary" (click)="PaymentMode()">Make payment</button>
        </div>
      </div>


      <!--//////////////////////////////////////////////Payment///////////////////////////////////////////////////////-->
      <!--<div class="col-sm-12" *ngIf="hiddenPayment">
  <div class="row">
    <div class="col-sm-6">
      <h1 class="col-sm-6" style="margin-bottom: 0PX;margin-left: 16px;border-bottom-left-radius:0px;" align="center">Payment Details</h1>
    </div>
  </div>

  <div class="row" style="border:2px solid #51b8f2;border-radius:15px;width:98%;margin-left:1%;margin-bottom:2%;border-top-left-radius:0px">
    <div class="row">
      <div class="col-sm-12" style="margin-top:2%">

        <div class="row" style="margin: 1%;">
          <div class="col-sm-3">
            <mat-form-field appearance="outline">
              <mat-label>Payment Mode</mat-label>
              <mat-select [(ngModel)]="M_paymode" name="PaymentMode" (ngModelChange)="PaymentChange()">
                <mat-option *ngFor="let Paymentsmode of Paymentsmode" [value]="Paymentsmode.Value">{{Paymentsmode.Text}}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="col-sm-3">
            <mat-form-field appearance="outline">
              <mat-label>Instrument Number</mat-label>
              <input maxlength="15" (keypress)="numberOnly($event)" [disabled]="!(paymentChequeDd || paymentDebitCredit)" [(ngModel)]="M_InstrumentNumber" matInput placeholder="Enter Instrument Number" name="InstrumentNumber" type="text">
            </mat-form-field>
          </div>

          <div class="col-sm-3">
            <mat-form-field appearance="outline" style="width:200px">
              <mat-label>Instrument Date</mat-label>
              <input [(ngModel)]="M_InstrumentDate" [disabled]="!(paymentChequeDd)" name="InstrumentDate" matInput [matDatepicker]="InstrumentDate" placeholder="InstrumentDate" type="datetime">
              <mat-datepicker-toggle matSuffix [for]="InstrumentDate"></mat-datepicker-toggle>
              <mat-datepicker #InstrumentDate></mat-datepicker>
            </mat-form-field>
          </div>

          <div class="col-sm-3">
            <mat-form-field appearance="outline">
              <mat-label>Bank Name</mat-label>
              <input (keypress)="nameField($event)" [disabled]="!(paymentChequeDd || paymentDebitCredit)" maxlength="100" [(ngModel)]="M_BankName" matInput placeholder="Enter BankName" name="BankName" type="text">
            </mat-form-field>
          </div>
        </div>


        <div class="row" style="margin: 1%;">
          <div class="col-sm-3">
            <mat-form-field appearance="outline" style="width:200px">
              <mat-label>Expiry Date</mat-label>
              <input [disabled]="!(paymentDebitCredit)" [(ngModel)]="M_ExpiryDate" [min]="MINExpiryDate" name="ExpiryDate" matInput [matDatepicker]="ExpiryDate" placeholder="ExpiryDate" type="datetime">
              <mat-datepicker-toggle matSuffix [for]="ExpiryDate"></mat-datepicker-toggle>
              <mat-datepicker #ExpiryDate></mat-datepicker>
            </mat-form-field>
          </div>

          <div class="col-sm-3">
            <mat-form-field appearance="outline">
              <mat-label>Branch</mat-label>
              <input [disabled]="!(paymentChequeDd)" (keypress)="nameField($event)" maxlength="50" matInput [(ngModel)]="M_Branch" name="Branch" placeholder="Branch" type="text">
            </mat-form-field>
          </div>

          <div class="col-sm-3">
            <mat-form-field appearance="outline">
              <mat-label>Amount( in {{Country2| currency}} )</mat-label>
              <input [disabled]="!(paymentCash)" matInput [(ngModel)]="M_Amount" min="0" [max]="maxAmount" name="Amount" (keyup)="Totalamount()" (keypress)="numberOnly($event)" type="number" placeholder="Amount">
            </mat-form-field>
          </div>

          <div class="col-sm-1">
            <button class="search" mat-icon-button type="button" data-toggle="tooltip" (click)="AddPayment()" title="Add Payment"><i class="fa fa-plus" style="font-size:24px"></i></button>
          </div>
        </div>

      </div>
    </div>
    <div class="col-sm-12" style="height:200px;overflow:auto;position:sticky">
      <table mat-table matSort [dataSource]="dataSource" class="mat-elevation-z8" style="width:130%;">
        <ng-container matColumnDef="PaymentMode">
          <th mat-header-cell *matHeaderCellDef style="background-color:#F0F3F5;color:#8FA3B0;font-family: 'proxima-nova', sans-serif;font-size:14px;height:40px">PaymentMode</th>
          <td mat-cell *matCellDef="let element">{{element.PaymentMode}}</td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>
        <ng-container matColumnDef="InstrumentNumber">
          <th mat-header-cell *matHeaderCellDef style="background-color:#F0F3F5;color:#8FA3B0;font-family: 'proxima-nova', sans-serif;font-size:14px;height:40px">Instrument Number</th>
          <td mat-cell *matCellDef="let element">{{element.InstrumentNumber}} </td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>
        <ng-container matColumnDef="InstrumentDate">
          <th mat-header-cell *matHeaderCellDef style="background-color:#F0F3F5;color:#8FA3B0;font-family: 'proxima-nova', sans-serif;font-size:14px;height:40px">Instrument Date</th>
          <td mat-cell *matCellDef="let element">{{element.Instrumentdate| date:'dd/MMM/y'}} </td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>
        <ng-container matColumnDef="BankName">
          <th mat-header-cell *matHeaderCellDef style="background-color:#F0F3F5;color:#8FA3B0;font-family: 'proxima-nova', sans-serif;font-size:14px;height:40px">Bank Name</th>
          <td mat-cell *matCellDef="let element">{{element.BankName}} </td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>
        <ng-container matColumnDef="Branch">
          <th mat-header-cell *matHeaderCellDef style="background-color:#F0F3F5;color:#8FA3B0;font-family: 'proxima-nova', sans-serif;font-size:14px;height:40px">Branch</th>
          <td mat-cell *matCellDef="let element">{{element.BankBranch}} </td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>
        <ng-container matColumnDef="ExpiryDate">
          <th mat-header-cell *matHeaderCellDef style="background-color:#F0F3F5;color:#8FA3B0;font-family: 'proxima-nova', sans-serif;font-size:14px;height:40px">Expiry Date</th>
          <td mat-cell *matCellDef="let element">{{element.Expirydate| date:'dd/MMM/y'}} </td>
          <td mat-footer-cell *matFooterCellDef><strong>Total Amount</strong> </td>
        </ng-container>
        <ng-container matColumnDef="Amount">
          <th mat-header-cell *matHeaderCellDef style="background-color:#F0F3F5;color:#8FA3B0;font-family: 'proxima-nova', sans-serif;font-size:14px;height:40px">Amount( in {{Country2| currency}} )</th>
          <td mat-cell *matCellDef="let element">{{Country2| currency}} {{element.Amount | number : '1.2-2'}} </td>
          <td mat-footer-cell *matFooterCellDef><strong>{{Country2| currency}} {{PTotalAmount | number : '1.2-2'}}</strong> </td>
        </ng-container>
        <ng-container matColumnDef="Action">
          <th mat-header-cell *matHeaderCellDef style="background-color:#F0F3F5;color:#8FA3B0;font-family: 'proxima-nova', sans-serif;font-size:14px;height:40px"> Action </th>-->
      <!--<td mat-cell *matCellDef="let element; let i = index;"> <mat-icon data-toggle="tooltip" title="Select" (click)="removePaytype(i)">delete</mat-icon></td>-->
      <!--<td mat-cell *matCellDef="let element; let i = index;"> <mat-icon data-toggle="tooltip" title="Edit" (click)="EditPaytype(i,element)">create</mat-icon> &nbsp;&nbsp;&nbsp;&nbsp;<mat-icon data-toggle="tooltip" title="Drop" (click)="removePaytype(i)">delete</mat-icon>  </td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true"></tr>
          <tr mat-row *matRowDef="let element;  let even = even; columns: displayedColumns" [ngClass]="{gray: even}"></tr>
          <tr mat-footer-row *matFooterRowDef="displayedColumns;sticky: true"></tr>
        </table>
      </div>

    </div>
  </div>-->



      <div class="col-sm-12" *ngIf="hiddenPayment">
        <div class="card mb-3">
          <h5 class="card-header bg-success text-white">
            Payment details
            <button (click)="AddPaymentDetailsNewgrid();" class="btnuserdefined btn-dark"><i matTooltip="Add Payment Details" class="fa fa-plus"></i></button>
          </h5>

          <div class="card-body">
            <div class="row">
              <table mat-table [dataSource]="dataSource" class="custom-table withoutbackgroung search-table table-bordered">

                <ng-container matColumnDef="PaymentMode">
                  <th mat-header-cell *matHeaderCellDef>Payment Mode</th>
                  <td mat-cell *matCellDef="let element;let id = index;">
                    <mat-form-field appearance="outline">
                      <mat-select (selectionChange)="PaymentChange(id,$event,element)">
                        <mat-option *ngFor="let Paymentsmode of Paymentsmode" [value]="Paymentsmode.Value">
                          {{Paymentsmode.Text}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
                <ng-container matColumnDef="BankName">
                  <th mat-header-cell *matHeaderCellDef>Bank Name</th>
                  <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'">
                    <mat-form-field appearance="outline">
                      <input (blur)="BankName($event,element)" (keypress)="nameField($event)" [disabled]="element.PaymentMode =='Cash'  " maxlength="100" matInput placeholder="Enter BankName" name="BankName" type="text">
                    </mat-form-field>



                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
                <ng-container matColumnDef="InstrumentNumber">
                  <th mat-header-cell *matHeaderCellDef>Instrument Number</th>
                  <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'">
                    <mat-form-field appearance="outline">
                      <input (blur)="InstrumentNumber($event,element)" [disabled]="element.PaymentMode =='Cash'" maxlength="15" (keypress)="numberOnly($event)" matInput placeholder="Enter Instrument Number" name="InstrumentNumber" type="text">
                    </mat-form-field>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
                <ng-container matColumnDef="InstrumentDate">
                  <th mat-header-cell *matHeaderCellDef>Instrument Date</th>
                  <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash' || element.PaymentMode !='Debit card'|| element.PaymentMode !='Credit Card'">
                    <mat-form-field appearance="outline">
                      <input [disabled]="element.PaymentMode =='Cash' || element.PaymentMode =='Debit card'|| element.PaymentMode =='Credit Card' "
                             name="InstrumentDate" autocomplete="off" [min]="maxToDate" matInput [matDatepicker]="InstrumentDate" (dateChange)="dateofinstrument($event,element)" placeholder="InstrumentDate">
                      <mat-datepicker-toggle matSuffix [for]="InstrumentDate"></mat-datepicker-toggle>
                      <mat-datepicker #InstrumentDate></mat-datepicker>
                    </mat-form-field>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
                <ng-container matColumnDef="ExpiryDate">
                  <th mat-header-cell *matHeaderCellDef>Expiry Date</th>
                  <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'|| element.PaymentMode !='Demand Draft' ">
                    <mat-form-field appearance="outline">
                      <input (dateChange)="dateexpiry($event,element)" [disabled]="element.PaymentMode =='Cash'|| element.PaymentMode =='Demand Draft' " autocomplete="off" [min]="MINExpiryDate"
                             name="ExpiryDate" matInput [matDatepicker]="ExpiryDate" placeholder="ExpiryDate" type="datetime">
                      <mat-datepicker-toggle matSuffix [for]="ExpiryDate"></mat-datepicker-toggle>
                      <mat-datepicker #ExpiryDate></mat-datepicker>
                    </mat-form-field>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
                <ng-container matColumnDef="Branch">
                  <th mat-header-cell *matHeaderCellDef>Branch</th>
                  <td mat-cell *matCellDef="let element"
                      [contentEditable]="element.PaymentMode !='Cash'|| element.PaymentMode !='Debit card' || element.PaymentMode !='Credit Card'">
                    <mat-form-field appearance="outline">
                      <input (blur)="Branch($event,element)"
                             [disabled]="element.PaymentMode =='Cash' || element.PaymentMode =='Debit card' || element.PaymentMode =='Credit Card'"
                             (keypress)="nameField($event)" maxlength="50" matInput name="Branch" placeholder="Branch" type="text">
                    </mat-form-field>

                  </td>
                  <td mat-footer-cell *matFooterCellDef>Total</td>
                </ng-container>
                <ng-container matColumnDef="Amount">
                  <th mat-header-cell *matHeaderCellDef>Amount</th>
                  <td mat-cell *matCellDef="let element;let id = index" required (keyup)="Amount(id,'Amount',$event,element)" (keypress)="numberOnly($event)" [contentEditable]="disableRow">
                    {{element.Amount}}

                  </td>
                  <td mat-footer-cell *matFooterCellDef>
                    <strong>
                      {{PTotalAmount1() | number :'1.2-2'}}
                    </strong>
                  </td>
                </ng-container>
                <ng-container matColumnDef="Action">
                  <th mat-header-cell *matHeaderCellDef>Action</th>
                  <td mat-cell *matCellDef="let element;let id = index" [contentEditable]="disableRow">
                    <i class="fas fa-trash-alt icon-delete" title="Delete" (click)="removePaytype(i)"></i>
                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true"></tr>
                <tr mat-row *matRowDef="let element;  let even = even; columns: displayedColumns"></tr>
                <tr mat-footer-row *matFooterRowDef="displayedColumns;"></tr>
              </table>
            </div>
          </div>
        </div>
      </div>





      <!--/////////////////////////////////////////////////////////////////////////////////////////////////////-->





     




      <div class="col-sm-12 pb25">
        <div class="content-right sub-section btn-wrap">
          <button [disabled]="DisableOnSubmit" class="success btn btn-primary" (click)="onSubmit(AdvanceForm)">Submit</button>
          <button class="btn btn-warning-default" (click)="onCancel()"><strong>Cancel</strong></button>
          <button mat-button [disabled]="DisableReprint" (click)="reprint()" class="btn btn-primary">Re print</button>
        </div>
      </div>






    </div>

  </form>
  <!--////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////-->




<!----------------------------------Print Screen----------------------------------------------->
<div id="Printtt" style="display:none">

  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-3"></div>
      <div class="col-sm-6">
        <div style="text-align:center"><strong>{{PCompnayname}}</strong></div>
        <div style="text-align:center"><strong>{{PAddress}}</strong></div>
        <div style="text-align:center"><strong>Phone No:{{Pphone}} &nbsp; Website:{{Pweb}}</strong></div>
      </div>
      <div class="col-sm-3"></div>
    </div>
  </div>

  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-3"></div>
      <div class="col-sm-6">
        <div style="text-align:center"><strong>Receipt</strong></div>
      </div>
    </div>
  </div>

  <div class="col-sm-12" style="margin-top:2%">
    <div class="row">

      <div class="col-sm-4">
        <mat-label style="font-family:'Proxima Nova Semibold'"><strong>Receipt Number &nbsp;</strong></mat-label>
        <mat-label><strong>:&nbsp;</strong></mat-label>
        <mat-label>{{ReceiptNumber}}</mat-label>
      </div>

      <div class="col-sm-4">
        <mat-label style="font-family:'Proxima Nova Semibold'"><strong>Receipt Date & time&nbsp;</strong></mat-label>
        <mat-label><strong>:&nbsp;</strong></mat-label>
        <mat-label>{{ReceiptDatee|date:"dd-MMM-y, HH:mm"}}</mat-label>
      </div>

    </div>
  </div>

  <div class="col-sm-12" style="margin-top:2%">
    <div class="row">

      <div class="col-sm-4">
        <mat-label style="font-family:'Proxima Nova Semibold'"><strong>Patient ID &nbsp;</strong></mat-label>
        <mat-label><strong>:&nbsp;</strong></mat-label>
        <mat-label>{{M_UIN}}</mat-label>
      </div>

      <div class="col-sm-4">
        <mat-label style="font-family:'Proxima Nova Semibold'"><strong>Patient Name&nbsp;</strong></mat-label>
        <mat-label><strong>:&nbsp;</strong></mat-label>
        <mat-label>{{M_Name}} {{M_MiddleName}} {{M_LastName}}</mat-label>
      </div>

      <div class="col-sm-4">
        <mat-label style="font-family:'Proxima Nova Semibold'"><strong>Age / Gender&nbsp;</strong></mat-label>
        <mat-label><strong>:&nbsp;</strong></mat-label>
        <mat-label>{{M_Age}}/{{M_Gender}}</mat-label>
      </div>

    </div>
  </div>

  <div class="col-sm-12" style="margin-bottom:2%">
    <div class="row">
      <div class="col-sm-3">
        <strong>Payment Details</strong>
      </div>
      <div class="col-sm-4"> </div>
    </div>
  </div>

  <div class="col-sm-12">
    <table align="center" style="border-left:3px solid#51b8f2;margin-top:-9px;font-size: 12px" class="table table-bordered">
      <thead>
        <tr>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Sl.No</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Payment Mode</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Instruction No.</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Date</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Bank Name</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Branch Name</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Expiry Date</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let x of commonService.data.paymenttran; index as i">
          <td style="text-align:center">{{i+1}}</td>
          <td style="text-align:center">{{x.PaymentMode}}</td>
          <td style="text-align:center">{{x.InstrumentNumber}}</td>
          <td style="text-align:center">{{x.Instrumentdate| date:"dd-MMM-y"}}</td>
          <td style="text-align:center">{{x.BankName}}</td>
          <td style="text-align:center">{{x.BankBranch}}</td>
          <td style="text-align:center">{{x.Expirydate | date:"dd-MMM-y"}}</td>
          <td style="text-align:center">{{x.Amount| number : '1.2-2'}}</td>
        </tr>
      </tbody>

      <tfoot>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td style="text-align:center">Total Amount</td>
          <td style="text-align:center">{{M_AdvanceAmount| number : '1.2-2'}}</td>
        </tr>
      </tfoot>
    </table>
  </div>

  <div class="col-sm-12" style="margin-top:2%">
    <div class="row">

      <div class="col-sm-6">

        <strong>{{Country2}} in Words :</strong>{{transform(M_AdvanceAmount)}} {{Country2}} only
      </div>
      <div class="col-sm-6"> </div>
    </div>
    <div class="row">
      <div class="col-sm-6">
        <mat-label><strong>Authorized Signatory: &nbsp;</strong></mat-label>
      </div>
    </div>
  </div>

</div>

<!--------------------Print Popup------------------------------------------------------>

<div class="modal" role="dialog" [ngStyle]="{'display':Tesdtpopup}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">

        <button type="button" class="close" data-dismiss="modal" (click)="modalcloseTestOk()">&times;</button>
        <h4 class="modal-title">Do You Want to print ?</h4>
      </div>

      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="modalcloseTestOk()">No</button>
        <button [disabled]="Disableprint" type="reset" class="btn btn-success" data-dismiss="modal" (click)="printTestt()">Yes</button>
      </div>
    </div>
  </div>
</div>


<!--////////////////pop-up(reprint)//////////-->
<div class="modal" role="dialog" [ngStyle]="{'display':modalpreview}">
  <div class="modal-dialog modal-lg" style="width:78%;padding-top:10px">
    <div class="modal-content" style="height:450px">
      <div class="modal-header" >
        <button class="close" (click)="modalSuccesspreview()">&times;</button>
        <h5 class="modal-title">
          <strong>Advance Payment Details</strong>
        </h5>
     </div>

          <div class="col-sm-12 mt10 mb10">
            <div class="row">
              <div class="col-sm-6">
                <span class="uinborder">
                  <strong>{{M_UIN}} / {{M_Name}} {{M_MiddleName}} {{M_LastName}} / {{M_Age}} / {{M_Gender}} </strong>
                </span>
              </div>
              <div class="col-sm-3"></div>
            </div>
          </div>

          <div class="modal-body">

            <div class="col-sm-12" >
              <div class="row">
                <table mat-table matSort [dataSource]="datasourceADVrep" class="custom-table withoutbackgroung search-table table-bordered">



                  <ng-container matColumnDef="REPSlNo">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header > Sl.No </th>
                    <td mat-cell *matCellDef="let element;let i = index;"> {{i+1}} </td>
                  </ng-container>

                  <ng-container matColumnDef="REPReceiptNumber">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header >Receipt Number</th>
                    <td mat-cell *matCellDef="let element">{{element.ReceiptNumber}} </td>
                  </ng-container>

                  <ng-container matColumnDef="REPReceiptDate">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header > Receipt Date & time </th>
                    <td mat-cell *matCellDef="let element"> {{element.ReceiptDate | date:"dd-MMM-y, HH:mm"}} </td>
                  </ng-container>

                  <ng-container matColumnDef="REPAction">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header >Action </th>
                    <td mat-cell *matCellDef="let element">
                      <!--<mat-icon data-toggle="tooltip" title="Edit" (click)="EditADVrep(element)">create</mat-icon> &nbsp;&nbsp;&nbsp;&nbsp;-->
                      <mat-icon  (click)="RePrint(element);" class="grab" data-toggle="Print">local_printshop</mat-icon>
                    </td>
                  </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayedColumnsADVrep;sticky:true"></tr>
                  <tr mat-row *matRowDef="let row;let even = even;columns: displayedColumnsADVrep;" [ngClass]="{gray: even}"></tr>

                </table>

              </div>
            </div>

          </div>
        </div>
      </div>
</div>

<!--////////////////pop-up(reprint edit)//////////-->
<div class="modal" role="dialog" [ngStyle]="{'display':modalpreviewEdit}">
  <div class="modal-dialog modal-lg" style="width:78%;padding-top:10px">
    <div class="modal-content" style="height:450px">
      <div class="modal-header" style="background-color:#51b8f2;color:white;">
        <button class="close" (click)="modalSuccesspreviewEdit()">&times;</button>
        <h5 class="modal-title" style="text-align:center">
          <strong>Advance Payment Details</strong>
        </h5>
      </div>

      <div class="col-sm-12">
        <div class="row">
          <div class="col-sm-1"></div>
          <div class="col-sm-5" style="margin-top: 1%;margin-bottom: 2%;">
            <span style="color:darkblue;font-size:17px;font-family:'Proxima Nova Semibold';border:1px solid gray;padding:10px;border-radius: 16px;">
              <strong>{{M_UIN}} / {{M_Name}} {{M_MiddleName}} {{M_LastName}} / {{M_Age}} / {{M_Gender}} </strong>
            </span>
          </div>
          <div class="col-sm-1"></div>
          <div class="col-sm-4" style="margin-top: 1%;margin-bottom: 2%;">
            <span style="color:darkblue;font-size:17px;font-family:'Proxima Nova Semibold';border:1px solid gray;padding:10px;border-radius: 16px;">
              <strong>ReceiptNumber:{{ReceiptNumberE}}/ReceiptDate:{{ReceiptDateE| date:'dd/MMM/y'}}</strong>
            </span>
          </div>
          <div class="col-sm-1"></div>
        </div>
      </div>


      <div class="modal-body">

        <div class="col-sm-12" style="box-shadow: 0px 10px 8px 1px #888888;height:210px;overflow:auto">
          <div class="row">
            <table mat-table matSort [dataSource]="datasourceADVrePEdit" class="table table-bordered">

              <ng-container matColumnDef="PaymentMode">
                <th mat-header-cell *matHeaderCellDef mat-sort-header style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Payment Mode</th>
                <td mat-cell *matCellDef="let element">{{element.PaymentMode}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="InstrumentNumber">
                <th mat-header-cell *matHeaderCellDef mat-sort-header style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px"> Instrument Number </th>
                <td mat-cell *matCellDef="let element"> {{element.InstrumentNumber}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="Instrumentdate">
                <th mat-header-cell *matHeaderCellDef mat-sort-header style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Instrument date</th>
                <td mat-cell *matCellDef="let element">{{element.Instrumentdate| date:'dd/MMM/y'}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="BankName">
                <th mat-header-cell *matHeaderCellDef mat-sort-header style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px"> Bank Name </th>
                <td mat-cell *matCellDef="let element"> {{element.BankName}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="Expirydate">
                <th mat-header-cell *matHeaderCellDef mat-sort-header style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Expiry date</th>
                <td mat-cell *matCellDef="let element">{{element.Expirydate| date:'dd/MMM/y'}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>

              <ng-container matColumnDef="BankBranch">
                <th mat-header-cell *matHeaderCellDef mat-sort-header style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px"> Bank Branch </th>
                <td mat-cell *matCellDef="let element"> {{element.BankBranch}} </td>
                <td mat-footer-cell *matFooterCellDef><strong>Total Amount</strong> </td>
              </ng-container>

              <ng-container matColumnDef="Amount">
                <th mat-header-cell *matHeaderCellDef style="background-color:#F0F3F5;color:#8FA3B0;font-family: 'proxima-nova', sans-serif;font-size:14px;height:40px">Amount</th>
                <td mat-cell *matCellDef="let element"> {{element.Amount | number : '1.2-2'}} </td>
                <td mat-footer-cell *matFooterCellDef><strong> {{TAmount | number : '1.2-2'}}</strong> </td>
              </ng-container>

              <tr mat-header-row *matHeaderRowDef="displayedColumnsADVrePEdit;sticky:true"></tr>
              <tr mat-row *matRowDef="let row;let even = even;columns: displayedColumnsADVrePEdit;" [ngClass]="{gray: even}"></tr>
              <tr mat-footer-row *matFooterRowDef="displayedColumnsADVrePEdit;sticky: true"></tr>

            </table>

          </div>
        </div>

      </div>
    </div>
  </div>
</div>

<!----------------------------------Print Screen1----------------------------------------------->
<div id="ReprintF" style="display:none">


  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-3"></div>
      <div class="col-sm-6">
        <div style="text-align:center"><strong>{{PCompnayname}}</strong></div>
        <div style="text-align:center"><strong>{{PAddress}}</strong></div>
        <div style="text-align:center"><strong>Phone No:{{Pphone}} &nbsp; Website:{{Pweb}}</strong></div>
      </div>
      <div class="col-sm-3"></div>
    </div>
  </div>

  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-3"></div>
      <div class="col-sm-6">
        <div style="text-align:center"><strong>Receipt</strong></div>
      </div>
    </div>
  </div>

  <div class="col-sm-12" style="margin-top:2%">
    <div class="row">

      <div class="col-sm-4">
        <mat-label style="font-family:'Proxima Nova Semibold'"><strong>Receipt Number &nbsp;</strong></mat-label>
        <mat-label><strong>:&nbsp;</strong></mat-label>
        <mat-label>{{ReceiptNumberF}}</mat-label>
      </div>

      <div class="col-sm-4">
        <mat-label style="font-family:'Proxima Nova Semibold'"><strong>Receipt Date & time &nbsp;</strong></mat-label>
        <mat-label><strong>:&nbsp;</strong></mat-label>
        <mat-label>{{ReceiptDateF|date:"dd-MMM-y, HH:mm"}}</mat-label>
      </div>

    </div>
  </div>

  <div class="col-sm-12" style="margin-top:2%">
    <div class="row">

      <div class="col-sm-4">
        <mat-label style="font-family:'Proxima Nova Semibold'"><strong>Patient ID &nbsp;</strong></mat-label>
        <mat-label><strong>:&nbsp;</strong></mat-label>
        <mat-label>{{M_UIN}}</mat-label>
      </div>

      <div class="col-sm-4">
        <mat-label style="font-family:'Proxima Nova Semibold'"><strong>Patient Name&nbsp;</strong></mat-label>
        <mat-label><strong>:&nbsp;</strong></mat-label>
        <mat-label>{{M_Name}} {{M_MiddleName}} {{M_LastName}}</mat-label>
      </div>

      <div class="col-sm-4">
        <mat-label style="font-family:'Proxima Nova Semibold'"><strong>Age / Gender&nbsp;</strong></mat-label>
        <mat-label><strong>:&nbsp;</strong></mat-label>
        <mat-label>{{M_Age}}/{{M_Gender}}</mat-label>
      </div>

    </div>
  </div>

  <div class="col-sm-12" style="margin-bottom:2%">
    <div class="row">
      <div class="col-sm-3">
        <strong>Payment Details</strong>
      </div>
      <div class="col-sm-4"> </div>
    </div>
  </div>

  <div class="col-sm-12">
    <table align="center" style="border-left:3px solid#51b8f2;margin-top:-9px;font-size: 12px" class="table table-bordered">
      <thead>
        <tr>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Sl.No</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Payment Mode</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Instruction No.</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Date</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Bank Name</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Branch Name</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Expiry Date</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let x of commonService.data.ADVrePF; index as i">
          <td style="text-align:center">{{i+1}}</td>
          <td style="text-align:center">{{x.PaymentMode}}</td>
          <td style="text-align:center">{{x.InstrumentNumber}}</td>
          <td style="text-align:center">{{x.Instrumentdate| date:"dd-MMM-y"}}</td>
          <td style="text-align:center">{{x.BankName}}</td>
          <td style="text-align:center">{{x.BankBranch}}</td>
          <td style="text-align:center">{{x.Expirydate | date:"dd-MMM-y"}}</td>
          <td style="text-align:center">{{x.Amount| number : '1.2-2'}}</td>
        </tr>
      </tbody>

      <tfoot>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td style="text-align:center">Total Amount</td>
          <td style="text-align:center">{{ADVrePFTotalAmount| number : '1.2-2'}}</td>
        </tr>
      </tfoot>
    </table>
  </div>

  <div class="col-sm-12" style="margin-top:2%">
    <div class="row">

      <div class="col-sm-6">
        <strong>{{Country2}} in Words :</strong>{{transform(ADVrePFTotalAmount)}} {{Country2}} only
      </div>
      <div class="col-sm-6"> </div>
    </div>
    <div class="row">
      <div class="col-sm-6"><mat-label><strong>Authorized Signatory: &nbsp;</strong></mat-label>
      </div>
    </div>
    </div>

  </div>

<!--------------------Print Popup------------------------------------------------------>
<div class="modal" role="dialog" [ngStyle]="{'display':Tesdtpopup1}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">

        <button type="button" class="close" data-dismiss="modal" (click)="modalcloseTestOkF()">&times;</button>
        <h4 class="modal-title">Do You Want to print ?</h4>
      </div>

      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="modalcloseTestOkF()">No</button>
        <button type="reset" class="btn btn-success" data-dismiss="modal" (click)="ReprintF()">Yes</button>
      </div>
    </div>
  </div>
</div>




<div class="modal" role="dialog" [ngStyle]="{'display':cancelblock}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content" >
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="modalSuccessClosessss()">&times;</button>
        <h4 class="modal-title">Do you want to cancel?</h4>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="modalcloseOk()">No</button>
        <button type="reset" class="btn btn-success" data-dismiss="modal" (click)="modalSuccesssOk()">Yes</button>
      </div>
    </div>
  </div>
</div>






<div class="modal cust-model" role="dialog" [ngStyle]="{'display':accesspopup}">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="modalcloseAccessOk()">&times;</button>
        <h4 class="modal-title text-left">Advance Payment Details - View Access</h4>
      </div>
      <div class="modal-body">
        <table align="center" class="table custom-table">
          <thead>
            <tr>
              <th>Add</th>
              <th>Edit</th>
              <th>Delete</th>
              <th>Export</th>
              <th>Print</th>

            </tr>
          </thead>
          <tbody>


            <tr *ngFor="let x of accessdata ; index as i">
              <td>
                <mat-checkbox [(checked)]="x.Add" disabled></mat-checkbox>
              </td>
              <td>
                <mat-checkbox [(checked)]="x.Edit" disabled></mat-checkbox>
              </td>
              <td>
                <mat-checkbox [(checked)]="x.Delete" disabled></mat-checkbox>
              </td>
              <td>
                <mat-checkbox [(checked)]="x.Export" disabled></mat-checkbox>
              </td>
              <td>
                <mat-checkbox [(checked)]="x.Print" disabled></mat-checkbox>
              </td>
            </tr>

          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button class="btn btn-success" data-dismiss="modal" autofocus (click)="modalcloseAccessOk()">Ok</button>
      </div>
    </div>
  </div>
</div>












