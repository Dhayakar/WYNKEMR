

<div class="pgtop20-0">

  <form #INVESTIGATIONBILLINGFORM="ngForm">

    <div class="col-sm-12 borfiglau-0">
      <div class="col-sm-12">


        <h5 class="card-header bg-success text-white center">
          Investigation Billing

        </h5>
      </div>

      <div class="col-sm-12 mph-0">
        <div class="row pgleft30-0">
          <div class="col-sm-6 mph-0 pb20">
            <span class="uinborder">
              <strong>{{M_UIN}} / {{M_Name}} {{M_MiddleName}} {{M_LastName}} / {{M_Age}} / {{M_Gender}}</strong>
            </span>
            <button class="btn-text" (click)="Clickschinv()"><i class="fas fa-info-circle"></i> Help</button>
          </div>
          <div class="col-sm-2">

          </div>
          <div class="col-sm-2 mph-0 f-r content-right pb20">
            <button class="btn-text" (click)="Getformaccess()"><i class="fas fa-eye"></i> View Access</button>


          </div>
          <div class="col-sm-2 mph-0 f-r content-right pb20">
            <button class="btn-text" (click)="getPrescdetails()"><i class="fas fa-eye"></i> Unbilled Prescription</button>

          </div>
        </div>
      </div>




      <div class="col-sm-12 mph-0">
        <div class="row mph-0">
          <div class="col-sm-12 mph-0 pgleft30-0" style="margin-left:20px">

            <div class="col-sm-4 mph-0 pb20" [hidden]="!isHiddenpb">
              <mat-label class="fcolor">Prescribed by : </mat-label>
              {{Prescribedname}}
            </div>
            <div class="col-sm-4 mph-0 pb20" [hidden]="!isHiddenpb">
              <mat-label class="fcolor">Prescribed Date : </mat-label>
              {{Prescribeddt | date: 'dd-MMM-y, HH:mm'}}
            </div>
            <div class="col-sm-2 mph-0 f-r content-right pb20">


            </div>

          </div>
        </div>
      </div>

      <div class="container">

        <input id="tab-1" type="radio" name="tabs" checked="checked" />
        <input id="tab-2" type="radio" name="tabs" />

        <div class="tabs">
          <label for="tab-1">Investigation Details</label>
          <label for="tab-2">Payment Details</label>
        </div>

        <div class="content">

          <div class="tab tablewidth">
            <h5 class="card-header bg-success text-white mainvreport-0" [hidden]="!isHiddenin">
              Investigation Details
            </h5>
            <div class="col-sm-12" [hidden]="!isHiddenin">
              <div>
                <div class="col-sm-12 insltab-0">
                  <table mat-table matSort [dataSource]="dataSource1" class="custom-table withoutbackgroung search-table table-bordered">
                    <ng-container matColumnDef="SerialNo">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">S.No</th>
                      <td mat-cell *matCellDef="let j = index"> {{(j+1)}} </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>

                    <ng-container matColumnDef="Serialsymbol">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> SNo </th>
                    </ng-container>



                    <ng-container matColumnDef="Investigation">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Investigation</th>
                      <td mat-cell *matCellDef="let element;let id = index;" contenteditable="false"
                          (keypress)="RestrictValues($event)" (keyup)="changeText(id,'UOM',$event)">
                        {{element.Investigation}}
                      </td>
                      <td mat-footer-cell *matFooterCellDef>Total </td>
                    </ng-container>

                    <ng-container matColumnDef="Investigationsymbol">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Investigation </th>
                    </ng-container>



                    <ng-container matColumnDef="Amount">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Investigation Charges</th>
                      <td style="width:8%" mat-cell *matCellDef="let element;let id = index;" contenteditable="true"
                          (keypress)="RestrictNegativeValues1($event)"
                          (keyup)="changeValues(id,'Amount',$event);changeValueDiscountAmount(id,element,'DiscountAmount')
                          ;changeValueGrossAmount(id,element,'GrossAmount');changeValueTotal(id,element,'TotalCost')
                          ;changeGStAmount(id,element,'GSTAmount');changeCESSAmount(id,element,'CESSAmount')
                          ;changeAdditionalCESSAmount(id,element,'AdditionalCESSAmount')">
                        {{element.Amount|number:'1.2-2'}}
                      </td>
                      <td mat-footer-cell *matFooterCellDef>{{getTotalAmount() | currency:Country2}} </td>
                    </ng-container>

                    <ng-container matColumnDef="Amountsymbol">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">
                        Investigation Charges
                      </th>
                    </ng-container>

                    <ng-container matColumnDef="Discount">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header style="text-align: center">%</th>
                      <td mat-cell *matCellDef="let element;let id = index;" contenteditable="true"
                          (keypress)="RestrictNegativeValues1($event)"
                          (keyup)="Restrict($event);changeValue(id,'Discount',$event);changeValueDiscountAmount(id,element,'DiscountAmount')
                          ;changeValueGrossAmount(id,element,'GrossAmount');changeValueTotal(id,element,'TotalCost');changeGStAmount(id,element,'GSTAmount')
                          ;changeCESSAmount(id,element,'CESSAmount')
                          ;changeAdditionalCESSAmount(id,element,'AdditionalCESSAmount')">
                        {{element.Discount}}
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="DiscountAmount">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header>
                        Amount<br />
                      </th>
                      <td mat-cell *matCellDef="let element;let id = index;" contenteditable="false"
                          (keyup)="changeValue(id,'DiscountAmount',$event);changeDis(id,element);">
                        {{element.DiscountAmount| number : '1.2-2'}}
                      </td>
                      <td mat-footer-cell *matFooterCellDef>{{getTotalDiscountAmount()| currency:Country2}} </td>
                    </ng-container>

                    <ng-container matColumnDef="GrossAmount">
                      <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Gross Amount</th>
                      <td mat-cell *matCellDef="let element;let id = index;" contenteditable="false">{{element.GrossAmount| number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef>{{getTotalGrossAmount()| currency:Country2}} </td>
                    </ng-container>

                    <ng-container matColumnDef="GrossAmountsymbol">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">
                        Gross Amount<br />
                      </th>
                    </ng-container>


                    <ng-container matColumnDef="TaxDescription">
                      <th mat-header-cell *matHeaderCellDef>Description</th>
                      <td mat-cell *matCellDef="let element;let id = index;" contenteditable="false">
                    <tr>
                      <td [ngStyle]="{'font-size': element.TaxDescription == null ? '14px' : '12px'}">
                        <!--<td *ngIf="element.TaxDescription != null">-->
                        {{element.TaxDescription}}

                      </td>
                      <!--<mat-icon (click)="ClickschTax(element)" class="grab" data-toggle="tooltip" title="Search for tax">search</mat-icon>-->
                      <button class="btn-text" (click)="ClickschTax(element)"><i class="fas fa-info-circle"></i></button>
                    </tr>
                    <tr *ngIf="element.CESSDescription != null">
                      <td>
                        {{element.CESSDescription}}
                      </td>
                    </tr>
                    <tr *ngIf="element.AdditionalCESSDescription != null">
                      <td>
                        {{element.AdditionalCESSDescription}}
                      </td>
                    </tr>
                    </td>
                    <td mat-footer-cell *matFooterCellDef></td>
                    </ng-container>



                    <ng-container matColumnDef="GST">
                      <th mat-header-cell *matHeaderCellDef class="width-4p">%</th>
                      <td mat-cell *matCellDef="let element;let id = index;" contenteditable="false">
                        <div>
                    <tr>
                      <td [ngStyle]="{'font-size': element.GST == null ? '14px' : '12px'}">
                        <!--<td *ngIf="element.GST != null">-->
                        {{element.GST}} %
                      </td>
                    </tr>
                    <tr *ngIf="element.CESS != null">
                      <td>
                        {{element.CESS}} %
                      </td>
                    </tr>
                    <tr *ngIf="element.AdditionalCESS != null">
                      <td>
                        {{element.AdditionalCESS}} %
                      </td>
                    </tr>
                </div>
                </td>
                <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>



                <ng-container matColumnDef="GSTValue1">
                  <th mat-header-cell *matHeaderCellDef>Amount</th>
                  <td mat-cell *matCellDef="let element;let id = index;" contenteditable="false">
                    <div>
                      <tr>
                        <td [ngStyle]="{'font-size': element.GSTAmount == null ? '14px' : '12px'}">
                          <!--<td *ngIf="element.GSTAmount != null">-->
                          {{element.GSTAmount | number : '1.2-2'}}
                        </td>
                      </tr>
                      <tr *ngIf="element.CESSAmount != null">
                        <td>
                          {{element.CESSAmount | number : '1.2-2'}}
                        </td>
                      </tr>
                      <tr *ngIf="element.AdditionalCESSAmount != null">
                        <td>
                          {{element.AdditionalCESSAmount  | number : '1.2-2'}}
                        </td>
                      </tr>
                    </div>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> {{GetTaxAmount()| currency:Country2}}</td>
                </ng-container>





                <ng-container matColumnDef="TotalCost">
                  <th mat-header-cell *matHeaderCellDef mat-sort-header [ngStyle]="{'display': 'none'}">Net Amount</th>
                  <td mat-cell *matCellDef="let element ;let id = index;" contenteditable="false">{{element.TotalCost| number : '1.2-2'}}</td>
                  <td mat-footer-cell *matFooterCellDef contenteditable="false">
                    {{getTotalCost()| currency:Country2}}
                  </td>
                </ng-container>


                <ng-container matColumnDef="TotalCostSymbol">
                  <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">
                    Net Amount
                  </th>
                </ng-container>

                <ng-container matColumnDef="Delete">
                  <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}"> Action </th>
                  <td mat-cell *matCellDef="let element; let i = index;"> <mat-icon data-toggle="tooltip" title="Drop" style="color:red" class="grab" (click)="removeDrug(i)">delete</mat-icon></td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>

                <ng-container matColumnDef="Actionymbol">
                  <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">
                    Action
                  </th>
                </ng-container>

                <ng-container matColumnDef="header-row-group">
                  <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> Discount </th>
                </ng-container>


                <ng-container matColumnDef="header-row-third-group1">
                  <th mat-header-cell *matHeaderCellDef [attr.colspan]="3">
                    Tax

                  </th>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="['Serialsymbol','Investigationsymbol',
                        'Amountsymbol','header-row-group','GrossAmountsymbol','header-row-third-group1','TotalCostSymbol','Actionymbol']"></tr>
                <tr mat-header-row *matHeaderRowDef="displayedColumns1; sticky: true"></tr>
                <tr mat-row *matRowDef="let i=index; let element; let row;  let even = even;  columns: displayedColumns1;" [ngClass]="{gray: even}"></tr>
                <tr mat-footer-row *matFooterRowDef="displayedColumns1; sticky: true"></tr>
                </table>
              </div>
            </div>
          </div>
        </div>

        <div class="tab  position-sticky width-100p">

          <div class="col-sm-12 mt-1p">
            <div class="card mb-12">
              <h5 class="card-header bg-success text-white">
                Payment details
                <button (click)="AddPaymentDetailsNewgrid();" class="btnuserdefined btn-dark"><i matTooltip="Add Payment Details" class="fa fa-plus"></i></button>
              </h5>
              <div class="card-body">
                <div class="row heightAuto-300px">
                  <table mat-table [dataSource]="dataSource3" class="custom-table withoutbackgroung search-table table-bordered">

                    <ng-container matColumnDef="PaymentMode">
                      <th mat-header-cell *matHeaderCellDef>Payment Mode</th>
                      <td mat-cell *matCellDef="let element;let id = index;">
                        <mat-form-field appearance="outline">
                          <mat-select (selectionChange)="PaymentChange(id,$event,element)">
                            <mat-option *ngFor="let Paymentsmode of Paymentsmodes" [value]="Paymentsmode.Value">
                              {{Paymentsmode.Text}}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="BankName">
                      <th mat-header-cell *matHeaderCellDef>Bank Name</th>
                      <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'">
                        <mat-form-field appearance="outline">
                          <input (blur)="BankName($event,element)" (keypress)="nameField($event)" [disabled]="element.PaymentMode =='Cash'  " maxlength="100" matInput placeholder="Enter BankName" name="BankName" type="text">
                        </mat-form-field>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="InstrumentNumber">
                      <th mat-header-cell *matHeaderCellDef>Instrument Number</th>
                      <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'">
                        <mat-form-field appearance="outline">
                          <input (blur)="InstrumentNumber($event,element)" [disabled]="element.PaymentMode =='Cash'" maxlength="15" (keypress)="numberOnly($event)" matInput placeholder="Enter Instrument Number" name="InstrumentNumber" type="text">
                        </mat-form-field>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="InstrumentDate">
                      <th mat-header-cell *matHeaderCellDef>Instrument Date</th>
                      <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash' || element.PaymentMode !='Debit card'|| element.PaymentMode !='Credit Card'">
                        <mat-form-field appearance="outline">
                          <input [disabled]="element.PaymentMode =='Cash' || element.PaymentMode =='Debit card'|| element.PaymentMode =='Credit Card' "
                                 name="InstrumentDate" autocomplete="off" [min]="maxToDate" matInput [matDatepicker]="InstrumentDate" (dateChange)="dateofinstrument($event,element)" placeholder="InstrumentDate">
                          <mat-datepicker-toggle matSuffix [for]="InstrumentDate"></mat-datepicker-toggle>
                          <mat-datepicker #InstrumentDate></mat-datepicker>
                        </mat-form-field>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="ExpiryDate">
                      <th mat-header-cell *matHeaderCellDef>Expiry Date</th>
                      <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'|| element.PaymentMode !='Demand Draft' ">
                        <mat-form-field appearance="outline">
                          <input (dateChange)="dateexpiry($event,element)" [disabled]="element.PaymentMode =='Cash'|| element.PaymentMode =='Demand Draft' " autocomplete="off" [min]="MINExpiryDate"
                                 name="ExpiryDate" matInput [matDatepicker]="ExpiryDate" placeholder="ExpiryDate" type="datetime">
                          <mat-datepicker-toggle matSuffix [for]="ExpiryDate"></mat-datepicker-toggle>
                          <mat-datepicker #ExpiryDate></mat-datepicker>
                        </mat-form-field>
                      </td>
                      <td mat-footer-cell *matFooterCellDef><b>Total</b></td>
                    </ng-container>
                    <ng-container matColumnDef="Branch">
                      <th mat-header-cell *matHeaderCellDef>Branch</th>
                      <td mat-cell *matCellDef="let element"
                          [contentEditable]="element.PaymentMode !='Cash'|| element.PaymentMode !='Debit card' || element.PaymentMode !='Credit Card'">
                        <mat-form-field appearance="outline">
                          <input (blur)="Branch($event,element)"
                                 [disabled]="element.PaymentMode =='Cash' || element.PaymentMode =='Debit card' || element.PaymentMode =='Credit Card'"
                                 (keypress)="nameField($event)" maxlength="50" matInput name="Branch" placeholder="Branch" type="text">
                        </mat-form-field>

                      </td>
                      <td mat-footer-cell *matFooterCellDef></td>
                    </ng-container>
                    <ng-container matColumnDef="Amount">
                      <th mat-header-cell *matHeaderCellDef>Amount</th>
                      <td mat-cell *matCellDef="let element;let id = index" required (keyup)="Amount(id,'Amount',$event,element)" (keypress)="numberOnly($event)" [contentEditable]="disableRow">
                        {{element.Amount | number :'1.2-2'}}

                      </td>
                      <td mat-footer-cell *matFooterCellDef>
                        <strong>
                          {{PTotalAmount1() | currency:Country2}}
                        </strong>
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="Action">
                      <th mat-header-cell *matHeaderCellDef>Action</th>
                      <td mat-cell *matCellDef="let element;let id = index" [contentEditable]="disableRow">
                        <i class="fas fa-trash-alt icon-delete" title="Delete" (click)="removePaytype(i)"></i>
                      </td>
                      <td mat-footer-cell *matFooterCellDef></td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns3;sticky: true"></tr>
                    <tr mat-row *matRowDef="let element;  let even = even; columns: displayedColumns3"></tr>
                    <tr mat-footer-row *matFooterRowDef="displayedColumns3;"></tr>
                  </table>
                </div>
              </div>
            </div>
          </div>
         
        </div>


      </div>

    </div>



</div>








<!--<div class="col-sm-12">
  <div class="row" style="margin-top: 1%; margin-bottom: 2%">
    <div class="col-sm-5">
    </div>
    <div class="col-sm-4">

      <button style="font-size:17px;margin-right:1%" [disabled]="DisableOnSubmit" class="btn btn-success" (click)="onSubmit(INVESTIGATIONBILLINGFORM)">Submit</button>
      <button class="btn btn-warning" style="font-size:17px;color:orange;background-color:white;" (click)="onCancel()">Cancel</button>
      <button class="btn btn-primary" style="font-size:17px;" (click)="ClickIm()">Print</button>

    </div>
    <div class="col-sm-3">
    </div>
  </div>
</div>-->

<div class="col-sm-12 m-3">
  <div class="col-sm-12 pb25">
    <div class="col-sm-4  sub-section btn-wrap f-r">
      <button type="button" class="btn btn-warning-default" (click)="onCancel()"> Cancel </button>

      <button type="submit" class="success btn btn-primary  ml-2p" [disabled]="disSubmit" (click)="onSubmit(INVESTIGATIONBILLINGFORM)">
        Submit
      </button>
      <button class="success btn btn-primary  ml-2p" (click)="ClickIm()">Print</button>
    </div>
  </div>
</div>


  </form>

</div>







<!--popup-->
<div class="modal" role="dialog" [ngStyle]="{'display':modalsfi}">
  <div class="modal-dialog modal-lg itempopup">

    <div class="modal-content">




      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="modalSuccessfi()">&times;</button>

        <h5 class="card-header bg-success text-white center">
          Unbilled Prescription
        </h5>
      </div>


      <div class="modal-body">


        <div class="col-sm-12">
          <div class="row">

            <div class="col-sm-1"></div>

            <div class="col-sm-7">

              <span class="uinborder">
                <strong>{{M_UIN}} / {{M_Name}} {{M_MiddleName}} {{M_LastName}} / {{M_Age}} / {{M_Gender}}</strong>
              </span>

            </div>
          </div>
        </div>

        <div class="row">

          <div class="col-sm-12 custpopht-0" #table>



            <table align="center" class="custom-table withoutbackgroung search-table table-bordered">
              <thead>
                <tr>
                  <th>Action</th>
                  <th>Prescribed date</th>
                  <th>Prescribed by</th>
                  <th>Remarks</th>
                </tr>
              </thead>
              <tbody>

                <tr *ngFor="let hi of bills; index as i">

                  <td><mat-radio-button (click)="selecttyp(hi)"></mat-radio-button></td>
                  <td>{{hi.PrescribedDate | date: 'dd-MMM-y, HH:mm'}}</td>
                  <td>{{hi.PrescribedBy}}</td>
                  <td>{{hi.Remarks}}</td>
                </tr>


              </tbody>
            </table>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>


<div class="modal" role="dialog" [ngStyle]="{'display':InvIPBillPopUp}">
  <div class="modal-dialog modal-lg">
    <div class="modal-content heightAuto-450px">

      <div class="modal-header">
        <button class="close" (click)="InvIPBillPopUpClose()">&times;</button>
        <h5 class="modal-title" style="text-align:center">
          <strong>Patient Details</strong>
        </h5>
      </div>
      <div class="modal-body">
        <div class="col-sm-12 tableoverflowheight">
          <div class="row">
            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Filter</mat-label>
                <input id="myInputr" type="text" matInput placeholder="Search">
              </mat-form-field>
            </div>
          </div>
          <div class="row">
            <table align="center" class="custom-table withoutbackgroung search-table table-bordered">
              <thead>
                <tr>
                  <th>Action</th>
                  <th>UIN</th>
                  <th>Name</th>
                  <th>Age</th>
                  <th>Gender</th>
                </tr>
              </thead>
              <tbody id="myTabler">
                <tr *ngFor="let element of GetRegDetails; index as i">
                  <td><mat-checkbox [(ngModel)]="element.checked" (click)="selecttype(element)"></mat-checkbox></td>
                  <td>{{element.UIN}}</td>
                  <td>{{element.Name}} {{element.MiddleName}} {{element.LastName}}</td>
                  <td>{{element.Age}}</td>
                  <td>{{element.Gender}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!--////////////////pop-upTAX//////////-->
<div class="modal" role="dialog" [ngStyle]="{'display':InvIPBillPopUpTax}">
  <div class="modal-dialog modal-lg">
    <div class="modal-content invbiltaxpop-0">

      <div class="modal-header">
        <button class="close" (click)="InvIPBillPopUpCloseTax()">&times;</button>

        <h5 class="modal-title" style="text-align:center">
          <strong>Tax Details</strong>
        </h5>
      </div>
      <div class="modal-body">
        <div class="col-sm-12 vatab-0">
          <div class="row">
            <table align="center" class="custom-table withoutbackgroung search-table table-bordered">
              <thead>
                <tr>
                  <th>Action</th>
                  <th>Tax Description</th>
                  <th>Tax Percentage</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let element of GetTaxDetails; index as i">
                  <td><mat-checkbox [(ngModel)]="element.checked" (click)="selectTax(element)"></mat-checkbox></td>
                  <td>{{element.TaxDescription}}</td>
                  <td>{{element.GSTPercentage}}</td>

                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



<div class="modal" role="dialog" [ngStyle]="{'display':modalpurchase}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <div class="col-sm-12">
          <div class="row">
            <div class="col-sm-11">
              <h4 class="modal-title">Investigation Bill</h4>
            </div>

          </div>
        </div>


      </div>
      <div class="modal-body">
        <div class="row form-horizontal">
          <div class="form-group">
            <label class="control-label col-sm-6">Bill Number:</label>
            <label class="control-label col-sm-4">{{billno}}</label>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success" data-dismiss="modal" (click)="modalSuccessssspurchaseOk()">Ok</button>
      </div>
    </div>
  </div>
</div>



<div class="modal" role="dialog" [ngStyle]="{'display':purchaseprint}">
  <div class="example-box" cdkDrag>
    <div class="modal-dialog modal-lg diaclosmodal">
      <div class="modal-content">
        <div class="modal-header">
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-11">
                <h4 class="modal-title">Information</h4>
              </div>
            </div>

          </div>
        </div>
        <div class="modal-body">
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-1">
              </div>
              <div class="col-sm-10">
                <h5 class="modal-title center">Do you want to Print?</h5>
              </div>
              <div class="col-sm-1">
              </div>
            </div>
          </div>
        </div>

        <div class="modal-footer">

          <button (click)="printsss()" class="btn btn-primary">Yes</button>
          <button type="button" id="theButton" class="btn btn-danger" data-dismiss="modal" (click)="printclose()" cdkFocusInitial>No</button>

        </div>


      </div>
    </div>
  </div>
</div>


<!--print-->

<div id="printss" style="display:none">

  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-6">
        <label style="font-size:16px"><strong>{{cname}}</strong> </label>
      </div>
      <div class="col-sm-2"></div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-6"> <label> {{caddres}}</label></div>
      <div class="col-sm-2"></div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-4"> <label>Tel-{{cph}},- {{cwe}}</label></div>
      <div class="col-sm-4"></div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-4"><label style="text-align:center"></label></div>
      <div class="col-sm-4"></div>
    </div>
  </div>

  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-4"> <strong>Investigation Billing</strong></div>
      <div class="col-sm-4"></div>
    </div>
  </div>

  <hr>



  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-3">
        <div class="row">
          <label>Patient ID:<strong>{{uinn}}</strong></label>
        </div>
        <div class="row">
          <label>Patient Name:<strong>{{name}}</strong></label>
        </div>
        <div class="row">
          <label>Age / Gender:<strong>{{age}}yrs/{{gender}}</strong></label>
        </div>
        <div class="row">
          <label>Phone NO:<strong>{{phone}}</strong></label>
        </div>
      </div>
      <div class="col-sm-6"></div>
      <div class="col-sm-3">
        <div class="row">
          <label>Invoice Number:<strong>{{billno}}</strong></label>
        </div>
        <div class="row">
          <label>Invoice Date:<strong>{{billdt|date:"dd-MMM-y"}}</strong></label>
        </div>
      </div>
    </div>
  </div>

  <div class="col-sm-12" style="margin-bottom:2%">
    <div class="row">
      <div class="col-sm-3"> </div>
      <div class="col-sm-2"> </div>
      <div class="col-sm-3">
        <strong>Billing Details</strong>
      </div>
      <div class="col-sm-4"> </div>
    </div>
  </div>

  <div class="col-sm-12">

    <table mat-table matSort [dataSource]="dataSourcesp" class="table table-bordered" style="font-family:'Proxima Nova Semibold';font-size:17px;width: 100%;">

      <ng-container matColumnDef="Investigation">
        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}" style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:17px;height:20px;width:5%">Investigation</th>
        <td mat-cell *matCellDef="let element ;let i = index;" style="color: #212121;font-family: 'Proxima Nova Semibold';font-size: 15px;text-align: left">{{element.Description}}</td>
        <td mat-footer-cell *matFooterCellDef style="text-align:left"></td>
      </ng-container>

      <ng-container matColumnDef="Investigations">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" style="border: none; background-color: #F0F3F5; color: #8FA3B0; font-family:'Proxima Nova Semibold';font-size:17px; text-align: center; padding-bottom: 20px; width: 5%;"> Investigation </th>
      </ng-container>

      <ng-container matColumnDef="InvestigationCharges">
        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}" style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:17px;height:20px;width:5%">Investigation Charges</th>
        <td mat-cell *matCellDef="let element ;let i = index;" style="color: #212121;font-family: 'Proxima Nova Semibold';font-size: 15px;text-align: right">{{element.value| number : '1.2-2'}}</td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container matColumnDef="InvestigationChargess">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" style="border: none; background-color: #F0F3F5; color: #8FA3B0; font-family:'Proxima Nova Semibold';font-size:17px; text-align: center; padding-bottom: 20px; width: 5%;"> Investigation Charges </th>
      </ng-container>



      <ng-container matColumnDef="Discount(%)">
        <th mat-header-cell *matHeaderCellDef style="background-color: #F0F3F5;color: #8FA3B0;font-family: 'Proxima Nova Semibold';font-size: 17px;height: 20px;text-align: center;width:3%;">
          %
        </th>
        <td mat-cell *matCellDef="let element;let id = index;" style="color:#212121;font-family:'Proxima Nova Semibold';font-size:15px;text-align:right">{{element.discount | number : '1.2-2'}}</td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="DiscountValue">
        <th mat-header-cell *matHeaderCellDef style="    background-color: #F0F3F5;
    color: #8FA3B0;
    font-family: 'Proxima Nova Semibold';
    font-size: 17px;
    height: 20px;
    text-align: center;
    width: 3%;">
          Amount
        </th>
        <td mat-cell *matCellDef="let element;let id = index;" style="color: #212121;font-family: 'Proxima Nova Semibold';font-size: 15px;text-align: right">{{element.dvalue | number : '1.2-2'}}</td>
        <td mat-footer-cell *matFooterCellDef style="background-color: white; color: black; font-family: 'Proxima Nova Semibold'; font-size: 15px; text-align: right"></td>
      </ng-container>




      <ng-container matColumnDef="TaxDescription">
        <th mat-header-cell *matHeaderCellDef style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;text-align:center;width:5%;">Description</th>
        <td mat-cell *matCellDef="let element;let id = index;" style="text-align: right;" contenteditable="false">
          <div style="text-align:left;height: 65px">
            <div *ngIf="element.TaxDescription != null" style="font-size:15px;height:4px">
              {{element.TaxDescription}}
            </div>
            <br />
            <div *ngIf="element.CessDescription != null" style="font-size:15px;height:4px">
              {{element.CessDescription}}
            </div>
            <br />
            <div *ngIf="element.AddcessDescription != null" style="font-size:15px;;height:4px">
              {{element.AddcessDescription}}
            </div>
          </div>
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>


      <ng-container matColumnDef="GST">
        <th mat-header-cell *matHeaderCellDef style="width: 2%;background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;text-align:center;width: 3%;">%</th>
        <td mat-cell *matCellDef="let element;let id = index;" style="text-align: right;" contenteditable="false">
          <div style="text-align: right;height: 65px;">
            <div *ngIf="element.gst != null" style="font-size:15px;height:4px">
              {{element.gst | number : '1.2-2'}}
            </div>
            <br />
            <div *ngIf="element.cess != null" style="font-size:15px;height:4px">
              {{element.cess | number : '1.2-2'}}
            </div>
            <br />
            <div *ngIf="element.addcess != null" style="font-size:15px;height:4px">
              {{element.addcess | number : '1.2-2'}}
            </div>
          </div>
        </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="GSTValue">
        <th mat-header-cell *matHeaderCellDef style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;text-align:center;width: 5%;">
          <div style="height: 13px;margin-top: -11px;">
            Amount
          </div><br />
          <div style="height: 8px;margin-top: -15px;">

          </div>
        </th>
        <td mat-cell *matCellDef="let element;let id = index;" style="text-align: end;width:1%;padding: 5px;" contenteditable="false">
          <div style="text-align:right;height: 65px;">
            <div *ngIf="element.gstvalue != null" style="font-size:17px;height:4px">
              {{element.gstvalue | number : '1.2-2'}}
            </div>
            <br />
            <div *ngIf="element.cessvalue != null" style="font-size:17px;height:4px">
              {{element.cessvalue | number : '1.2-2'}}
            </div>
            <br />
            <div *ngIf="element.addcessvalue != null" style="font-size:17px;height:4px">
              {{element.addcessvalue | number : '1.2-2'}}
            </div>
          </div>
        </td>
        <td mat-footer-cell *matFooterCellDef><strong>Total Amount</strong></td>
      </ng-container>


      <ng-container matColumnDef="TotalAmount">
        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}" style="background-color: #F0F3F5;color:#8FA3B0;font-family: 'Proxima Nova Semibold';font-size: 17px;height: 20px;width:5%">
          Total Amount
        </th>
        <td mat-cell *matCellDef="let element;let id = index;" style="color:#212121;font-family:'Proxima Nova Semibold';font-size:15px;text-align:right">{{element.total | number : '1.2-2'}}</td>
        <td mat-footer-cell *matFooterCellDef style="background-color: white; color: black; font-family: 'Proxima Nova Semibold'; font-size: 15px; text-align: right">{{printTotalAmount() | currency:Country2}}</td>
      </ng-container>

      <ng-container matColumnDef="TotalAmounts">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" style="border:none;background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:17px;text-align:center;padding-bottom: 20px;width: 5%;"> Total Amount </th>
      </ng-container>


      <ng-container matColumnDef="header-row-group">
        <th mat-header-cell *matHeaderCellDef [attr.colspan]="2" style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:17px;text-align:center"> Discount </th>
      </ng-container>

      <ng-container matColumnDef="header-row-third-group">
        <th mat-header-cell *matHeaderCellDef [attr.colspan]="3" style="text-align: end;background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;text-align:center"> Tax </th>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="['Investigations','InvestigationChargess','header-row-group','header-row-third-group','TotalAmounts']"></tr>
      <tr mat-header-row *matHeaderRowDef="displayedColumnssp;sticky:true"></tr>
      <tr mat-row *matRowDef="let row;  let even = even;columns: displayedColumnssp;" [ngClass]="{gray: even}"></tr>
      <tr mat-footer-row *matFooterRowDef="displayedColumnssp;sticky: true"></tr>

    </table>








  </div>

  <div class="col-sm-12" style="margin-bottom:2%">
    <div class="row">
      <div class="col-sm-3"> </div>
      <div class="col-sm-2"> </div>
      <div class="col-sm-3">
        <strong>Payment Details</strong>
      </div>
      <div class="col-sm-4"> </div>
    </div>
  </div>
  <div class="col-sm-12">
    <table align="center" style="border-left:3px solid#51b8f2;margin-top:-9px;font-size: 12px" class="table table-bordered">
      <thead>
        <tr>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Sl.No</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Payment Mode</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Instruction No.</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Date</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Bank Name</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Branch Name</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Expiry Date</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let x of payment; index as i">
          <td style="text-align:center">{{i+1}}</td>
          <td style="text-align:center">{{x.paymode}}</td>
          <td style="text-align:center">{{x.instno}}</td>
          <td style="text-align:center">{{x.instdt| date:"dd-MMM-y"}}</td>
          <td style="text-align:center">{{x.bname}}</td>
          <td style="text-align:center">{{x.branch}}</td>
          <td style="text-align:center">{{x.expiry| date:"dd-MMM-y"}}</td>
          <td style="text-align:center">{{x.amount| number : '1.2-2'}}</td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td style="text-align:center;font-family: 'Proxima Nova Semibold'; font-size: 15px;"><strong>Total Amount</strong></td>
          <td style="text-align:center">{{payamt | currency:Country2}}</td>
        </tr>
      </tfoot>
    </table>
  </div>



  <div class="col-sm-12" style="margin-top:2%">
    <div class="row">

      <div class="col-sm-6">
        <strong>Rupees (in Words) :{{transform(totamt)}}s &nbsp;only</strong>
      </div>
      <div class="col-sm-6"> </div>
    </div>
  </div>

</div>



<div class="modal" role="dialog" [ngStyle]="{'display':accesspopup}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content accpop-0">
      <div class="modal-header">
        <h4 class="modal-title">Investigation Billing - View Access</h4>
      </div>
      <div class="modal-body sltpop-0">
        <table align="center" class="custom-table withoutbackgroung search-table table-bordered">
          <thead>
            <tr>
              <th>Add</th>
              <th>Edit</th>
              <th>Delete</th>
              <th>Export</th>
              <th>Print</th>

            </tr>
          </thead>
          <tbody>


            <tr *ngFor="let x of accessdata; index as i">
              <td><mat-checkbox [(checked)]="x.Add" disabled></mat-checkbox></td>
              <td><mat-checkbox [(checked)]="x.Edit" disabled></mat-checkbox></td>
              <td><mat-checkbox [(checked)]="x.Delete" disabled></mat-checkbox></td>
              <td><mat-checkbox [(checked)]="x.Export" disabled></mat-checkbox></td>
              <td><mat-checkbox [(checked)]="x.Print" disabled></mat-checkbox></td>
            </tr>

          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button class="btn btn-success" data-dismiss="modal" autofocus (click)="modalcloseAccessOk()">Ok</button>
      </div>
    </div>
  </div>
</div>




<div class="modal" role="dialog" [ngStyle]="{'display':modalop}">
  <div class="modal-dialog modal-lg" style="width:100%;padding-top:10px;padding-left:290px">

    <div class="modal-content">


      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="modalSuccessop()">&times;</button>
        <h5 class="modal-title" style="text-align:center">
          <strong>List Of Investigation Bills</strong>
        </h5>

      </div>


      <div class="modal-body">

        <div style="overflow:auto; height:350px">

          <div class="col-sm-4">

          </div>


          <table align="center" style="border-left:3px solid#51b8f2;font-family:'Proxima Nova';font-size:14px;" class="table table-bordered">
            <thead>
              <tr>
                <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px;text-align:center">Action</th>
                <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px;text-align:center">UIN</th>
                <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px;text-align:center">Name </th>
                <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px;text-align:center">Bill No</th>
                <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px;text-align:center">Bill Date</th>
              </tr>
            </thead>
            <tbody>

              <tr *ngFor="let hi of reprint; index as i">

                <td style="text-align:center" (click)="selecttypes($event,hi)">
                  <button mat-icon-button>
                    <mat-icon style="font-size: 25px;color:deepskyblue" class="grab" data-toggle="tooltip" title="Print">local_printshop</mat-icon>
                  </button>
                </td>
                <td style="text-align:center;font-family:'Proxima Nova Semibold';font-size:14px;">{{hi.UIN}}</td>
                <td style="text-align:center;font-family:'Proxima Nova Semibold';font-size:14px;">{{hi.Name}}</td>
                <td style="text-align:center;font-family:'Proxima Nova Semibold';font-size:14px;">{{hi.BillNo}}</td>
                <td style="text-align:center;font-family:'Proxima Nova Semibold';font-size:14px;">{{hi.BillDate| date:"dd-MMM-y"}}</td>
              </tr>


            </tbody>
          </table>



        </div>


      </div>

    </div>
  </div>
</div>




<div class="modal" role="dialog" [ngStyle]="{'display':purchaseprintp}">
  <div class="example-box" cdkDrag>
    <div class="modal-dialog modal-lg diaclosmodal">
      <div class="modal-content">
        <div class="modal-header">
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-11">
                <h4 class="modal-title">Information</h4>
              </div>
            </div>

          </div>
        </div>
        <div class="modal-body">
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-1">
              </div>
              <div class="col-sm-10">
                <h5 class="modal-title center">Do you want to Print?</h5>
              </div>
              <div class="col-sm-1">
              </div>
            </div>
          </div>
        </div>

        <div class="modal-footer">

          <button (click)="printsssp()" class="btn btn-primary">Yes</button>
          <button type="button" id="theButton" class="btn btn-danger" data-dismiss="modal" (click)="printclosep()" cdkFocusInitial>No</button>

        </div>


      </div>
    </div>
  </div>
</div>




<div id="printssp" style="display:none">

  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-6">
        <label style="font-size:16px"><strong>{{cnamep}}</strong> </label>
      </div>
      <div class="col-sm-2"></div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-6"> <label> {{caddresp}}</label></div>
      <div class="col-sm-2"></div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-4"> <label>Tel-{{cphp}},- {{cwep}}</label></div>
      <div class="col-sm-4"></div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-4"><label style="text-align:center"></label></div>
      <div class="col-sm-4"></div>
    </div>
  </div>


  <hr>



  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-3">
        <div class="row">
          <label>Patient ID:<strong>{{uinnp}}</strong></label>
        </div>
        <div class="row">
          <label>Patient Name:<strong>{{namep}}</strong></label>
        </div>
        <div class="row">
          <label>Age / Gender:<strong>{{agep}}/{{genderp}}</strong></label>
        </div>
        <div class="row">
          <label>Phone NO:<strong>{{phonep}}</strong></label>
        </div>
      </div>
      <div class="col-sm-6"></div>
      <div class="col-sm-3">
        <div class="row">
          <label>Invoice Number:<strong>{{billnop}}</strong></label>
        </div>
        <div class="row">
          <label>Invoice Date:<strong>{{billdtp|date:"dd-MMM-y"}}</strong></label>
        </div>
      </div>
    </div>
  </div>

  <div class="col-sm-12" style="margin-bottom:2%">
    <div class="row">
      <div class="col-sm-3"> </div>
      <div class="col-sm-2"> </div>
      <div class="col-sm-3">
        <strong>Billing Details</strong>
      </div>
      <div class="col-sm-4"> </div>
    </div>
  </div>

  <div class="col-sm-12">
    <!--<table align="center" style="border-left:3px solid#51b8f2;margin-top:-9px;font-size: 12px" class="table table-bordered">
      <thead>
        <tr>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Sl.No</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Investigation</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Investigation Charges</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Discount Value</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Tax value</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">CESS value</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">AddCESS value</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">NET Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let x of investp; index as i">
          <td style="text-align:center">{{i+1}}</td>
          <td style="text-align:center">{{x.Descriptionp}}</td>
          <td style="text-align:center">{{x.valuep| number : '1.2-2'}}</td>
          <td style="text-align:center">{{x.dvaluep| number : '1.2-2'}}</td>
          <td style="text-align:center">{{x.gstvaluep| number : '1.2-2'}}</td>
          <td style="text-align:center">{{x.cessvaluep| number : '1.2-2'}}</td>
          <td style="text-align:center">{{x.addcessvaluep| number : '1.2-2'}}</td>
          <td style="text-align:center">{{x.totalp| number : '1.2-2'}}</td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td style="text-align:center"></td>
          <td style="text-align:center">Total</td>
          <td style="text-align:center">{{provaluep| number : '1.2-2'}}</td>
          <td style="text-align:center">{{disvaluep| number : '1.2-2'}}</td>
          <td style="text-align:center">{{taxvaluep| number : '1.2-2'}}</td>
          <td style="text-align:center">{{cessp| number : '1.2-2'}}</td>
          <td style="text-align:center">{{acessp| number : '1.2-2'}}</td>
          <td style="text-align:center">{{totamtp| number : '1.2-2'}}</td>
        </tr>
      </tfoot>
    </table>-->

    <table mat-table matSort [dataSource]="dataSourcespp" class="table table-bordered" style="font-family:'Proxima Nova Semibold';font-size:17px;width: 100%;">

      <ng-container matColumnDef="Investigation">
        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}" style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:17px;height:20px;width:5%">Investigation</th>
        <td mat-cell *matCellDef="let element ;let i = index;" style="color: #212121;font-family: 'Proxima Nova Semibold';font-size: 15px;text-align: left">{{element.Descriptionp}}</td>
        <td mat-footer-cell *matFooterCellDef style="text-align:left"></td>
      </ng-container>

      <ng-container matColumnDef="Investigations">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" style="border: none; background-color: #F0F3F5; color: #8FA3B0; font-family:'Proxima Nova Semibold';font-size:17px; text-align: center; padding-bottom: 20px; width: 5%;"> Investigation </th>
      </ng-container>

      <ng-container matColumnDef="InvestigationCharges">
        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}" style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:17px;height:20px;width:5%">Investigation Charges</th>
        <td mat-cell *matCellDef="let element ;let i = index;" style="color: #212121;font-family: 'Proxima Nova Semibold';font-size: 15px;text-align: right">{{element.valuep| number : '1.2-2'}}</td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container matColumnDef="InvestigationChargess">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" style="border: none; background-color: #F0F3F5; color: #8FA3B0; font-family:'Proxima Nova Semibold';font-size:17px; text-align: center; padding-bottom: 20px; width: 5%;"> Investigation Charges</th>
      </ng-container>



      <ng-container matColumnDef="Discount(%)">
        <th mat-header-cell *matHeaderCellDef style="background-color: #F0F3F5;color: #8FA3B0;font-family: 'Proxima Nova Semibold';font-size: 17px;height: 20px;text-align: center;width:3%;">
          %
        </th>
        <td mat-cell *matCellDef="let element;let id = index;" style="color:#212121;font-family:'Proxima Nova Semibold';font-size:15px;text-align:right">{{element.discountp | number : '1.2-2'}}</td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="DiscountValue">
        <th mat-header-cell *matHeaderCellDef style="    background-color: #F0F3F5;
    color: #8FA3B0;
    font-family: 'Proxima Nova Semibold';
    font-size: 17px;
    height: 20px;
    text-align: center;
    width: 3%;">
          Amount
        </th>
        <td mat-cell *matCellDef="let element;let id = index;" style="color: #212121;font-family: 'Proxima Nova Semibold';font-size: 15px;text-align: right">{{element.dvaluep | number : '1.2-2'}}</td>
        <td mat-footer-cell *matFooterCellDef style="background-color: white; color: black; font-family: 'Proxima Nova Semibold'; font-size: 15px; text-align: right"></td>
      </ng-container>




      <ng-container matColumnDef="TaxDescription">
        <th mat-header-cell *matHeaderCellDef style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;text-align:center;width:5%;">Description</th>
        <td mat-cell *matCellDef="let element;let id = index;" style="text-align: right;" contenteditable="false">
          <div style="text-align:left;height: 65px">
            <div *ngIf="element.TaxDescriptionp != null" style="font-size:15px;height:4px">
              {{element.TaxDescriptionp}}
            </div>
            <br />
            <div *ngIf="element.CessDescriptionp != null" style="font-size:15px;height:4px">
              {{element.CessDescriptionp}}
            </div>
            <br />
            <div *ngIf="element.AddcessDescriptionp != null" style="font-size:15px;;height:4px">
              {{element.AddcessDescriptionp}}
            </div>
          </div>
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>


      <ng-container matColumnDef="GST">
        <th mat-header-cell *matHeaderCellDef style="width: 2%;background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;text-align:center;width: 3%;">%</th>
        <td mat-cell *matCellDef="let element;let id = index;" style="text-align: right;" contenteditable="false">
          <div style="text-align: right;height: 65px;">
            <div *ngIf="element.gstp != null" style="font-size:15px;height:4px">
              {{element.gstp | number : '1.2-2'}}
            </div>
            <br />
            <div *ngIf="element.cessp != null" style="font-size:15px;height:4px">
              {{element.cessp | number : '1.2-2'}}
            </div>
            <br />
            <div *ngIf="element.addcessp != null" style="font-size:15px;height:4px">
              {{element.addcessp | number : '1.2-2'}}
            </div>
          </div>
        </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="GSTValue">
        <th mat-header-cell *matHeaderCellDef style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;text-align:center;width: 5%;">
          <div style="height: 13px;margin-top: -11px;">
            Amount
          </div><br />
          <div style="height: 8px;margin-top: -15px;">

          </div>
        </th>
        <td mat-cell *matCellDef="let element;let id = index;" style="text-align: end;width:1%;padding: 5px;" contenteditable="false">
          <div style="text-align:right;height: 65px;">
            <div *ngIf="element.gstvaluep != null" style="font-size:17px;height:4px">
              {{element.gstvaluep | number : '1.2-2'}}
            </div>
            <br />
            <div *ngIf="element.cessvaluep != null" style="font-size:17px;height:4px">
              {{element.cessvaluep | number : '1.2-2'}}
            </div>
            <br />
            <div *ngIf="element.addcessvaluep != null" style="font-size:17px;height:4px">
              {{element.addcessvaluep | number : '1.2-2'}}
            </div>
          </div>
        </td>
        <td mat-footer-cell *matFooterCellDef><strong>Total Amount</strong></td>
      </ng-container>


      <ng-container matColumnDef="TotalAmount">
        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}" style="background-color: #F0F3F5;color:#8FA3B0;font-family: 'Proxima Nova Semibold';font-size: 17px;height: 20px;width:5%">
          Total Amount
        </th>
        <td mat-cell *matCellDef="let element;let id = index;" style="color:#212121;font-family:'Proxima Nova Semibold';font-size:15px;text-align:right">{{element.totalp | number : '1.2-2'}}</td>
        <td mat-footer-cell *matFooterCellDef style="background-color: white; color: black; font-family: 'Proxima Nova Semibold'; font-size: 15px; text-align: right">{{printTotalAmountp() | currency:Country2}}</td>
      </ng-container>

      <ng-container matColumnDef="TotalAmounts">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" style="border:none;background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:17px;text-align:center;padding-bottom: 20px;width: 5%;"> Total Amount </th>
      </ng-container>


      <ng-container matColumnDef="header-row-group">
        <th mat-header-cell *matHeaderCellDef [attr.colspan]="2" style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:17px;text-align:center"> Discount </th>
      </ng-container>

      <ng-container matColumnDef="header-row-third-group">
        <th mat-header-cell *matHeaderCellDef [attr.colspan]="3" style="text-align: end;background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;text-align:center"> Tax </th>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="['Investigations','InvestigationChargess','header-row-group','header-row-third-group','TotalAmounts']"></tr>
      <tr mat-header-row *matHeaderRowDef="displayedColumnsspp;sticky:true"></tr>
      <tr mat-row *matRowDef="let row;  let even = even;columns: displayedColumnsspp;" [ngClass]="{gray: even}"></tr>
      <tr mat-footer-row *matFooterRowDef="displayedColumnsspp;sticky: true"></tr>

    </table>
  </div>

  <div class="col-sm-12" style="margin-bottom:2%">
    <div class="row">
      <div class="col-sm-3"> </div>
      <div class="col-sm-2"> </div>
      <div class="col-sm-3">
        <strong>Payment Details</strong>
      </div>
      <div class="col-sm-4"> </div>
    </div>
  </div>
  <div class="col-sm-12">
    <table align="center" style="border-left:3px solid#51b8f2;margin-top:-9px;font-size: 12px" class="table table-bordered">
      <thead>
        <tr>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Sl.No</th>
          <th style="    background-color: #F0F3F5;
    color: #8FA3B0;
    font-family: 'Proxima Nova Semibold';
    font-size: 14px;
    height: 40px
">Payment Mode</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Instruction No.</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Date</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Bank Name</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Branch Name</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Expiry Date</th>
          <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Amount</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let x of paymentp; index as i">
          <td style="text-align:center">{{i+1}}</td>
          <td style="text-align:center">{{x.paymodep}}</td>
          <td style="text-align:center">{{x.instnop}}</td>
          <td style="text-align:center">{{x.instdtp| date:"dd-MMM-y"}}</td>
          <td style="text-align:center">{{x.bnamep}}</td>
          <td style="text-align:center">{{x.branchp}}</td>
          <td style="text-align:center">{{x.expiryp| date:"dd-MMM-y"}}</td>
          <td style="text-align:center">{{x.amountp| number : '1.2-2'}}</td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td style="text-align:center"><strong>Total Amount</strong></td>
          <td style="text-align:center">{{payamtp | currency:Country2}}</td>
        </tr>
      </tfoot>
    </table>
  </div>



  <div class="col-sm-12" style="margin-top:2%">
    <div class="row">

      <div class="col-sm-6">
        <strong>Rupees (in Words) :{{transform(totamtp)}}only</strong>
      </div>
      <div class="col-sm-6"> </div>
    </div>
  </div>

</div>


