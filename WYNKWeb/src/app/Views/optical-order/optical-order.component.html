<form #OpticalOrder="ngForm">

  <h5 class="col-sm-5 card-header bg-success text-white">
    Job Order Details
  </h5>
  <div class="col-sm-12 borderline">
    <div class="col-sm-12 mph-0">
      <div class="col-sm-9 mph-0">
      </div>
      <div class="col-sm-4 mph-0 f-r content-right pb20">
        <button class="btn-text" (click)="Getformaccess()"><i class="fas fa-eye"></i> View Access</button>
        <button [disabled]="disableSearch" (click)="Clicksch()" class="btn-text grab f-r">
          <i class="fas fa-info-circle"> </i> Help
        </button>
      </div>
    </div>

    <div class="row">


      <div class="col-sm-2">
        <mat-panel-title class="text-title">
          Job Order Details
        </mat-panel-title>

        <div class="row">
          <mat-form-field appearance="outline">
            <mat-label>Job Number</mat-label>
            <input [(ngModel)]="M_OrderNumber" name="OrderNumber" matInput placeholder="" disabled>
          </mat-form-field>

        </div>

        <div class="row">
          <mat-form-field appearance="outline">
            <mat-label>Job Date</mat-label>
            <input [(ngModel)]="M_OrderDate" name="Order Date"  (dateChange)="OrderDate()" matInput [matDatepicker]="picker1" placeholder="Purchase order Date">
            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
          </mat-form-field>
        </div>

        <div class="row">
          <mat-form-field appearance="outline">
            <mat-label>Reference Number</mat-label>
            <input maxlength="50" [(ngModel)]="M_ReferenceNumber" name="ReferenceNumber" matInput placeholder="">
          </mat-form-field>
        </div>

        <div class="row">
          <mat-form-field appearance="outline">
            <mat-label>Reference Date</mat-label>
            <input (keypress)="numberOnly($event)" [(ngModel)]="M_ReferenceDate" name="ReferenceDate" matInput [matDatepicker]="picker2" placeholder="Reference Date">
            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
          </mat-form-field>
        </div>

        <div class="row">

          <strong><mat-label>Job order amount:{{GetTotalAmount()| number : '1.2-2'}}</mat-label></strong><br />
          <strong><mat-label *ngIf="hideTotalpaidadv">Advance amount paid:{{Totalpaidadv| number : '1.2-2'}}</mat-label></strong>
        </div>

      </div>
      <div class="col-sm-1">
      </div>

      <div class="col-sm-4">
        <div class="row">
          <div class="col-sm-6">
            <mat-panel-title class="text-title">
              Vendor Details
            </mat-panel-title>
          </div>
          <div class="col-sm-6">
            <button [disabled]="disableSearch" (click)="schVendor()" class="btn-text grab f-r">
              <i class="fas fa-info-circle"> </i>Vendor Help
            </button>
          </div>
        </div>


        <div class="row">
          <div class="col-sm-6">
            <mat-form-field appearance="outline">
              <mat-label>Vendor Name</mat-label>
              <input required [(ngModel)]="M_VendorName" name="VendorName" matInput disabled>
            </mat-form-field>
          </div>
          <div class="col-sm-6">
            <mat-form-field appearance="outline">
              <mat-label>Phone No</mat-label>
              <input [(ngModel)]="M_PhoneNo" name="PhoneNo" matInput placeholder="" disabled>
            </mat-form-field>
          </div>
        </div>

        <div class="row">
          <div class="col-sm-6">
            <mat-form-field appearance="outline">
              <mat-label>Address1</mat-label>
              <textarea [(ngModel)]="M_Address1" name="Address1" placeholder="Address1" matInput #message1 maxlength="100" disabled></textarea>
              <mat-hint align="start"><strong>Max 100 characters</strong> </mat-hint>
              <mat-hint align="end"><strong>{{message1.value.length}} /100</strong></mat-hint>
            </mat-form-field>
          </div>
          <div class="col-sm-6">
            <mat-form-field appearance="outline">
              <mat-label>Address2</mat-label>
              <textarea [(ngModel)]="M_Address2" name="Address2" placeholder="Address2" matInput #message2 maxlength="100" disabled></textarea>
              <mat-hint align="start"><strong>Max 100 characters</strong> </mat-hint>
              <mat-hint align="end"><strong>{{message2.value.length}} /100</strong></mat-hint>
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6">
            <mat-form-field appearance="outline">
              <mat-label>City</mat-label>
              <mat-select [(ngModel)]="M_Cityy" name="Cityy" disabled (ngModelChange)="DCitysumbit()">
                <mat-option>None</mat-option>
                <mat-option *ngFor="let City of Cityname" [value]="City.Value">{{City.Text}}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-sm-6">
            <mat-form-field appearance="outline">
              <mat-label>Location</mat-label>
              <input [(ngModel)]="M_location" name="Location" matInput disabled>
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6">
            <mat-form-field appearance="outline">
              <mat-label>State/Country</mat-label>
              <input type="text"  [(ngModel)]="M_VStateCountry" name="State" matInput placeholder="State/Country" disabled>
            </mat-form-field>
          </div>
          <div class="col-sm-6">
            <mat-form-field appearance="outline">
              <mat-label>Tax No</mat-label>
              <input [(ngModel)]="M_GSTNo" name="GSTNo" matInput placeholder="" disabled>
            </mat-form-field>
          </div>
        </div>
      </div>
      <div class="col-sm-1">
      </div>
      <div class="col-sm-4">
        <mat-panel-title class="text-title">
          Delivery Details
        </mat-panel-title>
        <div class="row">
          <div class="col-sm-6">
            <mat-form-field appearance="outline">
              <mat-label>Name</mat-label>
              <input maxlength="250" [(ngModel)]="M_DeliveryName" name="DeliveryName" matInput placeholder="DeliveryName" required>
            </mat-form-field>
          </div>
          <div class="col-sm-6">
            <mat-form-field appearance="outline">
              <mat-label>Address1</mat-label>
              <textarea [(ngModel)]="M_DAddress1" name="DAddress1" placeholder="Address1" matInput #message3 maxlength="100" required></textarea>
              <mat-hint align="start"><strong>Max 100 characters</strong> </mat-hint>
              <mat-hint align="end"><strong>{{message3.value.length}} /100</strong></mat-hint>
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6">
            <mat-form-field appearance="outline">
              <mat-label>Address2</mat-label>
              <textarea [(ngModel)]="M_DAddress2" name="DAddress2" placeholder="Address2" matInput #message4 maxlength="100"></textarea>
              <mat-hint align="start"><strong>Max 100 characters</strong> </mat-hint>
              <mat-hint align="end"><strong>{{message4.value.length}} /100</strong></mat-hint>
            </mat-form-field>
          </div>
          <div class="col-sm-6">
            <mat-form-field appearance="outline">
              <mat-label>Address3</mat-label>
              <textarea [(ngModel)]="M_DAddress3" name="DAddress3" placeholder="Address3" matInput #message5 maxlength="100"></textarea>
              <mat-hint align="start"><strong>Max 100 characters</strong> </mat-hint>
              <mat-hint align="end"><strong>{{message5.value.length}} /100</strong></mat-hint>
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6">
            <mat-form-field appearance="outline">
              <mat-label>City</mat-label>
              <mat-select [(ngModel)]="M_DCity" required name="DCity" (ngModelChange)="DCitysumbit()">
                <mat-option>None</mat-option>
                <mat-option *ngFor="let DCity of DCityname" [value]="DCity.Value">{{DCity.Text}}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="col-sm-6">
            <mat-form-field appearance="outline">
              <mat-label>Location</mat-label>
              <mat-select [(ngModel)]="M_Dlocation" required name="DLocation">
                <mat-option>None</mat-option>
                <mat-option *ngFor="let DLocation of DLocationname" [value]="DLocation.Value">{{DLocation.Text}}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-6">
            <mat-form-field appearance="outline">
              <mat-label>State/Country</mat-label>
                <input [(ngModel)]="DStateCountry" name="DState" matInput placeholder="State Name" disabled>
            </mat-form-field>
          </div>
          <div class="col-sm-6">
            <mat-form-field appearance="outline">
              <mat-label>instructions</mat-label>
              <textarea [(ngModel)]="M_Dinstructions" name="Dinstructions" placeholder="instructions" matInput #Dmessage3 maxlength="100"></textarea>
              <mat-hint align="start"><strong>Max 100 characters</strong> </mat-hint>
              <mat-hint align="end"><strong>{{Dmessage3.value.length}} /100</strong></mat-hint>
            </mat-form-field>
          </div>
        </div>
      </div>



    </div>
   

      <div class="container">
        <input id="tab-1" type="radio" name="tabs" checked="checked" />
        <input id="tab-2" type="radio" name="tabs" />


        <div class="tabs">
          <label for="tab-1">Item Details</label>
          <label for="tab-2">Payment</label>
        </div>



        <div class="content">
          <div class="tab  position-sticky width-100p ">

            <!--<div class="col-sm-12">
            <!--///////////////////////////Table/////////////box-shadow: 0px 10px 8px 1px #888888;/////////////////////////////////-->

            <div class="col-sm-12 mb10">
              <div class="card mb-3">
                <h5 class="card-header bg-success text-white">
                  Item Details
                  <button [disabled]="DisableAddoptical" (click)="AddOptical();" class="btnuserdefined btn-dark"><i matTooltip="Add" class="fa fa-plus"></i></button>
                </h5>
                <div class="card-body">
                  <div class="row ">
                    <table mat-table matSort [dataSource]="dataSource" id="tableee" class="custom-table withoutbackgroung search-table table-bordered" style="width:100%;">


                      <ng-container matColumnDef="Type">
                        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Type</th>
                        <td mat-cell *matCellDef="let element ;let i = index;" class="text-left">{{element.Type}}</td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>

                      <ng-container matColumnDef="Types1">
                        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2">Type</th>
                      </ng-container>

                      <ng-container matColumnDef="Brand">
                        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Brand</th>
                        <td mat-cell *matCellDef="let element;let i = index;"class="text-left">
                          {{element.Brand}}
                          <button mat-icon-button (click)="SearchSelected(i)" class="grab" data-toggle="tooltip" title="Search">
                            <mat-icon>search</mat-icon>
                          </button>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>


                      <ng-container matColumnDef="Brands1">
                        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Brand </th>
                      </ng-container>


                      <ng-container matColumnDef="Model">
                        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Model</th>
                        <td mat-cell *matCellDef="let element" class="text-left"> {{element.Model }} </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>

                      <ng-container matColumnDef="Models1">
                        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Model </th>
                      </ng-container>


                      <ng-container matColumnDef="LensName">
                        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef mat-sort-header>Lens Option</th>
                        <td mat-cell *matCellDef="let element" class="text-left">
                          {{element.LensName}}
                        </td>
                        <td mat-footer-cell *matFooterCellDef></td>
                      </ng-container>
                      <ng-container matColumnDef="LensNamesymbol">
                        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Lens Option</th>
                      </ng-container>

                      <ng-container matColumnDef="Index">
                        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Index</th>
                        <td mat-cell *matCellDef="let element" class="text-left"> {{element.Index }} </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>

                      <ng-container matColumnDef="Indexs1">
                        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Index </th>
                      </ng-container>

                      <ng-container matColumnDef="Color">
                        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Color</th>
                        <td mat-cell *matCellDef="let element" class="text-left"> {{element.Color }} </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>

                      <ng-container matColumnDef="Colors1">
                        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Color </th>
                      </ng-container>

                      <ng-container matColumnDef="UOM">
                        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>UOM</th>
                        <td mat-cell *matCellDef="let element" class="text-left"> {{element.UOMDescription}}</td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>

                      <ng-container matColumnDef="UOMsymbol">
                        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> UOM </th>
                      </ng-container>

                      <ng-container matColumnDef="Quantity">
                        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>Quantity</th>
                        <td mat-cell *matCellDef="let element;let id = index;" contenteditable="true"
                            (keypress)="RestrictNegativeValues($event)"
                            (keyup)="changeValue(id,'Quantity',$event);changeValueAmount(id,element,'Amount');changeValueGrossAmount(id,element,'GrossAmount')
             ;changeValueDiscountAmount(id,element,'DiscountAmount');changeValueTotal(id,element,'TotalAmount');changeGStAmount(id,element,'GSTAmount')
             ;changeCESSAmount(id,element,'CESSAmount');changeAdditionalCESSAmount(id,element,'AdditionalCESSAmount')">
                          {{element.Quantity }}
                        </td>
                        <td mat-footer-cell *matFooterCellDef><strong>Total</strong></td>
                      </ng-container>

                      <ng-container matColumnDef="Quantitysymbol">
                        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> QTY </th>
                      </ng-container>

                      <ng-container matColumnDef="Price">
                        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>Price</th>
                        <td mat-cell *matCellDef="let element" class="text-end"> {{element.Prize| number : '1.2-2'}}</td>
                        <td mat-footer-cell *matFooterCellDef><strong>{{GetTotalPriceAmount()|currency:Country2}}</strong> </td>
                      </ng-container>

                      <ng-container matColumnDef="Pricesymbol">
                        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Price </th>
                      </ng-container>

                      <ng-container matColumnDef="Amount">
                        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>Amount</th>
                        <td mat-cell *matCellDef="let element" class="text-end"> {{element.Amount| number : '1.2-2'}}</td>
                        <td mat-footer-cell *matFooterCellDef><strong>{{GetTotalRateAmount()|currency:Country2}}</strong> </td>
                      </ng-container>

                      <ng-container matColumnDef="Amountsymbol">
                        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Amount </th>
                      </ng-container>

                      <ng-container matColumnDef="Discount">
                        <th mat-header-cell *matHeaderCellDef > %</th>
                        <td class="text-end" mat-cell *matCellDef="let element;let id = index;" contenteditable="true" (keypress)="RestrictNegativeValues($event)"
                            (keyup)="Restrict($event);changeValue(id,'Discount',$event);changeValueDiscountAmount(id,element,'DiscountAmount');
          changeValueGrossAmount(id,element,'GrossAmount'); changeValueTotal(id,element,'TotalAmount');
          changeGStAmount(id,element,'GSTAmount');changeCESSAmount(id,element,'CESSAmount')
                ;changeAdditionalCESSAmount(id,element,'AdditionalCESSAmount')">
                          {{element.Discount| number : '1.2-2'}}
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>

                      <ng-container matColumnDef="DiscountAmount">
                        <th mat-header-cell *matHeaderCellDef>Amount</th>
                        <td mat-cell *matCellDef="let element" class="text-end"> {{element.DiscountAmount| number : '1.2-2'}} </td>
                        <td mat-footer-cell *matFooterCellDef><strong>{{GetTotalDiscountAmount()|currency:Country2}}</strong> </td>
                      </ng-container>

                      <ng-container matColumnDef="GrossAmount">
                        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>Gross Amount</th>
                        <td mat-cell *matCellDef="let element" class="text-end"> {{element.GrossAmount| number : '1.2-2'}} </td>
                        <td mat-footer-cell *matFooterCellDef><strong>{{GetTotalGrossAmount()|currency:Country2}}</strong> </td>
                      </ng-container>

                      <ng-container matColumnDef="GrossAmountsymbol">
                        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Gross Amount </th>
                      </ng-container>

                      <ng-container matColumnDef="TaxDescription">
                        <th mat-header-cell *matHeaderCellDef>Desc</th>
                        <td mat-cell *matCellDef="let element;let id = index;" class="text-left">
                          <ng-container class="height-4px text-center"> {{element.TaxDescription}}</ng-container> <br />
                          <ng-container class="height-4px text-center fontsize-12p"> {{element.CESSDescription}}</ng-container> <br />
                          <ng-container class="height-4px text-center fontsize-12p"> {{element.AdditionalCESSDescription}}</ng-container>
                        </td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>


                      <ng-container matColumnDef="GST">
                        <th mat-header-cell *matHeaderCellDef>%</th>
                        <td mat-cell *matCellDef="let element;let id = index;" class="text-end">
                          <ng-container> {{element.GST| number : '1.2-2'}} </ng-container> <br />
                          <ng-container *ngIf="element.CESS != 0"> {{element.CESS| number : '1.2-2'}} </ng-container> <br />
                          <ng-container *ngIf="element.AdditionalCESS != 0"> {{element.AdditionalCESS| number : '1.2-2'}} </ng-container>
                        </td>
                        <td mat-footer-cell *matFooterCellDef class="text-end"> </td>
                      </ng-container>


                      <ng-container matColumnDef="GSTValue1">
                        <th mat-header-cell *matHeaderCellDef>Amount</th>
                        <td mat-cell *matCellDef="let element;let id = index;" class="text-end">
                          <ng-container >{{element.GSTAmount | number : '1.2-2'}}</ng-container> <br />
                          <ng-container *ngIf="element.CESS != 0"> {{element.CESSAmount| number : '1.2-2'}}</ng-container> <br />
                          <ng-container *ngIf="element.AdditionalCESS != 0"> {{element.AdditionalCESSAmount| number : '1.2-2'}}</ng-container>
                        </td>
                        <td mat-footer-cell *matFooterCellDef class="text-center"><b>{{GetTotalTaxAmount()|currency:Country2}}</b></td>
                      </ng-container>


                      <ng-container matColumnDef="TotalAmount">
                        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef class="text-end">Total Amount</th>
                        <td mat-cell *matCellDef="let element" class="text-end"> {{element.TotalAmount| number : '1.2-2'}} </td>
                        <td mat-footer-cell *matFooterCellDef class="text-end"><strong>{{GetTotalAmount()|currency:Country2}} </strong> </td>
                      </ng-container>

                      <ng-container matColumnDef="TotalAmountsymbol">
                        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Total Amount </th>
                      </ng-container>

                      <ng-container matColumnDef="Delete">
                        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>Action</th>
                        <td mat-cell *matCellDef="let element;let i = index;"><mat-icon data-toggle="tooltip" title="Delete" class="grab" (click)="DeleteTB(i,element)">delete</mat-icon></td>
                        <td mat-footer-cell *matFooterCellDef> </td>
                      </ng-container>

                      <ng-container matColumnDef="Deletesymbol">
                        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Action </th>
                      </ng-container>


                      <ng-container matColumnDef="header-Discount-group">
                        <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> Discount </th>
                      </ng-container>


                      <ng-container matColumnDef="header-row-third-group1">
                        <th mat-header-cell *matHeaderCellDef [attr.colspan]="3"> Tax </th>
                      </ng-container>


                      <tr mat-header-row *matHeaderRowDef="['Types1','Brands1','Models1','LensNamesymbol','Indexs1','Colors1','UOMsymbol','Quantitysymbol','Pricesymbol',
          'Amountsymbol','header-Discount-group','GrossAmountsymbol','header-row-third-group1','TotalAmountsymbol',
          'Deletesymbol']"></tr>

                      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                      <tr mat-row *matRowDef="let row;  columns: displayedColumns;"></tr>
                      <tr mat-footer-row *matFooterRowDef="displayedColumns;sticky:true"></tr>
                    </table>
                  </div>
                </div>
              </div>
              <!--///////////////////////////////////////////////////////////////////////////-->
            </div>

            <div class="col-sm-12 mb10">
              <div class="col-sm-12">
                <div class="row">
                  <div class="col-sm-2">
                    <mat-form-field appearance="outline">
                      <mat-label>Validity (In Days)</mat-label>
                      <input maxlength="2" (keypress)="numberOnly($event)" required [(ngModel)]="M_VIDays" name="DOV" matInput placeholder="">
                    </mat-form-field>
                  </div>
                  <div class="col-sm-2">
                    <mat-form-field appearance="outline">
                      <mat-label>Delivery Date</mat-label>
                      <input [(ngModel)]="M_DeliveryDate" name="Delivery Date" matInput [min]="minToDate" [matDatepicker]="Dpicker1" placeholder="Delivery Date" required>
                      <mat-datepicker-toggle matSuffix [for]="Dpicker1"></mat-datepicker-toggle>
                      <mat-datepicker #Dpicker1></mat-datepicker>
                    </mat-form-field>
                  </div>
                  <div class="col-sm-6">
                    <mat-form-field appearance="outline">
                      <mat-label>Terms & conditions</mat-label>
                      <textarea [(ngModel)]="M_TermsAndConditions" name="Terms And Conditions" placeholder="Terms And Conditions" matInput #message10 maxlength="250"></textarea>
                      <mat-hint align="start"><strong>Max 250 characters</strong> </mat-hint>
                      <mat-hint align="end"><strong>{{message10.value.length}}/250</strong></mat-hint>
                    </mat-form-field>
                  </div>
                </div>
              </div>
            </div>



            <!--////////////////////////////////////////////////////////////////////////////////////////////////////-->


          </div>

          <div class="tab position-sticky width-100p ">

            <div class="row">
              <div class="col-sm-3">
                <mat-label>Advance Amount</mat-label>
                <mat-form-field appearance="outline">
                  <input  [(ngModel)]="M_AdvanceAmount" type="number" autocomplete="off" (keypress)="RestrictNegativeValues1($event)" (keyup)="CheckingAdvanceAmount($event);" matInput name="AdvanceAmount">
                </mat-form-field>
              </div>
            </div>
            <!--//////////////////////////////////////////////////////payment grid///////////////////////////////////////////////////////////////////////-->
            <div class="col-sm-12">
              <div class="card mb-3">
                <h5 class="card-header bg-success text-white">
                  Payment details
                  <button  (click)="AddPaymentDetailsNewgrid();" class="btnuserdefined btn-dark"><i matTooltip="Add Payment Details" class="fa fa-plus"></i></button>
                </h5>

                <div class="card-body">
                  <div class="row">
                    <table mat-table [dataSource]="dataSource3" class="custom-table withoutbackgroung search-table table-bordered">
                        <ng-container matColumnDef="PaymentMode">
                          <th mat-header-cell *matHeaderCellDef>Payment Mode</th>
                          <td mat-cell *matCellDef="let element;let id = index;">
                            <mat-form-field appearance="outline">
                              <mat-select (selectionChange)="PaymentChange(id,$event,element)">
                                <mat-option *ngFor="let Paymentsmode of Paymentsmodes" [value]="Paymentsmode.Value">
                                  {{Paymentsmode.Text}}
                                </mat-option>
                              </mat-select>
                            </mat-form-field>
                          </td>
                          <td mat-footer-cell *matFooterCellDef> </td>
                        </ng-container>
                        <ng-container matColumnDef="BankName">
                          <th mat-header-cell *matHeaderCellDef>Bank Name</th>
                          <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'">
                            <mat-form-field appearance="outline">
                              <input (blur)="BankName($event,element)" (keypress)="nameField($event)" [disabled]="element.PaymentMode =='Cash'  " maxlength="100" matInput placeholder="Enter BankName" name="BankName" type="text">
                            </mat-form-field>
                          </td>
                          <td mat-footer-cell *matFooterCellDef> </td>
                        </ng-container>
                        <ng-container matColumnDef="InstrumentNumber">
                          <th mat-header-cell *matHeaderCellDef>Instrument Number</th>
                          <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'">
                            <mat-form-field appearance="outline">
                              <input (blur)="InstrumentNumber($event,element)" [disabled]="element.PaymentMode =='Cash'" maxlength="15" (keypress)="numberOnly($event)" matInput placeholder="Enter Instrument Number" name="InstrumentNumber" type="text">
                            </mat-form-field>
                          </td>
                          <td mat-footer-cell *matFooterCellDef> </td>
                        </ng-container>
                        <ng-container matColumnDef="InstrumentDate">
                          <th mat-header-cell *matHeaderCellDef>Instrument Date</th>
                          <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'|| element.PaymentMode !='Credit Card'|| element.PaymentMode !='Debit card'">
                            <mat-form-field appearance="outline">
                              <input [disabled]="element.PaymentMode =='Cash'|| element.PaymentMode =='Credit Card'|| element.PaymentMode =='Debit card'"
                                     name="InstrumentDate" autocomplete="off" [max]="maxInstrumentDate" matInput [matDatepicker]="InstrumentDate" (dateChange)="dateofinstrument($event,element)" placeholder="InstrumentDate">
                              <mat-datepicker-toggle matSuffix [for]="InstrumentDate"></mat-datepicker-toggle>
                              <mat-datepicker #InstrumentDate></mat-datepicker>
                            </mat-form-field>
                          </td>
                          <td mat-footer-cell *matFooterCellDef> </td>
                        </ng-container>
                        <ng-container matColumnDef="ExpiryDate">
                          <th mat-header-cell *matHeaderCellDef>Expiry Date</th>
                          <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'|| element.PaymentMode !='Demand Draft'|| element.PaymentMode !='Cheque' ">
                            <mat-form-field appearance="outline">
                              <input (dateChange)="dateexpiry($event,element)" [disabled]="element.PaymentMode =='Cash'|| element.PaymentMode =='Demand Draft'|| element.PaymentMode =='Cheque' " autocomplete="off" [min]="MINExpiryDate"
                                     name="ExpiryDate" matInput [matDatepicker]="ExpiryDate" placeholder="ExpiryDate" type="datetime">
                              <mat-datepicker-toggle matSuffix [for]="ExpiryDate"></mat-datepicker-toggle>
                              <mat-datepicker #ExpiryDate></mat-datepicker>
                            </mat-form-field>
                          </td>
                          <td mat-footer-cell *matFooterCellDef> </td>
                        </ng-container>
                        <ng-container matColumnDef="Branch">
                          <th mat-header-cell *matHeaderCellDef>Branch</th>
                          <td mat-cell *matCellDef="let element"
                              [contentEditable]="element.PaymentMode !='Cash'|| element.PaymentMode !='Debit card' || element.PaymentMode !='Credit Card'">
                            <mat-form-field appearance="outline">
                              <input (blur)="Branch($event,element)"
                                     [disabled]="element.PaymentMode =='Cash' || element.PaymentMode =='Debit card' || element.PaymentMode =='Credit Card'"
                                     (keypress)="nameField($event)" maxlength="50" matInput name="Branch" placeholder="Branch" type="text">
                            </mat-form-field>

                          </td>
                          <td mat-footer-cell *matFooterCellDef>Total</td>
                        </ng-container>
                        <ng-container matColumnDef="Amount">
                          <th mat-header-cell *matHeaderCellDef>Amount</th>
                          <td mat-cell *matCellDef="let element;let id = index" required (keyup)="Amount(id,'Amount',$event,element)" (keypress)="numberOnly($event)" [contentEditable]="disableRow">
                            {{element.Amount| number : '1.2-2'}}

                          </td>
                          <td mat-footer-cell *matFooterCellDef>
                            <strong>
                              {{PTotalAmount1() |currency:Country2}}
                            </strong>
                          </td>
                        </ng-container>
                        <ng-container matColumnDef="Action">
                          <th mat-header-cell *matHeaderCellDef>Action</th>
                          <td mat-cell *matCellDef="let element;let id = index" [contentEditable]="disableRow">
                            <i class="fas fa-trash-alt icon-delete" title="Delete" (click)="removePaytype(i)"></i>
                          </td>
                          <td mat-footer-cell *matFooterCellDef></td>
                        </ng-container>
                      <tr mat-header-row *matHeaderRowDef="displayedColumns3;sticky: true"></tr>
                      <tr mat-row *matRowDef="let element;  let even = even; columns: displayedColumns3"></tr>
                      <tr mat-footer-row *matFooterRowDef="displayedColumns3;"></tr>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <!--////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////-->
          </div>
        </div>
      </div>


      <div class="col-sm-12 pb25">
        <div class="content-right sub-section btn-wrap">
          <button class="btn btn-warning-default" (click)="CancelClk()"><strong>Cancel</strong></button>
          <button *ngIf="hiddenUpdate" [disabled]="disableUpdate" class="success btn btn-primary" (click)="Update(OpticalOrder)">Submit</button>
          <button *ngIf="hiddenSubmit" [disabled]="disableSubmit" class="success btn btn-primary" (click)="onSubmit(OpticalOrder)">Submit</button>
          <!--<button class="success btn btn-primary" [disabled]="isDisabled" (click)="print()">Print</button>-->
        </div>
      </div>


    </div>
</form>




<!--////////////////pop grid OPtical Order Details-up//////////-->
<div class="modal" role="dialog" [ngStyle]="{'display':OPticalOrderDetailsPopUp}">
  <div class="modal-dialog modal-lg" style="width:78%;padding-top:10px">
    <div class="modal-content" style="height:450px">
      <div class="modal-header">
        <button class="close" (click)="OPticalOrderPopUpClose()">&times;</button>
        <h5 class="modal-title">
          <strong>Job Order Details</strong>
        </h5>
      </div>
      <div class="modal-body">

        <div class="col-sm-12" style="height:350px;overflow:auto;position:sticky">

          <div class="row mt-10">
            <div class="col-sm-3">
              <mat-form-field appearance="outline">
                <mat-label>Search</mat-label>
                <input id="myInput" type="text" matInput placeholder="Search">
              </mat-form-field>
            </div>
          </div>

          <div class="row">
            <table align="center" class="custom-table withoutbackgroung search-table table-bordered">
              <thead>
                <tr>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray">Action</th>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray">Status</th>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray">Order Number</th>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray">Order Date</th>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray">ReferenceNo</th>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray">Reference Date</th>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray">Vendor Name</th>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray">Delivery Name</th>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray">Delivery Address1</th>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray">Delivery Location</th>

                </tr>
              </thead>
              <tbody id="myTable">
                <tr *ngFor="let x of dataSourceUpdate">
                  <td style="text-align:center">
                    <button mat-icon-button [disabled]="x.Status!='Open'" (click)="Edit(x)">
                      <mat-icon class="grab" data-toggle="Edit">edit</mat-icon>
                    </button>
                    <button [disabled]="disablePrint" mat-icon-button (click)="Print(x)">
                      <mat-icon class="grab" data-toggle="Print">print</mat-icon>
                    </button>
                  </td>
                  <td style="text-align:center">{{x.Status}}</td>
                  <td style="text-align:center">{{x.OrderNumber}}</td>
                  <td style="text-align:center">{{x.OrderDate| date:'dd-MMM-y '}}</td>
                  <td style="text-align:center">{{x.RefNo}}</td>
                  <td style="text-align:center">{{x.RefDate| date:'dd-MMM-y'}}</td>
                  <td style="text-align:center">{{x.VendorName}}</td>
                  <td style="text-align:center">{{x.DeliveryName}}</td>
                  <td style="text-align:center">{{x.DeliveryAddress1}}</td>
                  <td style="text-align:center">{{x.DeliveryLocationName}}</td>
                
                </tr>
              </tbody>
            </table>
          </div>


        </div>

      </div>
    </div>
  </div>
</div>





<!--////////////////pop grid vendor Order Details-up//////////-->
<div class="modal" role="dialog" [ngStyle]="{'display':VendorDetailsPopUp}">
  <div class="modal-dialog modal-lg" style="width:78%;padding-top:10px">
    <div class="modal-content" style="height:450px">
      <div class="modal-header">
        <button class="close" (click)="VendorPopUpClose()">&times;</button>
        <h5 class="modal-title">
          <strong>Vendor Details</strong>
        </h5>
      </div>
      <div class="modal-body">

        <div class="col-sm-12" style="height:350px;overflow:auto;position:sticky">
          <div class="row">

            <div class="row mt-10">
              <div class="col-sm-3">
                <mat-form-field appearance="outline">
                  <mat-label>Search</mat-label>
                  <input id="myInput1" type="text" matInput placeholder="Search">
                </mat-form-field>
              </div>
            </div>

            <table align="center" class="custom-table withoutbackgroung search-table table-bordered">
              <thead>
                <tr>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray">Action</th>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray">Vendor Name</th>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray">Phone No</th>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray">Address1</th>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray">Address2</th>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray">Location</th>
                  <th style="text-align:center;background-color:#f0f5fa;color:gray">GSTNo</th>
                </tr>
              </thead>
              <tbody id="myTable1">
                <tr *ngFor="let x of dataSourceVendorDetails">
                  <td style="text-align:center">
                    <button mat-icon-button (click)="EditVendor(x)">
                      <mat-icon class="grab" data-toggle="Edit">edit</mat-icon>
                    </button>
                  </td>
                  <td style="text-align:center">{{x.VendorName}}</td>
                  <td style="text-align:center">{{x.PhoneNo}}</td>
                  <td style="text-align:center">{{x.Address1}}</td>
                  <td style="text-align:center">{{x.Address2}}</td>
                  <td style="text-align:center">{{x.Location}}</td>
                  <td style="text-align:center">{{x.GSTNo}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>







<!--////////////////////////////////Pop_up RE-print////////////////////////////////////-->
<div id="print" style="display:none">

  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-6">
        <label style="text-align: center;font-size:16px"><strong>{{M_CompanyName}}</strong> </label>
      </div>
      <div class="col-sm-2"></div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-2"></div>
      <div class="col-sm-7"> <label style="text-align:center;margin-left:28%"><strong>{{M_CAddress1 + ' '+ M_CAddress2+ ' '+M_CAddress3 }}</strong></label></div>
      <div class="col-sm-3"></div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-3"></div>
      <div class="col-sm-7"> <label style="text-align:center;margin-left:1%"><strong>{{'Phone No:'+' '+ M_CPhone1 + ',' + ' ' + 'Website:' + ' ' + M_CWebsite}}</strong></label></div>
      <div class="col-sm-1"></div>
    </div>
  </div>

  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"> </div>
      <div class="col-sm-4">
        <label style="text-align:center">
          <strong>
            Job Order Details<br />
          </strong>
        </label>

      </div>
      <div class="col-sm-4"></div>
    </div>
  </div>
  <div class="col-sm-12" style="margin-top:40px">
    <div class="row">

      <div class="col-sm-4">
        <div><h1 style="font-size:15px;text-align:center"><strong>Job ORDER:</strong></h1></div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Job No</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-5">
            {{M_OrderNumber}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Job D&T</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_OrderDate | date:"dd-MMM-y HH:mm"}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Ref No</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_ReferenceNumber}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Ref Date</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_ReferenceDate | date:"dd-MMM-y"}}
          </div>
        </div>
      </div>

      <div class="col-sm-4">
        <div><h1 style="font-size:15px;text-align:center"><strong>VENDOR DETAILS:</strong></h1></div>

        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Name</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_VName}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Phone</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_VPhoneNo}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Address</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_VAddress1}},{{M_VAddress2}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Gst No</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_VGSTNo}}
          </div>
        </div>

      </div>

      <div class="col-sm-4">

        <div><h1 style="font-size:15px;text-align:center"><strong>DELIVERY ADDRESS:</strong> </h1></div>

        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Name</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_DeliveryName}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Address1</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_DAddress1}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Address2</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_DAddress2}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Address3</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_DAddress3}}
          </div>
        </div>

      </div>



    </div>
  </div>



  <div class="col-sm-12" style="margin-top:50px">
    <h1 style="font-size:15px"><strong>Item Details</strong></h1>


    <!--//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////-->
    <table mat-table matSort [dataSource]="dataSourceReprint" class="custom-table withoutbackgroung search-table table-bordered">


      <ng-container matColumnDef="TypeRP">
        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Type</th>
        <td mat-cell *matCellDef="let element ;let i = index;" class="text-left">{{element.Type}}  </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="Types1RP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Type </th>
      </ng-container>

      <ng-container matColumnDef="BrandRP">
        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Brand</th>
        <td mat-cell *matCellDef="let element;let i = index;" class="text-left">
          {{element.Brand}}
        </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="Brands1RP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Brand </th>
      </ng-container>

      <ng-container matColumnDef="ModelRP">
        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Model</th>
        <td mat-cell *matCellDef="let element" class="text-left"> {{element.Model }} </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="Models1RP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Model </th>
      </ng-container>

      <ng-container matColumnDef="LensNameRP">
        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef mat-sort-header>Lens Option</th>
        <td mat-cell *matCellDef="let element" class="text-left">
          {{element.LensName}}
        </td>
        <td mat-footer-cell *matFooterCellDef></td>
      </ng-container>

      <ng-container matColumnDef="LensNamesymbolRP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Lens Option</th>
      </ng-container>

      <ng-container matColumnDef="IndexRP">
        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Index</th>
        <td mat-cell *matCellDef="let element" class="text-left"> {{element.Index }} </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="Indexs1RP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Index </th>
      </ng-container>

      <ng-container matColumnDef="ColorRP">
        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Color</th>
        <td mat-cell *matCellDef="let element" class="text-left"> {{element.Color }} </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="Colors1RP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Color </th>
      </ng-container>

      <ng-container matColumnDef="UOMRP">
        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>UOM</th>
        <td mat-cell *matCellDef="let element" class="text-left"> {{element.UOMDescription}}</td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="UOMsymbolRP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> UOM </th>
      </ng-container>

      <ng-container matColumnDef="QuantityRP">
        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>Quantity</th>
        <td mat-cell *matCellDef="let element;let id = index;" contenteditable="true" class="text-end">
          {{element.Quantity }}
        </td>
        <td mat-footer-cell *matFooterCellDef><strong>Total</strong></td>
      </ng-container>

      <ng-container matColumnDef="QuantitysymbolRP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> QTY </th>
      </ng-container>

      <ng-container matColumnDef="PriceRP">
        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>Price</th>
        <td mat-cell *matCellDef="let element" class="text-end"> {{element.Prize| number : '1.2-2'}}</td>
        <td mat-footer-cell *matFooterCellDef><strong>{{GetTotalPriceAmount()|currency:Country2}}</strong> </td>
      </ng-container>

      <ng-container matColumnDef="PricesymbolRP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Price </th>
      </ng-container>

      <ng-container matColumnDef="AmountRP">
        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>Amount</th>
        <td mat-cell *matCellDef="let element" class="text-end"> {{element.Amount| number : '1.2-2'}}</td>
        <td mat-footer-cell *matFooterCellDef><strong>{{GetTotalRateAmount()|currency:Country2}} </strong> </td>
      </ng-container>

      <ng-container matColumnDef="AmountsymbolRP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Amount </th>
      </ng-container>

      <ng-container matColumnDef="DiscountRP">
        <th mat-header-cell *matHeaderCellDef> %</th>
        <td mat-cell *matCellDef="let element;let id = index;" class="text-end">
          {{element.Discount| number : '1.2-2'}}
        </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="DiscountAmountRP">
        <th mat-header-cell *matHeaderCellDef>Amount</th>
        <td mat-cell *matCellDef="let element" class="text-end"> {{element.DiscountAmount| number : '1.2-2'}} </td>
        <td mat-footer-cell *matFooterCellDef><strong>{{GetTotalDiscountAmount()|currency:Country2}} </strong> </td>
      </ng-container>

      <ng-container matColumnDef="GrossAmountRP">
        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>Gross Amount</th>
        <td mat-cell *matCellDef="let element" class="text-end"> {{element.GrossAmount| number : '1.2-2'}} </td>
        <td mat-footer-cell *matFooterCellDef><strong>{{GetTotalGrossAmount()|currency:Country2}} </strong> </td>
      </ng-container>

      <ng-container matColumnDef="GrossAmountsymbolRP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Gross Amount </th>
      </ng-container>

      <ng-container matColumnDef="TaxDescriptionRP">
        <th mat-header-cell *matHeaderCellDef>Desc</th>
        <td mat-cell *matCellDef="let element" class="text-left">
          <ng-container class="height-4px text-center"> {{element.TaxDescription}}</ng-container> <br />
          <ng-container class="height-4px text-center fontsize-12p"> {{element.CESSDescription}}</ng-container> <br />
          <ng-container class="height-4px text-center fontsize-12p"> {{element.AdditionalCESSDescription}}</ng-container>
        </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>
      <ng-container matColumnDef="GSTRP">
        <th mat-header-cell *matHeaderCellDef >%</th>
        <td mat-cell *matCellDef="let element" class="text-end">
          {{element.GST| number : '1.2-2'}} <br />
          <ng-container *ngIf="element.CESS != 0" > {{element.CESS| number : '1.2-2'}} </ng-container> <br />
          <ng-container *ngIf="element.AdditionalCESS != 0" > {{element.AdditionalCESS| number : '1.2-2'}} </ng-container>
        </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>
      <ng-container matColumnDef="GSTValue1RP">
        <th mat-header-cell *matHeaderCellDef >Amount </th>
        <td mat-cell *matCellDef="let element" class="text-end">
          <ng-container >{{element.GSTAmount | number : '1.2-2'}}</ng-container> <br />
          <ng-container *ngIf="element.CESS != 0" > {{element.CESSAmount| number : '1.2-2'}}</ng-container> <br />
          <ng-container *ngIf="element.AdditionalCESS != 0" > {{element.AdditionalCESSAmount| number : '1.2-2'}}</ng-container>
        </td>
        <td mat-footer-cell *matFooterCellDef><strong> {{GetTotalTaxAmount()|currency:Country2}}</strong></td>
      </ng-container>

      <ng-container matColumnDef="TotalAmountRP">
        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>Total Amount</th>
        <td mat-cell *matCellDef="let element" class="text-end"> {{element.TotalAmount| number : '1.2-2'}} </td>
        <td mat-footer-cell *matFooterCellDef class="text-end"><strong>{{GetTotalAmount()|currency:Country2}}</strong> </td>
      </ng-container>

      <ng-container matColumnDef="TotalAmountsymbolRP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Total Amount </th>
      </ng-container>

      <ng-container matColumnDef="header-Discount-groupRP">
        <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> Discount </th>
      </ng-container>


      <ng-container matColumnDef="header-row-third-group1RP">
        <th mat-header-cell *matHeaderCellDef [attr.colspan]="3"> Tax </th>
      </ng-container>


      <tr mat-header-row *matHeaderRowDef="['Types1RP','Brands1RP','Models1RP','LensNamesymbolRP',
     'Indexs1RP','Colors1RP','UOMsymbolRP','QuantitysymbolRP','PricesymbolRP',
     'AmountsymbolRP','header-Discount-groupRP','GrossAmountsymbolRP','header-row-third-group1RP','TotalAmountsymbolRP']"></tr>

      <tr mat-header-row *matHeaderRowDef="displayedColumnsReprint; sticky: true"></tr>
      <tr mat-row *matRowDef="let row;  columns: displayedColumnsReprint;"></tr>
      <tr mat-footer-row *matFooterRowDef="displayedColumnsReprint;sticky:true"></tr>
    </table>


    <!--//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////-->


  </div>

  <div class="col-sm-12" style="margin-top:15px">
    <div class="col-sm-8">
      <div class="row">
        <!--<div class="col-s-sm-3">
          <mat-label><strong>Rupees in Words: &nbsp;</strong></mat-label>
        </div>-->
        <div class="col-s-sm-5">
          <p>{{Country2}} (in Words) :{{transform(GetTotalAmount())}} {{Country2}} only</p>
        </div>
      </div>

    </div>
  </div>

  <div class="col-sm-12" style="margin-top:15px">
    <div class="row">
      <div class="col-sm-3">
        <mat-label><strong>Validity (In Days): &nbsp;</strong></mat-label>
        {{M_VIDays}}
      </div>
      <div class="col-sm-5"></div>
      <div class="col-sm-4">
        <mat-label><strong>Terms And Conditions: &nbsp;</strong></mat-label>
        {{M_TermsAndConditions}}
      </div>
    </div>
  </div>





  <div class="col-sm-12" *ngIf="hiddenpaymentreprint">
    <div class="col-sm-12" style="margin-bottom:5%">
      <div class="row">
        <div class="col-sm-4"> </div>
        <div class="col-sm-4">
          <strong>Payment Details</strong>
        </div>
        <div class="col-sm-4"> </div>
      </div>
    </div>

    <div class="col-sm-12">
      <table align="center" style="border-left:3px solid#51b8f2;margin-top:-9px;font-size: 12px" class="table table-bordered">
        <thead>
          <tr>
            <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Sl.No</th>
            <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Payment Mode</th>
            <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Instruction No.</th>
            <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Date</th>
            <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Bank Name</th>
            <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Branch Name</th>
            <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Amount</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let x of paymentREPrint; index as i">
            <td style="text-align:center">{{i+1}}</td>
            <td style="text-align:center">{{x.PaymentMode}}</td>
            <td style="text-align:center">{{x.InstrumentNumber}}</td>
            <td style="text-align:center">{{x.Instrumentdate| date:"dd-MMM-y"}}</td>
            <td style="text-align:center">{{x.BankName}}</td>
            <td style="text-align:center">{{x.BankBranch}}</td>
            <td style="text-align:center">{{x.Amount|currency:Country2}}</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td style="text-align:center">Total Amount</td>
            <td style="text-align:center"> {{TotalpayMode |currency:Country2}}</td>
          </tr>
        </tfoot>


      </table>
    </div>
  </div>

  <div class="col-sm-12" style="margin-top:35px">
    <div class="row">


      <div class="col-sm-4"><mat-label><strong>Prepared by: &nbsp;</strong></mat-label></div>
      <div class="col-sm-4"><mat-label><strong> Authoried by: &nbsp;</strong></mat-label></div>
      <div class="col-sm-4">
        <mat-label><strong>Authorized Signatory: &nbsp;</strong></mat-label>
      </div>
    </div>

  </div>

</div>



<!-----------------------------------Print Popup----------------------------------------->
<div class="modal" role="dialog" [ngStyle]="{'display':printMinPopup}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content ">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="printMinclose()">&times;</button>
        <h5 class="modal-title center">Do you want to print ?</h5>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="printMinclose()">No</button>
        <button type="reset" class="btn btn-success" data-dismiss="modal" (click)="printMin()">Yes</button>
      </div>
    </div>
  </div>
</div>



<!-----------------------------------cancel Popup----------------------------------------->
<div class="modal" role="dialog" [ngStyle]="{'display':cancelblock}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content" style="width: 400px;">
      <div class="modal-header">
        <h4 class="modal-title">Job Order</h4>
        <button type="button" class="close" data-dismiss="modal" (click)="cancelClose()">&times;</button>
      </div>
      <div class="modal-body">
        <h5 style="text-align:center;background-color:white;color:black">Do You Want to Cancel ?</h5>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="CloseNo()">No</button>
        <button type="reset" class="btn btn-success" data-dismiss="modal" (click)="CloseYes()">Yes</button>
      </div>
    </div>
  </div>
</div>


<!--////////////////////////////////////////brand popup////////////////////////////////////////-->
<div class="modal" role="dialog" [ngStyle]="{'display':FrameModel}" style="width:106%">
  <div class="modal-dialog modal-lg" style="width:78%;padding-top:10px;padding-left:290px;margin-right: 21%;">
    <div class="modal-content" style="height:471px">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="FrameModelClose()">&times;</button>
        <h5>
          Item Details
        </h5>
      </div>
      <div class="modal-body">

        <div style="height: 300px;overflow: auto;">
          <table mat-table matSort [dataSource]="dataSource1" class="custom-table withoutbackgroung search-table table-bordered">
            <ng-container matColumnDef="Action">
              <th mat-header-cell *matHeaderCellDef>Action</th>
              <td mat-cell *matCellDef="let element">
                <mat-checkbox [(ngModel)]="element.checked" (click)="selecttype(element)"></mat-checkbox>
              </td>
            </ng-container>
            <ng-container matColumnDef="Brand">
              <th mat-header-cell *matHeaderCellDef>Brand</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.Brand}}</td>
            </ng-container>
            <ng-container matColumnDef="LensOptions">
              <th mat-header-cell *matHeaderCellDef>LensOptions</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.LensOptions}} </td>
            </ng-container>
            <ng-container matColumnDef="Description">
              <th mat-header-cell *matHeaderCellDef>Description</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.Description}} </td>
            </ng-container>
            <ng-container matColumnDef="Model">
              <th mat-header-cell *matHeaderCellDef>Model</th>
              <td mat-cell *matCellDef="let element"> {{element.Model}} </td>
            </ng-container>
            <ng-container matColumnDef="Index">
              <th mat-header-cell *matHeaderCellDef>Index</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.Index}} </td>
            </ng-container>
            <ng-container matColumnDef="Color">
              <th mat-header-cell *matHeaderCellDef>Color</th>
              <td mat-cell *matCellDef="let element"> {{element.Color}} </td>
            </ng-container>
            <ng-container matColumnDef="Size">
              <th mat-header-cell *matHeaderCellDef>Size</th>
              <td mat-cell *matCellDef="let element"> {{element.Size}} </td>
            </ng-container>
            <ng-container matColumnDef="Price">
              <th mat-header-cell *matHeaderCellDef>Price</th>
              <td mat-cell *matCellDef="let element"> {{element.Price}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns1;sticky:true"></tr>
            <tr mat-row *matRowDef="let row;  let even = even;columns: displayedColumns1;" [ngClass]="{gray: even}"></tr>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>



<!--//////////////////////////////////////print/////////////////////////////////////////////////////////////-->
<div class="modal" role="dialog" [ngStyle]="{'display':Submitprint}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content ">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="printclose()">&times;</button>
        <h5 class="modal-title center">Do you want to print ?</h5>
      </div>

      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="printclose()">No</button>
        <button type="reset" class="btn btn-success" data-dismiss="modal" (click)="Print1()">Yes</button>
      </div>
    </div>
  </div>
</div>

<!--////////////////////////////////Pop_up print for submit////////////////////////////////////-->
<div id="section" style="display:none">
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-6">
        <label style="text-align: center;font-size:16px"><strong>{{PCompnayname}}</strong> </label>
      </div>
      <div class="col-sm-2"></div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-2"></div>
      <div class="col-sm-7"> <label style="text-align:center;margin-left:28%"><strong>{{PAddress + ' '+ PAddress2+ ' '+PAddress3 }}</strong></label></div>
      <div class="col-sm-3"></div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-3"></div>
      <div class="col-sm-7"> <label style="text-align:center;margin-left:1%"><strong>{{'Phone No:'+' '+ Pphone + ',' + ' ' + 'web:' + ' ' + Pweb}}</strong></label></div>
      <div class="col-sm-1"></div>
    </div>
  </div>

  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-4"> </div>
      <div class="col-sm-4">
        <label style="text-align:center">
          <strong>
            Job Order Details<br />
          </strong>
        </label>

      </div>
      <div class="col-sm-4"></div>
    </div>
  </div>
  <div class="col-sm-12" style="margin-top:40px">
    <div class="row">

      <div class="col-sm-4">
        <div><h1 style="font-size:15px;text-align:center"><strong>Job ORDER:</strong></h1></div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Job No</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-5">
            {{OrderNumber}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Job D&T</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_OrderDate | date:"dd-MMM-y HH:mm"}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Ref No</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_ReferenceNumber}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Ref Date</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_ReferenceDate | date:"dd-MMM-y"}}
          </div>
        </div>
      </div>

      <div class="col-sm-4">
        <div><h1 style="font-size:15px;text-align:center"><strong>VENDOR DETAILS:</strong></h1></div>

        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Name</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_VendorName}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Phone</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_PhoneNo}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Address</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_Address1}},{{M_Address2}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Tax No</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_GSTNo}}
          </div>
        </div>

      </div>

      <div class="col-sm-4">

        <div><h1 style="font-size:15px;text-align:center"><strong>DELIVERY ADDRESS:</strong> </h1></div>

        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Name</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_DeliveryName}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Address1</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_DAddress1}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Address2</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_DAddress2}}
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <mat-label><strong>Address3</strong></mat-label>
          </div>
          <div class="col-sm-1">
            <mat-label><strong>:</strong></mat-label>
          </div>
          <div class="col-sm-6">
            {{M_DAddress3}}
          </div>
        </div>

      </div>



    </div>
  </div>



  <div class="col-sm-12" style="margin-top:50px">
    <h1 style="font-size:15px"><strong>Item Details:</strong></h1>



    <!--//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////-->
    <table mat-table matSort [dataSource]="dataSourceprint" class="custom-table withoutbackgroung search-table table-bordered W-100">


      <ng-container matColumnDef="TypeP">
        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Type</th>
        <td mat-cell *matCellDef="let element ;let i = index;" class="text-left">{{element.Type}}  </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="Types1P">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Type </th>
      </ng-container>

      <ng-container matColumnDef="BrandP">
        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Brand</th>
        <td mat-cell *matCellDef="let element;let i = index;" class="text-left">
          {{element.Brand}}
        </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="Brands1P">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Brand </th>
      </ng-container>

      <ng-container matColumnDef="ModelP">
        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Model</th>
        <td mat-cell *matCellDef="let element" class="text-left"> {{element.Model }} </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="Models1P">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Model </th>
      </ng-container>

      <ng-container matColumnDef="LensNameP">
        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef mat-sort-header>Lens Option</th>
        <td mat-cell *matCellDef="let element" class="text-left">
          {{element.LensName}}
        </td>
        <td mat-footer-cell *matFooterCellDef><strong></strong></td>
      </ng-container>

      <ng-container matColumnDef="LensNamesymbolP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Lens Option</th>
      </ng-container>

      <ng-container matColumnDef="IndexP">
        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Index</th>
        <td mat-cell *matCellDef="let element" class="text-left"> {{element.Index }} </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="Indexs1P">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Index </th>
      </ng-container>

      <ng-container matColumnDef="ColorP">
        <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Color</th>
        <td mat-cell *matCellDef="let element" class="text-left"> {{element.Color }} </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="Colors1P">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Color </th>
      </ng-container>

      <ng-container matColumnDef="UOMP">
        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>UOM</th>
        <td mat-cell *matCellDef="let element" class="text-left"> {{element.UOMDescription}}</td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="UOMsymbolP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> UOM </th>
      </ng-container>

      <ng-container matColumnDef="QuantityP">
        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>Quantity</th>
        <td mat-cell *matCellDef="let element;let id = index;" contenteditable="true">
          {{element.Quantity }}
        </td>
        <td mat-footer-cell *matFooterCellDef><strong>Total</strong> </td>
      </ng-container>

      <ng-container matColumnDef="QuantitysymbolP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> QTY </th>
      </ng-container>

      <ng-container matColumnDef="PriceP">
        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>Price</th>
        <td mat-cell *matCellDef="let element" class="text-end"> {{element.Prize| number : '1.2-2'}}</td>
        <td mat-footer-cell *matFooterCellDef><strong>{{GetTotalPriceAmount()|currency:Country2}}</strong> </td>
      </ng-container>

      <ng-container matColumnDef="PricesymbolP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Price </th>
      </ng-container>

      <ng-container matColumnDef="AmountP">
        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>Amount</th>
        <td mat-cell *matCellDef="let element" class="text-end"> {{element.Amount| number : '1.2-2'}}</td>
        <td mat-footer-cell *matFooterCellDef><strong>{{GetTotalRateAmount()|currency:Country2}} </strong> </td>
      </ng-container>

      <ng-container matColumnDef="AmountsymbolP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Amount </th>
      </ng-container>

      <ng-container matColumnDef="DiscountP">
        <th mat-header-cell *matHeaderCellDef> %</th>
        <td mat-cell *matCellDef="let element;let id = index;" class="text-end">
          {{element.Discount}}
        </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <ng-container matColumnDef="DiscountAmountP">
        <th mat-header-cell *matHeaderCellDef>Amount</th>
        <td mat-cell *matCellDef="let element" class="text-end"> {{element.DiscountAmount| number : '1.2-2'}}  </td>
        <td mat-footer-cell *matFooterCellDef><strong>{{GetTotalDiscountAmount()|currency:Country2}}</strong> </td>
      </ng-container>

      <ng-container matColumnDef="GrossAmountP">
        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>Gross Amount</th>
        <td mat-cell *matCellDef="let element" class="text-end"> {{element.GrossAmount| number : '1.2-2'}} </td>
        <td mat-footer-cell *matFooterCellDef><strong>{{GetTotalGrossAmount()|currency:Country2}}</strong> </td>
      </ng-container>

      <ng-container matColumnDef="GrossAmountsymbolP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Gross Amount </th>
      </ng-container>

      <ng-container matColumnDef="TaxDescriptionP">
        <th mat-header-cell *matHeaderCellDef>Desc</th>
        <td mat-cell *matCellDef="let element" class="text-left">
          <ng-container class="height-4px text-center "> {{element.TaxDescription}}</ng-container> <br />
          <ng-container class="height-4px text-center fontsize-12p"> {{element.CESSDescription}}</ng-container> <br />
          <ng-container class="height-4px text-center fontsize-12p"> {{element.AdditionalCESSDescription}}</ng-container>
        </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>
      <ng-container matColumnDef="GSTP">
        <th mat-header-cell *matHeaderCellDef >%</th>
        <td mat-cell *matCellDef="let element" class="text-end">
          {{element.GST}} <br />
          <ng-container *ngIf="element.CESS != 0" > {{element.CESS}} </ng-container> <br />
          <ng-container *ngIf="element.AdditionalCESS != 0"> {{element.AdditionalCESS}} </ng-container>
        </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>
      <ng-container matColumnDef="GSTValue1P">
        <th mat-header-cell *matHeaderCellDef>Amount </th>
        <td mat-cell *matCellDef="let element" class="text-end">
          <ng-container>{{element.GSTAmount | number : '1.2-2'}}</ng-container> <br />
          <ng-container *ngIf="element.CESS != 0"> {{element.CESSAmount| number : '1.2-2'}}</ng-container> <br />
          <ng-container *ngIf="element.AdditionalCESS != 0"> {{element.AdditionalCESSAmount| number : '1.2-2'}}</ng-container>
        </td>
        <td mat-footer-cell *matFooterCellDef><strong>{{GetTotalTaxAmount()|currency:Country2}}</strong></td>
      </ng-container>

      <ng-container matColumnDef="TotalAmountP">
        <th [ngStyle]="{'display': 'none'}" mat-header-cell *matHeaderCellDef>Total Amount</th>
        <td mat-cell *matCellDef="let element" class="text-end"> {{element.TotalAmount| number : '1.2-2'}} </td>
        <td mat-footer-cell *matFooterCellDef class="text-end"><strong>{{GetTotalAmount()|currency:Country2}} </strong> </td>
      </ng-container>

      <ng-container matColumnDef="TotalAmountsymbolP">
        <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Total Amount </th>
      </ng-container>

      <ng-container matColumnDef="header-Discount-groupP">
        <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> Discount </th>
      </ng-container>


      <ng-container matColumnDef="header-row-third-group1P">
        <th mat-header-cell *matHeaderCellDef [attr.colspan]="3"> Tax </th>
      </ng-container>


      <tr mat-header-row *matHeaderRowDef="['Types1P','Brands1P','Models1P','LensNamesymbolP',
     'Indexs1P','Colors1P','UOMsymbolP','QuantitysymbolP','PricesymbolP',
     'AmountsymbolP','header-Discount-groupP','GrossAmountsymbolP','header-row-third-group1P','TotalAmountsymbolP']"></tr>

      <tr mat-header-row *matHeaderRowDef="displayedColumnsprint; sticky: true"></tr>
      <tr mat-row *matRowDef="let row;  columns: displayedColumnsprint;"></tr>
      <tr mat-footer-row *matFooterRowDef="displayedColumnsprint;sticky:true"></tr>
    </table>

    <!--//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////-->
  </div>

  <div class="col-sm-12" style="margin-top:15px">
    <div class="col-sm-8">
      <div class="row">
        <!--<div class="col-s-sm-3">
          <mat-label><strong>Rupees in Words: &nbsp;</strong></mat-label>
        </div>-->
        <div class="col-s-sm-5">
          <p>{{Country2}} (in Words) :{{transform(GetTotalAmount2)}} {{Country2}} only</p>
        </div>
      </div>

    </div>
  </div>

  <div class="col-sm-12" style="margin-top:15px">
    <div class="row">
      <div class="col-sm-3">
        <mat-label><strong>Validity (In Days): &nbsp;</strong></mat-label>
        {{M_VIDays}}
      </div>
      <div class="col-sm-3">
        <mat-label><strong>Delivery Date: &nbsp;</strong></mat-label>
        {{M_DeliveryDate | date:"dd-MMM-y"}}
      </div>
      <div class="col-sm-2">
      </div>
      <div class="col-sm-4">
        <mat-label><strong>Terms And Conditions: &nbsp;</strong></mat-label>
        {{M_TermsAndConditions}}
      </div>
    </div>
  </div>

  <div class="col-sm-12" *ngIf="hiddenpaymentinprint" style="margin-top:1%;margin-bottom:3%">
    <div class="col-sm-12" style="margin-bottom:5%">
      <div class="row">
        <div class="col-sm-4"> </div>
        <div class="col-sm-4">
          <strong>Payment Details</strong>
        </div>
        <div class="col-sm-4"> </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-6">
        <div class="row">
          <div class="col-sm-4"><mat-label><strong>Receipt No</strong></mat-label></div>
          <div class="col-sm-1">:</div>
          <div class="col-sm-5"> {{ReceiptNumber}} </div>
          <div class="col-sm-2"></div>
        </div>
        <div class="row">
          <div class="col-sm-4"><mat-label><strong>Receipt date & Time</strong></mat-label></div>
          <div class="col-sm-1">:</div>
          <div class="col-sm-5"> {{ReceiptDate| date:"dd-MMM-y HH:mm"}} </div>
          <div class="col-sm-2"></div>
        </div>
      </div>
    </div>








    <div class="col-sm-12" style="margin-top:20px">
      <table align="center" style="border-left:3px solid#51b8f2;margin-top:-9px;font-size: 12px" class="table table-bordered">
        <thead>
          <tr>
            <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Sl.No</th>
            <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Payment Mode</th>
            <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Instruction No.</th>
            <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Date</th>
            <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Bank Name</th>
            <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Branch Name</th>
            <th style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">Amount</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let x of paymentPrint; index as i">
            <td style="text-align:center">{{i+1}}</td>
            <td style="text-align:center">{{x.PaymentMode}}</td>
            <td style="text-align:center">{{x.InstrumentNumber}}</td>
            <td style="text-align:center">{{x.Instrumentdate| date:"dd-MMM-y"}}</td>
            <td style="text-align:center">{{x.BankName}}</td>
            <td style="text-align:center">{{x.BankBranch}}</td>
            <td style="text-align:center">{{x.Amount|currency:Country2}}</td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td style="text-align:center">Total Amount</td>
            <td style="text-align:center"> </td>
          </tr>
        </tfoot>


      </table>
    </div>


  </div>

  <div class="col-sm-12" style="margin-top:35px">
    <div class="row">


      <div class="col-sm-4"><mat-label><strong>Prepared by: &nbsp;</strong></mat-label></div>
      <div class="col-sm-4"><mat-label><strong> Authoried by: &nbsp;</strong></mat-label></div>
      <div class="col-sm-4">
        <mat-label><strong>Authorized Signatory: &nbsp;</strong></mat-label>
      </div>
    </div>

  </div>
</div>






<!--////////////////////////////////////////view asses//////////////////////////////////////////-->
<div class="modal cust-model" role="dialog" [ngStyle]="{'display':accesspopup}">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="modalcloseAccessOk()">&times;</button>
        <h4 class="modal-title text-left">Job Order Details  - View Access</h4>
      </div>
      <div class="modal-body">
        <table align="center" class="table custom-table">
          <thead>
            <tr>
              <th>Add</th>
              <th>Edit</th>
              <th>Delete</th>
              <th>Export</th>
              <th>Print</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let x of accessdata ; index as i">
              <td>
                <mat-checkbox [(checked)]="x.Add" disabled></mat-checkbox>
              </td>
              <td>
                <mat-checkbox [(checked)]="x.Edit" disabled></mat-checkbox>
              </td>
              <td>
                <mat-checkbox [(checked)]="x.Delete" disabled></mat-checkbox>
              </td>
              <td>
                <mat-checkbox [(checked)]="x.Export" disabled></mat-checkbox>
              </td>
              <td>
                <mat-checkbox [(checked)]="x.Print" disabled></mat-checkbox>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button class="btn btn-success" data-dismiss="modal" autofocus (click)="modalcloseAccessOk()">Ok</button>
      </div>
    </div>
  </div>
</div>




<!--////////////////pop-up//////////-->
<div class="modal" role="dialog" [ngStyle]="{'display':invdepPopUp}">
  <div class="modal-dialog modal-lg" style="width:80%;padding-top:10px">
    <div class="modal-content" style="height:550px">
      <div class="modal-header" style="background-color:#51b8f2;color:white;">
        <button class="close" (click)="invdepPopUpClose()">&times;</button>
        <h5 class="modal-title" style="text-align:center">
          <strong>Payment master</strong>
        </h5>
      </div>

      <div class="modal-body">

        <div class="col-sm-12">

          <div class="row">
            <input #OLMID [hidden]="hiddenM_OLMID" [(ngModel)]="M_OLMID" name="OLMID" matInput placeholder="">
            <div class="col-sm-7">
              <div class="row">
                <div class="col-sm-2" style="width:33%">
                  <mat-form-field appearance="outline">
                    <mat-label>Payment Description</mat-label>
                    <input required [(ngModel)]="M_Slitlamp" name="Slitlamp" matInput placeholder="" maxlength="100">
                  </mat-form-field>
                </div>
                <div class="col-sm-1">
                  <button class="grab" type="reset" mat-icon-button (click)="Help()" matTooltip="Help">
                    <mat-icon>search</mat-icon>
                  </button>
                </div>
                <div class="col-sm-2" *ngIf="hiddenisActive">
                  <mat-form-field appearance="outline">
                    <mat-label>Is Active</mat-label>
                    <mat-select [(ngModel)]="M_IsActive" name="Active">
                      <mat-option>Select</mat-option>
                      <mat-option value="true">Yes</mat-option>
                      <mat-option value="false">No</mat-option>
                    </mat-select>
                  </mat-form-field>
                </div>
              </div>
              <div class="row" style="margin-top: 2%;">
                <div class="col-sm-4"></div>
                <div class="col-sm-1" style="margin-left: -12%;" *ngIf="hiddenUpdate1">
                  <button [disabled]="DisableonUpdate" class="success" (click)="UpdateclkINV()" mat-raised-button>Update</button>
                </div>
                <div class="col-sm-1" style="margin-left: -12%;" *ngIf="hiddenSubmit1">
                  <button [disabled]="DisableonSubmit" class="success" (click)="onSubmitINV()" mat-raised-button>Submit</button>
                </div>
                <div class="col-sm-1" style="margin-left: 6%;">
                  <button type="button" class="btn btn-warning" style="font-size:15px;color:orange;background-color:white;" (click)="CancelINV()"><strong>Cancel</strong></button>
                </div>
                <div class="col-sm-1" style="margin-left: 9%;" *ngIf="hiddenDelete1">
                  <button [disabled]="DisableonDelete" class="danger" (click)="DeleteclkINV()" mat-raised-button>Delete</button>
                </div>
              </div>
            </div>


            <div class="col-sm-5">

              <div class="row" [hidden]="OLMhidden1">

                <div class="row" style="margin-left: 5px;">

                </div>
                <h3 align="center" style="margin-bottom:0px;width:60%">{{MasterName}}</h3>
                <div class="row" style="width:70%;height:350px;overflow:auto;position:sticky;">
                  <table mat-table matSort [dataSource]="dataSourceinvdep" class="table table-bordered">
                    <ng-container matColumnDef="Action1">
                      <th mat-header-cell *matHeaderCellDef style="background-color: #0c3e8f; color: white;font-family:'Proxima Nova Semibold'; font-size: 17px;">Action</th>
                      <td mat-cell *matCellDef="let element" style="color:#212121;font-family:'Proxima Nova Semibold';font-size:13px;"><input type="checkbox" (click)="selectTypeOLM(element)" /></td>
                    </ng-container>
                    <ng-container matColumnDef="OLMID" *ngIf="hiddenOLMID">
                      <th mat-header-cell *matHeaderCellDef style="background-color: #0c3e8f; color: white; font-family: 'Proxima Nova Semibold'; font-size: 17px;">S.No</th>
                      <td mat-cell *matCellDef="let i = index" style="color:#212121;font-family:'Proxima Nova Semibold';font-size:13px">{{i+1}}</td>
                    </ng-container>
                    <ng-container matColumnDef="Description1">
                      <th mat-header-cell *matHeaderCellDef style="background-color: #0c3e8f; color: white; font-family: 'Proxima Nova Semibold'; font-size: 17px;">{{MasterName}} Description</th>
                      <td mat-cell *matCellDef="let element" style="color:#212121;font-family:'Proxima Nova Semibold';font-size:13px;word-break: break-word;">{{element.PDescription}} </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumnsinvdep;sticky: true"></tr>
                    <tr mat-row *matRowDef="let element; columns: displayedColumnsinvdep"></tr>
                  </table>
                </div>
              </div>

            </div>
          </div>
        </div>


      </div>

    </div>
  </div>
</div>


<!---------------------------------------Optical Order Fee POP-up----------------------->
<div class="modal" role="dialog" [ngStyle]="{'display':OpticalOrderpaymentA}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Job Order Charges</h4>
        <button type="button" class="close" data-dismiss="modal" (click)="OpticalOrderPClose()">&times;</button>
      </div>
      <div class="modal-body">
        <h5 style="text-align:center;background-color:white;color:black"> Advance Amount not applied<br /> do you want to proceed ?</h5>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="OpticalOrderPClose()">No</button>
        <button class="btn btn-success" data-dismiss="modal" (click)="OpticalOrderPYes(OpticalOrder)">Yes</button>
      </div>
    </div>
  </div>
</div>
